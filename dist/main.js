"use strict";var Gy=Object.create;var qn=Object.defineProperty;var Hy=Object.getOwnPropertyDescriptor;var Vy=Object.getOwnPropertyNames;var Wy=Object.getPrototypeOf,Yy=Object.prototype.hasOwnProperty;var Kn=(e,t)=>()=>(e&&(t=e(e=0)),t);var B=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Gn=(e,t)=>{for(var r in t)qn(e,r,{get:t[r],enumerable:!0})},fc=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Vy(t))!Yy.call(e,o)&&o!==r&&qn(e,o,{get:()=>t[o],enumerable:!(n=Hy(t,o))||n.enumerable});return e};var It=(e,t,r)=>(r=e!=null?Gy(Wy(e)):{},fc(t||!e||!e.__esModule?qn(r,"default",{value:e,enumerable:!0}):r,e)),en=e=>fc(qn({},"__esModule",{value:!0}),e);var mc=B((N0,Qy)=>{Qy.exports={name:"dotenv",version:"16.3.1",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard","lint-readme":"standard-markdown",pretest:"npm run lint && npm run dts-check",test:"tap tests/*.js --100 -Rspec",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},funding:"https://github.com/motdotla/dotenv?sponsor=1",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3",decache:"^4.6.1",sinon:"^14.0.1",standard:"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0",tap:"^16.3.0",tar:"^6.1.11",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var yc=B((T0,ft)=>{"use strict";var uc=require("fs"),qs=require("path"),Xy=require("os"),Jy=require("crypto"),Zy=mc(),Ks=Zy.version,eg=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function tg(e){let t={},r=e.toString();r=r.replace(/\r\n?/mg,`
`);let n;for(;(n=eg.exec(r))!=null;){let o=n[1],s=n[2]||"";s=s.trim();let i=s[0];s=s.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),i==='"'&&(s=s.replace(/\\n/g,`
`),s=s.replace(/\\r/g,"\r")),t[o]=s}return t}function rg(e){let t=pc(e),r=ne.configDotenv({path:t});if(!r.parsed)throw new Error(`MISSING_DATA: Cannot parse ${t} for an unknown reason`);let n=hc(e).split(","),o=n.length,s;for(let i=0;i<o;i++)try{let a=n[i].trim(),c=sg(r,a);s=ne.decrypt(c.ciphertext,c.key);break}catch(a){if(i+1>=o)throw a}return ne.parse(s)}function ng(e){console.log(`[dotenv@${Ks}][INFO] ${e}`)}function og(e){console.log(`[dotenv@${Ks}][WARN] ${e}`)}function js(e){console.log(`[dotenv@${Ks}][DEBUG] ${e}`)}function hc(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function sg(e,t){let r;try{r=new URL(t)}catch(a){throw a.code==="ERR_INVALID_URL"?new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenv.org/vault/.env.vault?environment=development"):a}let n=r.password;if(!n)throw new Error("INVALID_DOTENV_KEY: Missing key part");let o=r.searchParams.get("environment");if(!o)throw new Error("INVALID_DOTENV_KEY: Missing environment part");let s=`DOTENV_VAULT_${o.toUpperCase()}`,i=e.parsed[s];if(!i)throw new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${s} in your .env.vault file.`);return{ciphertext:i,key:n}}function pc(e){let t=qs.resolve(process.cwd(),".env");return e&&e.path&&e.path.length>0&&(t=e.path),t.endsWith(".vault")?t:`${t}.vault`}function ig(e){return e[0]==="~"?qs.join(Xy.homedir(),e.slice(1)):e}function ag(e){ng("Loading env from encrypted .env.vault");let t=ne._parseVault(e),r=process.env;return e&&e.processEnv!=null&&(r=e.processEnv),ne.populate(r,t,e),{parsed:t}}function cg(e){let t=qs.resolve(process.cwd(),".env"),r="utf8",n=!!(e&&e.debug);e&&(e.path!=null&&(t=ig(e.path)),e.encoding!=null&&(r=e.encoding));try{let o=ne.parse(uc.readFileSync(t,{encoding:r})),s=process.env;return e&&e.processEnv!=null&&(s=e.processEnv),ne.populate(s,o,e),{parsed:o}}catch(o){return n&&js(`Failed to load ${t} ${o.message}`),{error:o}}}function dg(e){let t=pc(e);return hc(e).length===0?ne.configDotenv(e):uc.existsSync(t)?ne._configVault(e):(og(`You set DOTENV_KEY but you are missing a .env.vault file at ${t}. Did you forget to build it?`),ne.configDotenv(e))}function lg(e,t){let r=Buffer.from(t.slice(-64),"hex"),n=Buffer.from(e,"base64"),o=n.slice(0,12),s=n.slice(-16);n=n.slice(12,-16);try{let i=Jy.createDecipheriv("aes-256-gcm",r,o);return i.setAuthTag(s),`${i.update(n)}${i.final()}`}catch(i){let a=i instanceof RangeError,c=i.message==="Invalid key length",d=i.message==="Unsupported state or unable to authenticate data";if(a||c){let l="INVALID_DOTENV_KEY: It must be 64 characters long (or more)";throw new Error(l)}else if(d){let l="DECRYPTION_FAILED: Please check your DOTENV_KEY";throw new Error(l)}else throw console.error("Error: ",i.code),console.error("Error: ",i.message),i}}function fg(e,t,r={}){let n=!!(r&&r.debug),o=!!(r&&r.override);if(typeof t!="object")throw new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");for(let s of Object.keys(t))Object.prototype.hasOwnProperty.call(e,s)?(o===!0&&(e[s]=t[s]),n&&js(o===!0?`"${s}" is already defined and WAS overwritten`:`"${s}" is already defined and was NOT overwritten`)):e[s]=t[s]}var ne={configDotenv:cg,_configVault:ag,_parseVault:rg,config:dg,decrypt:lg,parse:tg,populate:fg};ft.exports.configDotenv=ne.configDotenv;ft.exports._configVault=ne._configVault;ft.exports._parseVault=ne._parseVault;ft.exports.config=ne.config;ft.exports.decrypt=ne.decrypt;ft.exports.parse=ne.parse;ft.exports.populate=ne.populate;ft.exports=ne});var Cc=B((P0,gc)=>{"use strict";var Nr={};process.env.DOTENV_CONFIG_ENCODING!=null&&(Nr.encoding=process.env.DOTENV_CONFIG_ENCODING);process.env.DOTENV_CONFIG_PATH!=null&&(Nr.path=process.env.DOTENV_CONFIG_PATH);process.env.DOTENV_CONFIG_DEBUG!=null&&(Nr.debug=process.env.DOTENV_CONFIG_DEBUG);process.env.DOTENV_CONFIG_OVERRIDE!=null&&(Nr.override=process.env.DOTENV_CONFIG_OVERRIDE);process.env.DOTENV_CONFIG_DOTENV_KEY!=null&&(Nr.DOTENV_KEY=process.env.DOTENV_CONFIG_DOTENV_KEY);gc.exports=Nr});var Ec=B((I0,xc)=>{"use strict";var mg=/^dotenv_config_(encoding|path|debug|override|DOTENV_KEY)=(.+)$/;xc.exports=function(t){return t.reduce(function(r,n){let o=n.match(mg);return o&&(r[o[1]]=o[2]),r},{})}});var Sc=B(vt=>{"use strict";var wc=vt&&vt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(vt,"__esModule",{value:!0});vt.getCameras=vt.getLinuxCameras=void 0;var ug=wc(require("os")),hg=wc(require("fs")),bc=()=>{let e=/^video/i,t="/dev/";return hg.default.readdirSync(t).reduce((o,s)=>(s.match(e)&&o.push(t+s),o),[])};vt.getLinuxCameras=bc;var pg=()=>{switch(ug.default.platform()){case"linux":case"darwin":return bc()}};vt.getCameras=pg});var _c=B(Tr=>{"use strict";Object.defineProperty(Tr,"__esModule",{value:!0});Tr.defaults=Tr.setDefaults=void 0;var Ac={width:1280,height:720,quality:100,delay:0,title:"",subtitle:"",timestamp:"",saveShots:!0,output:"jpeg",device:"",verbose:!1,frames:1,greyScale:!1,rotation:0,bottomBanner:!1,topBanner:!1,skip:0};Tr.defaults=Ac;var yg=(e={})=>Object.assign(Object.assign({},Ac),e);Tr.setDefaults=yg});var Nc=B(Ot=>{"use strict";var kc=Ot&&Ot.__classPrivateFieldSet||function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},Rc=Ot&&Ot.__classPrivateFieldGet||function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Hn,Vn;Object.defineProperty(Ot,"__esModule",{value:!0});Ot.Shot=void 0;var Gs=class{constructor(t,r){Hn.set(this,void 0),Vn.set(this,void 0),kc(this,Hn,t,"f"),kc(this,Vn,r,"f")}get location(){return Rc(this,Hn,"f")}get data(){return Buffer.from(Rc(this,Vn,"f"))}};Ot.Shot=Gs;Hn=new WeakMap,Vn=new WeakMap});var Vs=B(mt=>{"use strict";var gg=mt&&mt.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Hs=mt&&mt.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&gg(t,e,r)};Object.defineProperty(mt,"__esModule",{value:!0});Hs(Sc(),mt);Hs(_c(),mt);Hs(Nc(),mt)});var tn=B(Ke=>{"use strict";var Cg=Ke&&Ke.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})},Ws=Ke&&Ke.__classPrivateFieldSet||function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},ae=Ke&&Ke.__classPrivateFieldGet||function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Dt,pe;Object.defineProperty(Ke,"__esModule",{value:!0});Ke.BaseWebcam=void 0;var xg=require("child_process"),Eg=require("util"),Ys=require("fs"),Qs=Vs(),wg=(0,Eg.promisify)(xg.exec),bg=/(?<=\.)[^.]*$/,Sg=["jpg","jpeg","png","bmp"],Xs=class e{constructor(t){Dt.set(this,void 0),pe.set(this,void 0),Ws(this,Dt,[],"f"),Ws(this,pe,(0,Qs.setDefaults)(t),"f")}get options(){return Object.assign({},ae(this,pe,"f"))}setMaxQuality(){ae(this,pe,"f").quality=9}setMaxDelay(){ae(this,pe,"f").delay=1}setDelayInMilliseconds(){ae(this,pe,"f").delay=ae(this,pe,"f").delay*1e3}clone(){return new e(ae(this,pe,"f"))}clear(){Ws(this,Dt,[],"f")}list(){return(0,Qs.getCameras)()}hasCamera(t){var r,n;return(n=(r=this.list())===null||r===void 0?void 0:r.includes(t))!==null&&n!==void 0?n:!1}getListControlsSh(t){let r=typeof ae(this,pe,"f").device=="string"&&ae(this,pe,"f").device?`--device=${ae(this,pe,"f").device.trim()}`:"";return`${t} ${r} --list-controls`}createShot(t,r){return new Qs.Shot(t,r)}capture(t,r,n){return Cg(this,void 0,void 0,function*(){let o=r.match(bg);if(!o)throw new Error("Invalid path, missing type file");if(!o[0])throw new Error(`Invalid type extension: ${o[0]}`);if(!Sg.includes(o[0]))throw new Error(`Invalid file extension: ${o[0]}`);if(ae(this,pe,"f").output!==o[0])throw new Error(`The output (${ae(this,pe,"f").output}) and the file type (${o[0]}) does not match`);try{yield wg(t,{maxBuffer:1024*1e4});let s=(0,Ys.readFileSync)(r);switch(n){case"buffer":return s;case"base64":return this.getBase64FromBuffer(s);default:throw new Error(`Invalid returnType: ${n}`)}}catch(s){throw ae(this,pe,"f").verbose&&console.error("Error while shotting: ",s),s}})}getShot(t){if(t<0||t>ae(this,Dt,"f").length)throw new Error("Index out of bonds");return ae(this,Dt,"f")[t]}getLastShot(){return ae(this,Dt,"f")[ae(this,Dt,"f").length-1]}getShotBuffer(t){let r=this.getShot(t);return(0,Ys.readFileSync)(r.location)}getLastShotBuffer(){let t=this.getLastShot();return(0,Ys.readFileSync)(t.location)}getBase64FromBuffer(t){return`data:image/${ae(this,pe,"f").output};base64,${t.toString("base64")}`}getBase64(t){let r=this.getShot(t);return this.getBase64FromBuffer(r.data)}getLastShotBase64(){let t=this.getLastShot();return this.getBase64FromBuffer(t.data)}};Ke.BaseWebcam=Xs;Dt=new WeakMap,pe=new WeakMap});var Pc=B(Bt=>{"use strict";var Ag=Bt&&Bt.__classPrivateFieldSet||function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},Tc=Bt&&Bt.__classPrivateFieldGet||function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},rn;Object.defineProperty(Bt,"__esModule",{value:!0});Bt.FSWebcam=void 0;var _g=tn(),Js=class extends _g.BaseWebcam{constructor(t){super(t),rn.set(this,void 0),Ag(this,rn,"fswebcam","f"),t?.quality&&t.quality>9&&this.setMaxQuality()}generateSh(t){let r=super.options,n=` -r ${r.width}x${r.height}`,o=`-F ${r.frames}`,s=`-D ${r.delay}`,i=r.output==="jpg"?"":`--${r.output} -1`,a=r.title?`--title ${r.title}`:"",c=r.subtitle?`--subtitle ${r.subtitle}`:"",d=r.timestamp?`--timestamp ${r.timestamp}`:"",l=r.device?`-d ${r.device}`:"",u=r.greyScale?"--greyscale":"",h=r.rotation?`--rotate ${r.rotation}`:"",g=!r.topBanner&&!r.bottomBanner?"--no-banner":r.topBanner?"--top-banner":"--bottom-banner",w=r.skip?`--skip ${r.skip}`:"",b=r.verbose?"":" -q",E=t||"- -";return`${Tc(this,rn,"f")} ${b} ${n} ${o} ${s} ${a} ${c} ${d} ${l} ${u} ${h} ${g} ${w} ${i} ${E}`.replace(/ +/g," ")}getListControlsSh(){let{options:{device:t}}=this,r=t?" --device="+t.trim():"";return`${Tc(this,rn,"f")} ${r} --list-controls`}};Bt.FSWebcam=Js;rn=new WeakMap});var vc=B(Ge=>{"use strict";var kg=Ge&&Ge.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})},Rg=Ge&&Ge.__classPrivateFieldSet||function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},Ic=Ge&&Ge.__classPrivateFieldGet||function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},nn;Object.defineProperty(Ge,"__esModule",{value:!0});Ge.ImageSnapWebcam=void 0;var Ng=require("child_process"),Tg=require("util"),Pg=tn(),Ig=(0,Tg.promisify)(Ng.exec),Zs=class extends Pg.BaseWebcam{constructor(t){super(t),nn.set(this,void 0),Rg(this,nn,"imagesnap","f"),t?.delay&&t?.delay<1&&super.setMaxDelay()}generateSh(t){let{options:r}=this,n=r.verbose?"-v":"-q",o=r.delay?`-w ${r.delay}`:"",s=r.device?`-d "${r.device}"`:"";return`${Ic(this,nn,"f")} ${o} ${s} ${n} ${t}`.replace(/ +/g," ")}listWebcams(){return kg(this,void 0,void 0,function*(){let t=`${Ic(this,nn,"f")} -l`,r=yield Ig(t);if(r.stderr)throw this.options.verbose&&console.error("Error while listing webcams: ",r.stderr),new Error(r.stderr);return r.stdout.split(`
`).reduce((o,s)=>(s==="Video Devices:"||!s||o.push(s.replace(/.*?\[(.*?)\].*/,"$1")),o),[])})}};Ge.ImageSnapWebcam=Zs;nn=new WeakMap});var Dc=B(He=>{"use strict";var vg=He&&He.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})},Og=He&&He.__classPrivateFieldSet||function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},Oc=He&&He.__classPrivateFieldGet||function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},on;Object.defineProperty(He,"__esModule",{value:!0});He.WindowsWebcam=void 0;var Dg=require("child_process"),Bg=require("util"),Mg=require("path"),Fg=tn(),Lg=(0,Bg.promisify)(Dg.exec),ei=class extends Fg.BaseWebcam{constructor(t){super(Object.assign(Object.assign({},t),{output:"bmp"})),on.set(this,void 0),Og(this,on,(0,Mg.resolve)(__dirname,"..","bindings","CommandCam","CommandCam.exe"),"f"),t?.delay&&super.setDelayInMilliseconds()}generateSh(t){let{options:r}=this,n=r.device?`/devnum ${r.device}`:"",o=r.delay?`/delay ${r.delay}`:"";return`${Oc(this,on,"f")} ${o} ${n} /filename ${t}`.replace(/ +/g," ")}listWebcams(){return vg(this,void 0,void 0,function*(){let t=`${Oc(this,on,"f")} /devlist`,r=yield Lg(t);if(r.stderr)throw this.options.verbose&&console.error("Error while listing webcams: ",r.stderr),new Error(r.stderr);return r.stdout.split(`
`).reduce((o,s)=>{let i=s.replace("\r","");return["Available capture devices:","Available capture devices:"].includes(i)||!i||o.push(i),o},[])})}};He.WindowsWebcam=ei;on=new WeakMap});var ti=B(Ve=>{"use strict";var zg=Ve&&Ve.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Wn=Ve&&Ve.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&zg(t,e,r)};Object.defineProperty(Ve,"__esModule",{value:!0});Wn(tn(),Ve);Wn(Pc(),Ve);Wn(vc(),Ve);Wn(Dc(),Ve)});var Mc=B(Mt=>{"use strict";var Bc=Mt&&Mt.__classPrivateFieldSet||function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},ri=Mt&&Mt.__classPrivateFieldGet||function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Yn,an;Object.defineProperty(Mt,"__esModule",{value:!0});Mt.Factory=void 0;var $g=require("os"),sn=ti(),ni=class{constructor(t){Yn.set(this,void 0),an.set(this,void 0),Bc(this,Yn,(0,$g.platform)(),"f"),Bc(this,an,{linux:new sn.FSWebcam(t),fswebcam:new sn.FSWebcam(t),darwin:new sn.ImageSnapWebcam(t),win32:new sn.WindowsWebcam(t),win64:new sn.WindowsWebcam(t)},"f")}create(t){if(!Object.keys(ri(this,an,"f")).includes(t))throw new Error("Webcam type is not supported");let r=t||ri(this,Yn,"f");return ri(this,an,"f")[r]}};Mt.Factory=ni;Yn=new WeakMap,an=new WeakMap});var Lc=B(W=>{"use strict";var Ug=W&&W.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(W,"__esModule",{value:!0});W.defaults=W.WindowsWebcam=W.ImageSnapWebcam=W.FSWebcam=W.BaseWebcam=W.Factory=W.list=W.capture=W.create=void 0;var jg=require("path"),Fc=Mc();Object.defineProperty(W,"Factory",{enumerable:!0,get:function(){return Fc.Factory}});var Qn=ti();Object.defineProperty(W,"BaseWebcam",{enumerable:!0,get:function(){return Qn.BaseWebcam}});Object.defineProperty(W,"FSWebcam",{enumerable:!0,get:function(){return Qn.FSWebcam}});Object.defineProperty(W,"ImageSnapWebcam",{enumerable:!0,get:function(){return Qn.ImageSnapWebcam}});Object.defineProperty(W,"WindowsWebcam",{enumerable:!0,get:function(){return Qn.WindowsWebcam}});var oi=(e,t)=>new Fc.Factory(e).create(t);W.create=oi;var qg=({location:e="location.jpeg",type:t="linux",options:r={},cb:n=s=>{},returnType:o="base64"}={location:"location.jpeg",type:"linux",options:{},cb:s=>{},returnType:"base64"})=>Ug(void 0,void 0,void 0,function*(){let s=oi(r,t),i=(0,jg.resolve)(__dirname,e),a=yield s.capture(s.generateSh(e),i,o);return n?.(a),a});W.capture=qg;var Kg=e=>oi({},e).list();W.list=Kg;var Gg=Vs();Object.defineProperty(W,"defaults",{enumerable:!0,get:function(){return Gg.defaults}})});var ln={};Gn(ln,{__assign:()=>di,__asyncDelegator:()=>EC,__asyncGenerator:()=>xC,__asyncValues:()=>wC,__await:()=>dn,__awaiter:()=>uC,__classPrivateFieldGet:()=>_C,__classPrivateFieldSet:()=>kC,__createBinding:()=>pC,__decorate:()=>lC,__exportStar:()=>yC,__extends:()=>cC,__generator:()=>hC,__importDefault:()=>AC,__importStar:()=>SC,__makeTemplateObject:()=>bC,__metadata:()=>mC,__param:()=>fC,__read:()=>Yc,__rest:()=>dC,__spread:()=>gC,__spreadArrays:()=>CC,__values:()=>li});function cC(e,t){ci(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function dC(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function lC(e,t,r,n){var o=arguments.length,s=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function fC(e,t){return function(r,n){t(r,n,e)}}function mC(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function uC(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(u){i(u)}}function c(l){try{d(n.throw(l))}catch(u){i(u)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})}function hC(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(d){return function(l){return c([d,l])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(s=d[0]&2?o.return:d[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,d[1])).done)return s;switch(o=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(l){d=[6,l],o=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function pC(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function yC(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function li(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yc(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return s}function gC(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Yc(arguments[t]));return e}function CC(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)n[o]=s[i];return n}function dn(e){return this instanceof dn?(this.v=e,this):new dn(e)}function xC(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,s=[];return o={},i("next"),i("throw"),i("return"),o[Symbol.asyncIterator]=function(){return this},o;function i(h){n[h]&&(o[h]=function(g){return new Promise(function(w,b){s.push([h,g,w,b])>1||a(h,g)})})}function a(h,g){try{c(n[h](g))}catch(w){u(s[0][3],w)}}function c(h){h.value instanceof dn?Promise.resolve(h.value.v).then(d,l):u(s[0][2],h)}function d(h){a("next",h)}function l(h){a("throw",h)}function u(h,g){h(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}function EC(e){var t,r;return t={},n("next"),n("throw",function(o){throw o}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(o,s){t[o]=e[o]?function(i){return(r=!r)?{value:dn(e[o](i)),done:o==="return"}:s?s(i):i}:s}}function wC(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof li=="function"?li(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(i){return new Promise(function(a,c){i=e[s](i),o(a,c,i.done,i.value)})}}function o(s,i,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},i)}}function bC(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function SC(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function AC(e){return e&&e.__esModule?e:{default:e}}function _C(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function kC(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}var ci,di,fn=Kn(()=>{"use strict";ci=function(e,t){return ci=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},ci(e,t)};di=function(){return di=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},di.apply(this,arguments)}});var Qc,Xc,Jc=Kn(()=>{"use strict";Qc=e=>{let t=[];for(let r=0,n=e.length;r<n;r++){let o=e.charCodeAt(r);if(o<128)t.push(o);else if(o<2048)t.push(o>>6|192,o&63|128);else if(r+1<e.length&&(o&64512)===55296&&(e.charCodeAt(r+1)&64512)===56320){let s=65536+((o&1023)<<10)+(e.charCodeAt(++r)&1023);t.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else t.push(o>>12|224,o>>6&63|128,o&63|128)}return Uint8Array.from(t)},Xc=e=>{let t="";for(let r=0,n=e.length;r<n;r++){let o=e[r];if(o<128)t+=String.fromCharCode(o);else if(192<=o&&o<224){let s=e[++r];t+=String.fromCharCode((o&31)<<6|s&63)}else if(240<=o&&o<365){let i="%"+[o,e[++r],e[++r],e[++r]].map(a=>a.toString(16)).join("%");t+=decodeURIComponent(i)}else t+=String.fromCharCode((o&15)<<12|(e[++r]&63)<<6|e[++r]&63)}return t}});function Zc(e){return new TextEncoder().encode(e)}function ed(e){return new TextDecoder("utf-8").decode(e)}var td=Kn(()=>{"use strict"});var rd={};Gn(rd,{fromUtf8:()=>RC,toUtf8:()=>NC});var RC,NC,nd=Kn(()=>{"use strict";Jc();td();RC=e=>typeof TextEncoder=="function"?Zc(e):Qc(e),NC=e=>typeof TextDecoder=="function"?ed(e):Xc(e)});var od=B(Zn=>{"use strict";Object.defineProperty(Zn,"__esModule",{value:!0});Zn.convertToBuffer=void 0;var TC=(nd(),en(rd)),PC=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:TC.fromUtf8;function IC(e){return e instanceof Uint8Array?e:typeof e=="string"?PC(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}Zn.convertToBuffer=IC});var sd=B(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});eo.isEmptyData=void 0;function vC(e){return typeof e=="string"?e.length===0:e.byteLength===0}eo.isEmptyData=vC});var id=B(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});to.numToUint8=void 0;function OC(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}to.numToUint8=OC});var ad=B(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});ro.uint32ArrayFrom=void 0;function DC(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}ro.uint32ArrayFrom=DC});var mn=B(We=>{"use strict";Object.defineProperty(We,"__esModule",{value:!0});We.uint32ArrayFrom=We.numToUint8=We.isEmptyData=We.convertToBuffer=void 0;var BC=od();Object.defineProperty(We,"convertToBuffer",{enumerable:!0,get:function(){return BC.convertToBuffer}});var MC=sd();Object.defineProperty(We,"isEmptyData",{enumerable:!0,get:function(){return MC.isEmptyData}});var FC=id();Object.defineProperty(We,"numToUint8",{enumerable:!0,get:function(){return FC.numToUint8}});var LC=ad();Object.defineProperty(We,"uint32ArrayFrom",{enumerable:!0,get:function(){return LC.uint32ArrayFrom}})});var ld=B(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});no.AwsCrc32=void 0;var cd=(fn(),en(ln)),fi=mn(),dd=un(),zC=function(){function e(){this.crc32=new dd.Crc32}return e.prototype.update=function(t){(0,fi.isEmptyData)(t)||this.crc32.update((0,fi.convertToBuffer)(t))},e.prototype.digest=function(){return cd.__awaiter(this,void 0,void 0,function(){return cd.__generator(this,function(t){return[2,(0,fi.numToUint8)(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new dd.Crc32},e}();no.AwsCrc32=zC});var un=B(Ut=>{"use strict";Object.defineProperty(Ut,"__esModule",{value:!0});Ut.AwsCrc32=Ut.Crc32=Ut.crc32=void 0;var $C=(fn(),en(ln)),UC=mn();function jC(e){return new fd().update(e).digest()}Ut.crc32=jC;var fd=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=$C.__values(t),s=o.next();!s.done;s=o.next()){var i=s.value;this.checksum=this.checksum>>>8^KC[(this.checksum^i)&255]}}catch(a){r={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}();Ut.Crc32=fd;var qC=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],KC=(0,UC.uint32ArrayFrom)(qC),GC=ld();Object.defineProperty(Ut,"AwsCrc32",{enumerable:!0,get:function(){return GC.AwsCrc32}})});var Xo=B(Ct=>{"use strict";var Ef=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",EE=Ef+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",wf="["+Ef+"]["+EE+"]*",wE=new RegExp("^"+wf+"$"),bE=function(e,t){let r=[],n=t.exec(e);for(;n;){let o=[];o.startIndex=t.lastIndex-n[0].length;let s=n.length;for(let i=0;i<s;i++)o.push(n[i]);r.push(o),n=t.exec(e)}return r},SE=function(e){let t=wE.exec(e);return!(t===null||typeof t>"u")};Ct.isExist=function(e){return typeof e<"u"};Ct.isEmptyObject=function(e){return Object.keys(e).length===0};Ct.merge=function(e,t,r){if(t){let n=Object.keys(t),o=n.length;for(let s=0;s<o;s++)r==="strict"?e[n[s]]=[t[n[s]]]:e[n[s]]=t[n[s]]}};Ct.getValue=function(e){return Ct.isExist(e)?e:""};Ct.isName=SE;Ct.getAllMatches=bE;Ct.nameRegexp=wf});var Qi=B(kf=>{"use strict";var Yi=Xo(),AE={allowBooleanAttributes:!1,unpairedTags:[]};kf.validate=function(e,t){t=Object.assign({},AE,t);let r=[],n=!1,o=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let s=0;s<e.length;s++)if(e[s]==="<"&&e[s+1]==="?"){if(s+=2,s=Sf(e,s),s.err)return s}else if(e[s]==="<"){let i=s;if(s++,e[s]==="!"){s=Af(e,s);continue}else{let a=!1;e[s]==="/"&&(a=!0,s++);let c="";for(;s<e.length&&e[s]!==">"&&e[s]!==" "&&e[s]!=="	"&&e[s]!==`
`&&e[s]!=="\r";s++)c+=e[s];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),s--),!vE(c)){let u;return c.trim().length===0?u="Invalid space after '<'.":u="Tag '"+c+"' is an invalid name.",Z("InvalidTag",u,ke(e,s))}let d=RE(e,s);if(d===!1)return Z("InvalidAttr","Attributes for '"+c+"' have open quote.",ke(e,s));let l=d.value;if(s=d.index,l[l.length-1]==="/"){let u=s-l.length;l=l.substring(0,l.length-1);let h=_f(l,t);if(h===!0)n=!0;else return Z(h.err.code,h.err.msg,ke(e,u+h.err.line))}else if(a)if(d.tagClosed){if(l.trim().length>0)return Z("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",ke(e,i));{let u=r.pop();if(c!==u.tagName){let h=ke(e,u.tagStartPos);return Z("InvalidTag","Expected closing tag '"+u.tagName+"' (opened in line "+h.line+", col "+h.col+") instead of closing tag '"+c+"'.",ke(e,i))}r.length==0&&(o=!0)}}else return Z("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",ke(e,s));else{let u=_f(l,t);if(u!==!0)return Z(u.err.code,u.err.msg,ke(e,s-l.length+u.err.line));if(o===!0)return Z("InvalidXml","Multiple possible root nodes found.",ke(e,s));t.unpairedTags.indexOf(c)!==-1||r.push({tagName:c,tagStartPos:i}),n=!0}for(s++;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="!"){s++,s=Af(e,s);continue}else if(e[s+1]==="?"){if(s=Sf(e,++s),s.err)return s}else break;else if(e[s]==="&"){let u=PE(e,s);if(u==-1)return Z("InvalidChar","char '&' is not expected.",ke(e,s));s=u}else if(o===!0&&!bf(e[s]))return Z("InvalidXml","Extra text at the end",ke(e,s));e[s]==="<"&&s--}}else{if(bf(e[s]))continue;return Z("InvalidChar","char '"+e[s]+"' is not expected.",ke(e,s))}if(n){if(r.length==1)return Z("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",ke(e,r[0].tagStartPos));if(r.length>0)return Z("InvalidXml","Invalid '"+JSON.stringify(r.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return Z("InvalidXml","Start tag expected.",1);return!0};function bf(e){return e===" "||e==="	"||e===`
`||e==="\r"}function Sf(e,t){let r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let n=e.substr(r,t-r);if(t>5&&n==="xml")return Z("InvalidXml","XML declaration allowed only at the start of the document.",ke(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function Af(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var _E='"',kE="'";function RE(e,t){let r="",n="",o=!1;for(;t<e.length;t++){if(e[t]===_E||e[t]===kE)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){o=!0;break}r+=e[t]}return n!==""?!1:{value:r,index:t,tagClosed:o}}var NE=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function _f(e,t){let r=Yi.getAllMatches(e,NE),n={};for(let o=0;o<r.length;o++){if(r[o][1].length===0)return Z("InvalidAttr","Attribute '"+r[o][2]+"' has no space in starting.",xn(r[o]));if(r[o][3]!==void 0&&r[o][4]===void 0)return Z("InvalidAttr","Attribute '"+r[o][2]+"' is without value.",xn(r[o]));if(r[o][3]===void 0&&!t.allowBooleanAttributes)return Z("InvalidAttr","boolean attribute '"+r[o][2]+"' is not allowed.",xn(r[o]));let s=r[o][2];if(!IE(s))return Z("InvalidAttr","Attribute '"+s+"' is an invalid name.",xn(r[o]));if(!n.hasOwnProperty(s))n[s]=1;else return Z("InvalidAttr","Attribute '"+s+"' is repeated.",xn(r[o]))}return!0}function TE(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function PE(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,TE(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function Z(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function IE(e){return Yi.isName(e)}function vE(e){return Yi.isName(e)}function ke(e,t){let r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function xn(e){return e.startIndex+e[1].length}});var Nf=B(Xi=>{"use strict";var Rf={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}},OE=function(e){return Object.assign({},Rf,e)};Xi.buildOptions=OE;Xi.defaultOptions=Rf});var Pf=B((dM,Tf)=>{"use strict";var Ji=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}};Tf.exports=Ji});var vf=B((lM,If)=>{"use strict";var DE=Xo();function BE(e,t){let r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let n=1,o=!1,s=!1,i="";for(;t<e.length;t++)if(e[t]==="<"&&!s){if(o&&LE(e,t))t+=7,[entityName,val,t]=ME(e,t+1),val.indexOf("&")===-1&&(r[jE(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(o&&zE(e,t))t+=8;else if(o&&$E(e,t))t+=8;else if(o&&UE(e,t))t+=9;else if(FE)s=!0;else throw new Error("Invalid DOCTYPE");n++,i=""}else if(e[t]===">"){if(s?e[t-1]==="-"&&e[t-2]==="-"&&(s=!1,n--):n--,n===0)break}else e[t]==="["?o=!0:i+=e[t];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}function ME(e,t){let r="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)r+=e[t];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");let n=e[t++],o="";for(;t<e.length&&e[t]!==n;t++)o+=e[t];return[r,o,t]}function FE(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}function LE(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}function zE(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}function $E(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}function UE(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}function jE(e){if(DE.isName(e))return e;throw new Error(`Invalid entity name ${e}`)}If.exports=BE});var Df=B((fM,Of)=>{"use strict";var qE=/^[-+]?0x[a-fA-F0-9]+$/,KE=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var GE={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function HE(e,t={}){if(t=Object.assign({},GE,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(t.hex&&qE.test(r))return Number.parseInt(r,16);{let n=KE.exec(r);if(n){let o=n[1],s=n[2],i=VE(n[3]),a=n[4]||n[6];if(!t.leadingZeros&&s.length>0&&o&&r[2]!==".")return e;if(!t.leadingZeros&&s.length>0&&!o&&r[1]!==".")return e;{let c=Number(r),d=""+c;return d.search(/[eE]/)!==-1||a?t.eNotation?c:e:r.indexOf(".")!==-1?d==="0"&&i===""||d===i||o&&d==="-"+i?c:e:s?i===d||o+i===d?c:e:r===d||r===o+d?c:e}}else return e}}function VE(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}Of.exports=HE});var Mf=B((uM,Bf)=>{"use strict";var ra=Xo(),En=Pf(),WE=vf(),YE=Df(),mM="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,ra.nameRegexp),Zi=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=QE,this.parseXml=tw,this.parseTextData=XE,this.resolveNameSpace=JE,this.buildAttributesMap=ew,this.isItStopNode=sw,this.replaceEntitiesValue=nw,this.readStopNodeData=aw,this.saveTextToParentTag=ow,this.addChild=rw}};function QE(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function XE(e,t,r,n,o,s,i){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){i||(e=this.replaceEntitiesValue(e));let a=this.options.tagValueProcessor(t,e,r,o,s);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?ta(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?ta(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function JE(e){if(this.options.removeNSPrefix){let t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}var ZE=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function ew(e,t,r){if(!this.options.ignoreAttributes&&typeof e=="string"){let n=ra.getAllMatches(e,ZE),o=n.length,s={};for(let i=0;i<o;i++){let a=this.resolveNameSpace(n[i][1]),c=n[i][4],d=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(d=this.options.transformAttributeName(d)),d==="__proto__"&&(d="#__proto__"),c!==void 0){this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c);let l=this.options.attributeValueProcessor(a,c,t);l==null?s[d]=c:typeof l!=typeof c||l!==c?s[d]=l:s[d]=ta(c,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[d]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){let i={};return i[this.options.attributesGroupName]=s,i}return s}}var tw=function(e){e=e.replace(/\r\n?/g,`
`);let t=new En("!xml"),r=t,n="",o="";for(let s=0;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){let a=_r(e,">",s,"Closing Tag is not closed."),c=e.substring(s+2,a).trim();if(this.options.removeNSPrefix){let u=c.indexOf(":");u!==-1&&(c=c.substr(u+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&(n=this.saveTextToParentTag(n,r,o));let d=o.substring(o.lastIndexOf(".")+1);if(c&&this.options.unpairedTags.indexOf(c)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${c}>`);let l=0;d&&this.options.unpairedTags.indexOf(d)!==-1?(l=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):l=o.lastIndexOf("."),o=o.substring(0,l),r=this.tagsNodeStack.pop(),n="",s=a}else if(e[s+1]==="?"){let a=ea(e,s,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,o),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){let c=new En(a.tagName);c.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(c[":@"]=this.buildAttributesMap(a.tagExp,o,a.tagName)),this.addChild(r,c,o)}s=a.closeIndex+1}else if(e.substr(s+1,3)==="!--"){let a=_r(e,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){let c=e.substring(s+4,a-2);n=this.saveTextToParentTag(n,r,o),r.add(this.options.commentPropName,[{[this.options.textNodeName]:c}])}s=a}else if(e.substr(s+1,2)==="!D"){let a=WE(e,s);this.docTypeEntities=a.entities,s=a.i}else if(e.substr(s+1,2)==="!["){let a=_r(e,"]]>",s,"CDATA is not closed.")-2,c=e.substring(s+9,a);if(n=this.saveTextToParentTag(n,r,o),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:c}]);else{let d=this.parseTextData(c,r.tagname,o,!0,!1,!0);d==null&&(d=""),r.add(this.options.textNodeName,d)}s=a+2}else{let a=ea(e,s,this.options.removeNSPrefix),c=a.tagName,d=a.tagExp,l=a.attrExpPresent,u=a.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,o,!1));let h=r;if(h&&this.options.unpairedTags.indexOf(h.tagname)!==-1&&(r=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),c!==t.tagname&&(o+=o?"."+c:c),this.isItStopNode(this.options.stopNodes,o,c)){let g="";if(d.length>0&&d.lastIndexOf("/")===d.length-1)s=a.closeIndex;else if(this.options.unpairedTags.indexOf(c)!==-1)s=a.closeIndex;else{let b=this.readStopNodeData(e,c,u+1);if(!b)throw new Error(`Unexpected end of ${c}`);s=b.i,g=b.tagContent}let w=new En(c);c!==d&&l&&(w[":@"]=this.buildAttributesMap(d,o,c)),g&&(g=this.parseTextData(g,c,o,!0,l,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),w.add(this.options.textNodeName,g),this.addChild(r,w,o)}else{if(d.length>0&&d.lastIndexOf("/")===d.length-1){c[c.length-1]==="/"?(c=c.substr(0,c.length-1),d=c):d=d.substr(0,d.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));let g=new En(c);c!==d&&l&&(g[":@"]=this.buildAttributesMap(d,o,c)),this.addChild(r,g,o),o=o.substr(0,o.lastIndexOf("."))}else{let g=new En(c);this.tagsNodeStack.push(r),c!==d&&l&&(g[":@"]=this.buildAttributesMap(d,o,c)),this.addChild(r,g,o),r=g}n="",s=u}}else n+=e[s];return t.child};function rw(e,t,r){let n=this.options.updateTag(t.tagname,r,t[":@"]);n===!1||(typeof n=="string"&&(t.tagname=n),e.addChild(t))}var nw=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){let r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function ow(e,t,r,n){return e&&(n===void 0&&(n=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function sw(e,t,r){let n="*."+r;for(let o in e){let s=e[o];if(n===s||t===s)return!0}return!1}function iw(e,t,r=">"){let n,o="";for(let s=t;s<e.length;s++){let i=e[s];if(n)i===n&&(n="");else if(i==='"'||i==="'")n=i;else if(i===r[0])if(r[1]){if(e[s+1]===r[1])return{data:o,index:s}}else return{data:o,index:s};else i==="	"&&(i=" ");o+=i}}function _r(e,t,r,n){let o=e.indexOf(t,r);if(o===-1)throw new Error(n);return o+t.length-1}function ea(e,t,r,n=">"){let o=iw(e,t+1,n);if(!o)return;let s=o.data,i=o.index,a=s.search(/\s/),c=s,d=!0;if(a!==-1&&(c=s.substr(0,a).replace(/\s\s*$/,""),s=s.substr(a+1)),r){let l=c.indexOf(":");l!==-1&&(c=c.substr(l+1),d=c!==o.data.substr(l+1))}return{tagName:c,tagExp:s,closeIndex:i,attrExpPresent:d}}function aw(e,t,r){let n=r,o=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){let s=_r(e,">",r,`${t} is not closed`);if(e.substring(r+2,s).trim()===t&&(o--,o===0))return{tagContent:e.substring(n,r),i:s};r=s}else if(e[r+1]==="?")r=_r(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=_r(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=_r(e,"]]>",r,"StopNode is not closed.")-2;else{let s=ea(e,r,">");s&&((s&&s.tagName)===t&&s.tagExp[s.tagExp.length-1]!=="/"&&o++,r=s.closeIndex)}}function ta(e,t,r){if(t&&typeof e=="string"){let n=e.trim();return n==="true"?!0:n==="false"?!1:YE(e,r)}else return ra.isExist(e)?e:""}Bf.exports=Zi});var zf=B(Lf=>{"use strict";function cw(e,t){return Ff(e,t)}function Ff(e,t,r){let n,o={};for(let s=0;s<e.length;s++){let i=e[s],a=dw(i),c="";if(r===void 0?c=a:c=r+"."+a,a===t.textNodeName)n===void 0?n=i[a]:n+=""+i[a];else{if(a===void 0)continue;if(i[a]){let d=Ff(i[a],t,c),l=fw(d,t);i[":@"]?lw(d,i[":@"],c,t):Object.keys(d).length===1&&d[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?d=d[t.textNodeName]:Object.keys(d).length===0&&(t.alwaysCreateTextNode?d[t.textNodeName]="":d=""),o[a]!==void 0&&o.hasOwnProperty(a)?(Array.isArray(o[a])||(o[a]=[o[a]]),o[a].push(d)):t.isArray(a,c,l)?o[a]=[d]:o[a]=d}}}return typeof n=="string"?n.length>0&&(o[t.textNodeName]=n):n!==void 0&&(o[t.textNodeName]=n),o}function dw(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function lw(e,t,r,n){if(t){let o=Object.keys(t),s=o.length;for(let i=0;i<s;i++){let a=o[i];n.isArray(a,r+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function fw(e,t){let{textNodeName:r}=t,n=Object.keys(e).length;return!!(n===0||n===1&&(e[r]||typeof e[r]=="boolean"||e[r]===0))}Lf.prettify=cw});var Uf=B((pM,$f)=>{"use strict";var{buildOptions:mw}=Nf(),uw=Mf(),{prettify:hw}=zf(),pw=Qi(),na=class{constructor(t){this.externalEntities={},this.options=mw(t)}parse(t,r){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let s=pw.validate(t,r);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}let n=new uw(this.options);n.addExternalEntities(this.externalEntities);let o=n.parseXml(t);return this.options.preserveOrder||o===void 0?o:hw(o,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}};$f.exports=na});var Hf=B((yM,Gf)=>{"use strict";var yw=`
`;function gw(e,t){let r="";return t.format&&t.indentBy.length>0&&(r=yw),qf(e,t,"",r)}function qf(e,t,r,n){let o="",s=!1;for(let i=0;i<e.length;i++){let a=e[i],c=Cw(a),d="";if(r.length===0?d=c:d=`${r}.${c}`,c===t.textNodeName){let w=a[c];xw(d,t)||(w=t.tagValueProcessor(c,w),w=Kf(w,t)),s&&(o+=n),o+=w,s=!1;continue}else if(c===t.cdataPropName){s&&(o+=n),o+=`<![CDATA[${a[c][0][t.textNodeName]}]]>`,s=!1;continue}else if(c===t.commentPropName){o+=n+`<!--${a[c][0][t.textNodeName]}-->`,s=!0;continue}else if(c[0]==="?"){let w=jf(a[":@"],t),b=c==="?xml"?"":n,E=a[c][0][t.textNodeName];E=E.length!==0?" "+E:"",o+=b+`<${c}${E}${w}?>`,s=!0;continue}let l=n;l!==""&&(l+=t.indentBy);let u=jf(a[":@"],t),h=n+`<${c}${u}`,g=qf(a[c],t,d,l);t.unpairedTags.indexOf(c)!==-1?t.suppressUnpairedNode?o+=h+">":o+=h+"/>":(!g||g.length===0)&&t.suppressEmptyNode?o+=h+"/>":g&&g.endsWith(">")?o+=h+`>${g}${n}</${c}>`:(o+=h+">",g&&n!==""&&(g.includes("/>")||g.includes("</"))?o+=n+t.indentBy+g+n:o+=g,o+=`</${c}>`),s=!0}return o}function Cw(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function jf(e,t){let r="";if(e&&!t.ignoreAttributes)for(let n in e){let o=t.attributeValueProcessor(n,e[n]);o=Kf(o,t),o===!0&&t.suppressBooleanAttributes?r+=` ${n.substr(t.attributeNamePrefix.length)}`:r+=` ${n.substr(t.attributeNamePrefix.length)}="${o}"`}return r}function xw(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let r=e.substr(e.lastIndexOf(".")+1);for(let n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+r)return!0;return!1}function Kf(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){let n=t.entities[r];e=e.replace(n.regex,n.val)}return e}Gf.exports=gw});var Wf=B((gM,Vf)=>{"use strict";var Ew=Hf(),ww={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function ar(e){this.options=Object.assign({},ww,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Aw),this.processTextOrObjNode=bw,this.options.format?(this.indentate=Sw,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}ar.prototype.build=function(e){return this.options.preserveOrder?Ew(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};ar.prototype.j2x=function(e,t){let r="",n="";for(let o in e)if(!(typeof e[o]>"u"))if(e[o]===null)o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)n+=this.buildTextValNode(e[o],o,"",t);else if(typeof e[o]!="object"){let s=this.isAttribute(o);if(s)r+=this.buildAttrPairStr(s,""+e[o]);else if(o===this.options.textNodeName){let i=this.options.tagValueProcessor(o,""+e[o]);n+=this.replaceEntitiesValue(i)}else n+=this.buildTextValNode(e[o],o,"",t)}else if(Array.isArray(e[o])){let s=e[o].length,i="";for(let a=0;a<s;a++){let c=e[o][a];typeof c>"u"||(c===null?o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar:typeof c=="object"?this.options.oneListGroup?i+=this.j2x(c,t+1).val:i+=this.processTextOrObjNode(c,o,t):i+=this.buildTextValNode(c,o,"",t))}this.options.oneListGroup&&(i=this.buildObjectNode(i,o,"",t)),n+=i}else if(this.options.attributesGroupName&&o===this.options.attributesGroupName){let s=Object.keys(e[o]),i=s.length;for(let a=0;a<i;a++)r+=this.buildAttrPairStr(s[a],""+e[o][s[a]])}else n+=this.processTextOrObjNode(e[o],o,t);return{attrStr:r,val:n}};ar.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function bw(e,t,r){let n=this.j2x(e,r+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}ar.prototype.buildObjectNode=function(e,t,r,n){if(e==="")return t[0]==="?"?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let o="</"+t+this.tagEndChar,s="";return t[0]==="?"&&(s="?",o=""),r&&e.indexOf("<")===-1?this.indentate(n)+"<"+t+r+s+">"+e+o:this.options.commentPropName!==!1&&t===this.options.commentPropName&&s.length===0?this.indentate(n)+`<!--${e}-->`+this.newLine:this.indentate(n)+"<"+t+r+s+this.tagEndChar+e+this.indentate(n)+o}};ar.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};ar.prototype.buildTextValNode=function(e,t,r,n){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(n)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(n)+"<"+t+r+"?"+this.tagEndChar;{let o=this.options.tagValueProcessor(t,e);return o=this.replaceEntitiesValue(o),o===""?this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(n)+"<"+t+r+">"+o+"</"+t+this.tagEndChar}};ar.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e};function Sw(e){return this.options.indentBy.repeat(e)}function Aw(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}Vf.exports=ar});var oa=B((CM,Yf)=>{"use strict";var _w=Qi(),kw=Uf(),Rw=Wf();Yf.exports={XMLParser:kw,XMLValidator:_w,XMLBuilder:Rw}});var Iy=B(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.AwsCrc32c=void 0;var Ty=(fn(),en(ln)),cc=mn(),Py=dc(),g0=function(){function e(){this.crc32c=new Py.Crc32c}return e.prototype.update=function(t){(0,cc.isEmptyData)(t)||this.crc32c.update((0,cc.convertToBuffer)(t))},e.prototype.digest=function(){return Ty.__awaiter(this,void 0,void 0,function(){return Ty.__generator(this,function(t){return[2,(0,cc.numToUint8)(this.crc32c.digest())]})})},e.prototype.reset=function(){this.crc32c=new Py.Crc32c},e}();Fs.AwsCrc32c=g0});var dc=B(Cr=>{"use strict";Object.defineProperty(Cr,"__esModule",{value:!0});Cr.AwsCrc32c=Cr.Crc32c=Cr.crc32c=void 0;var C0=(fn(),en(ln)),x0=mn();function E0(e){return new vy().update(e).digest()}Cr.crc32c=E0;var vy=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=C0.__values(t),s=o.next();!s.done;s=o.next()){var i=s.value;this.checksum=this.checksum>>>8^b0[(this.checksum^i)&255]}}catch(a){r={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}();Cr.Crc32c=vy;var w0=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],b0=(0,x0.uint32ArrayFrom)(w0),S0=Iy();Object.defineProperty(Cr,"AwsCrc32c",{enumerable:!0,get:function(){return S0.AwsCrc32c}})});(function(){yc().config(Object.assign({},Cc(),Ec()(process.argv)))})();var zc=require("os"),$c=It(Lc()),Uc=require("path"),jc=async()=>{let e=`${new Date().toISOString()}.jpeg`,t=(0,Uc.resolve)(__dirname,"../images",e),r=await(0,$c.capture)({location:t,type:(0,zc.platform)(),returnType:"buffer",options:{width:1920,height:1080,output:"jpeg",saveShots:!1}});return{filename:e,location:t,result:r}};var si;(function(e){e.HEADER="header",e.QUERY="query"})(si||(si={}));var xr;(function(e){e.HTTP="http",e.HTTPS="https"})(xr||(xr={}));var Pr;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(Pr||(Pr={}));var Xn;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(Xn||(Xn={}));var ii;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(ii||(ii={}));var $=class e{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let t=new e({...this,headers:{...this.headers}});return t.query&&(t.query=Hg(t.query)),t}};function Hg(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}var cn=class{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function Vg(e){return t=>async r=>{let{request:n}=r;return $.isInstance(n)&&n.body&&e.runtime==="node"&&(n.headers={...n.headers,Expect:"100-continue"}),t({...r,request:n})}}var Wg={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},qc=e=>({applyToStack:t=>{t.add(Vg(e),Wg)}});var Yg=e=>t=>async r=>{if(!$.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:o=""}=e.requestHandler.metadata||{};if(o.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]="";else if(!n.headers.host){let s=n.hostname;n.port!=null&&(s+=`:${n.port}`),n.headers.host=s}return t(r)},Qg={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},Ft=e=>({applyToStack:t=>{t.add(Yg(e),Qg)}});var Xg=()=>(e,t)=>async r=>{try{let n=await e(r),{clientName:o,commandName:s,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c,overrideOutputFilterSensitiveLog:d}=a,l=c??t.inputFilterSensitiveLog,u=d??t.outputFilterSensitiveLog,{$metadata:h,...g}=n.output;return i?.info?.({clientName:o,commandName:s,input:l(r.input),output:u(g),metadata:h}),n}catch(n){let{clientName:o,commandName:s,logger:i,dynamoDbDocumentClientOptions:a={}}=t,{overrideInputFilterSensitiveLog:c}=a,d=c??t.inputFilterSensitiveLog;throw i?.error?.({clientName:o,commandName:s,input:d(r.input),error:n,metadata:n.$metadata}),n}},Jg={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},Lt=e=>({applyToStack:t=>{t.add(Xg(),Jg)}});var Kc="X-Amzn-Trace-Id",Zg="AWS_LAMBDA_FUNCTION_NAME",eC="_X_AMZN_TRACE_ID",tC=e=>t=>async r=>{let{request:n}=r;if(!$.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(Kc))return t(r);let o=process.env[Zg],s=process.env[eC],i=a=>typeof a=="string"&&a.length>0;return i(o)&&i(s)&&(n.headers[Kc]=s),t({...r,request:n})},rC={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},zt=e=>({applyToStack:t=>{t.add(tC(e),rC)}});var nC="content-length";function oC(){return(e,t)=>async r=>{let{request:n}=r;if($.isInstance(n)&&!n.headers[nC]){let o="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof t?.logger?.warn=="function"?t.logger.warn(o):console.warn(o)}return e({...r})}}var sC={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},Gc=e=>({applyToStack:t=>{t.add(oC(),sC)}});var Hc=e=>({...e,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1});var ai=e=>typeof e=="string"&&e.indexOf("arn:")===0&&e.split(":").length>=6;function iC(){return e=>async t=>{let{input:{Bucket:r}}=t;if(typeof r=="string"&&!ai(r)&&r.indexOf("/")>=0){let n=new Error(`Bucket name shouldn't contain '/', received '${r}'`);throw n.name="InvalidBucketName",n}return e({...t})}}var aC={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},Vc=e=>({applyToStack:t=>{t.add(iC(),aC)}});var Ie=class e extends Error{constructor(t,r=!0){super(t),this.tryNextLink=r,this.name="ProviderError",Object.setPrototypeOf(this,e.prototype)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}};var N=class e extends Ie{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="CredentialsProviderError",Object.setPrototypeOf(this,e.prototype)}};var ve=class e extends Ie{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="TokenProviderError",Object.setPrototypeOf(this,e.prototype)}};var Jn=(...e)=>async()=>{if(e.length===0)throw new Ie("No providers in chain");let t;for(let r of e)try{return await r()}catch(n){if(t=n,n?.tryNextLink)continue;throw n}throw t};var Wc=e=>()=>Promise.resolve(e);var $t=(e,t,r)=>{let n,o,s,i=!1,a=async()=>{o||(o=e());try{n=await o,s=!0,i=!1}finally{o=void 0}return n};return t===void 0?async c=>((!s||c?.forceRefresh)&&(n=await a()),n):async c=>((!s||c?.forceRefresh)&&(n=await a()),i?n:r&&!r(n)?(i=!0,n):(t(n)&&await a(),n))};var Ed=It(un());var md={},mi={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),md[e]=t,mi[t]=e}function ud(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in mi)t[r/2]=mi[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function ce(e){let t="";for(let r=0;r<e.byteLength;r++)t+=md[e[r]];return t}var Ir=class e{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&hd(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&hd(t),parseInt(ce(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function hd(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var vr=class{constructor(t,r){this.toUtf8=t,this.fromUtf8=r}format(t){let r=[];for(let s of Object.keys(t)){let i=this.fromUtf8(s);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[s]))}let n=new Uint8Array(r.reduce((s,i)=>s+i.byteLength,0)),o=0;for(let s of r)n.set(s,o),o+=s.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let s=new DataView(new ArrayBuffer(3+t.value.byteLength));s.setUint8(0,6),s.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(s.buffer);return i.set(t.value,3),i;case"string":let a=this.fromUtf8(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let d=new Uint8Array(c.buffer);return d.set(a,3),d;case"timestamp":let l=new Uint8Array(9);return l[0]=8,l.set(Ir.fromNumber(t.value.valueOf()).bytes,1),l;case"uuid":if(!ex.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let u=new Uint8Array(17);return u[0]=9,u.set(ud(t.value.replace(/\-/g,"")),1),u}}parse(t){let r={},n=0;for(;n<t.byteLength;){let o=t.getUint8(n++),s=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,o));switch(n+=o,t.getUint8(n++)){case 0:r[s]={type:yd,value:!0};break;case 1:r[s]={type:yd,value:!1};break;case 2:r[s]={type:HC,value:t.getInt8(n++)};break;case 3:r[s]={type:VC,value:t.getInt16(n,!1)},n+=2;break;case 4:r[s]={type:WC,value:t.getInt32(n,!1)},n+=4;break;case 5:r[s]={type:YC,value:new Ir(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:let i=t.getUint16(n,!1);n+=2,r[s]={type:QC,value:new Uint8Array(t.buffer,t.byteOffset+n,i)},n+=i;break;case 7:let a=t.getUint16(n,!1);n+=2,r[s]={type:XC,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,a))},n+=a;break;case 8:r[s]={type:JC,value:new Date(new Ir(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:let c=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[s]={type:ZC,value:`${ce(c.subarray(0,4))}-${ce(c.subarray(4,6))}-${ce(c.subarray(6,8))}-${ce(c.subarray(8,10))}-${ce(c.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}},pd;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(pd||(pd={}));var yd="boolean",HC="byte",VC="short",WC="integer",YC="long",QC="binary",XC="string",JC="timestamp",ZC="uuid",ex=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var gd=It(un()),Cd=4,jt=Cd*2,Er=4,tx=jt+Er*2;function xd({byteLength:e,byteOffset:t,buffer:r}){if(e<tx)throw new Error("Provided message too short to accommodate event stream message overhead");let n=new DataView(r,t,e),o=n.getUint32(0,!1);if(e!==o)throw new Error("Reported message length does not match received message length");let s=n.getUint32(Cd,!1),i=n.getUint32(jt,!1),a=n.getUint32(e-Er,!1),c=new gd.Crc32().update(new Uint8Array(r,t,jt));if(i!==c.digest())throw new Error(`The prelude checksum specified in the message (${i}) does not match the calculated CRC32 checksum (${c.digest()})`);if(c.update(new Uint8Array(r,t+jt,e-(jt+Er))),a!==c.digest())throw new Error(`The message checksum (${c.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,t+jt+Er,s),body:new Uint8Array(r,t+jt+Er+s,o-s-(jt+Er+Er))}}var oo=class{constructor(t,r){this.headerMarshaller=new vr(t,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(t){this.messageBuffer.push(this.decode(t))}endOfStream(){this.isEndOfStream=!0}getMessage(){let t=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return t},isEndOfStream(){return r}}}getAvailableMessages(){let t=this.messageBuffer;this.messageBuffer=[];let r=this.isEndOfStream;return{getMessages(){return t},isEndOfStream(){return r}}}encode({headers:t,body:r}){let n=this.headerMarshaller.format(t),o=n.byteLength+r.byteLength+16,s=new Uint8Array(o),i=new DataView(s.buffer,s.byteOffset,s.byteLength),a=new Ed.Crc32;return i.setUint32(0,o,!1),i.setUint32(4,n.byteLength,!1),i.setUint32(8,a.update(s.subarray(0,8)).digest(),!1),s.set(n,12),s.set(r,n.byteLength+12),i.setUint32(o-4,a.update(s.subarray(8,o-4)).digest(),!1),s}decode(t){let{headers:r,body:n}=xd(t);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(t){return this.headerMarshaller.format(t)}};var so=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.decoder.decode(t)}};var io=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream)yield this.options.encoder.encode(t);this.options.includeEndFrame&&(yield new Uint8Array(0))}};var ao=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream){let r=await this.options.deserializer(t);r!==void 0&&(yield r)}}};var co=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.serializer(t)}};var de=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};var Or=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";var lo=require("buffer"),ut=(e,t=0,r=e.byteLength-t)=>{if(!Or(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return lo.Buffer.from(e,t,r)},Dr=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?lo.Buffer.from(e,t):lo.Buffer.from(e)};var we=e=>{let t=Dr(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)};var be=e=>typeof e=="string"?we(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e);var Oe=e=>ut(e.buffer,e.byteOffset,e.byteLength).toString("utf8");var wd="X-Amz-Algorithm",bd="X-Amz-Credential",ui="X-Amz-Date",Sd="X-Amz-SignedHeaders",Ad="X-Amz-Expires",hi="X-Amz-Signature",pi="X-Amz-Security-Token";var yi="authorization",gi=ui.toLowerCase(),rx="date",_d=[yi,gi,rx],kd=hi.toLowerCase(),hn="x-amz-content-sha256",Rd=pi.toLowerCase();var Nd={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Td=/^proxy-/,Pd=/^sec-/;var fo="AWS4-HMAC-SHA256";var Id="AWS4-HMAC-SHA256-PAYLOAD",vd="UNSIGNED-PAYLOAD",Od=50,Ci="aws4_request",Dd=60*60*24*7;var mo={},xi=[],uo=(e,t,r)=>`${e}/${t}/${r}/${Ci}`,Md=async(e,t,r,n,o)=>{let s=await Bd(e,t.secretAccessKey,t.accessKeyId),i=`${r}:${n}:${o}:${ce(s)}:${t.sessionToken}`;if(i in mo)return mo[i];for(xi.push(i);xi.length>Od;)delete mo[xi.shift()];let a=`AWS4${t.secretAccessKey}`;for(let c of[r,n,o,Ci])a=await Bd(e,a,c);return mo[i]=a};var Bd=(e,t,r)=>{let n=new e(t);return n.update(be(r)),n.digest()};var ho=({headers:e},t,r)=>{let n={};for(let o of Object.keys(e).sort()){if(e[o]==null)continue;let s=o.toLowerCase();(s in Nd||t?.has(s)||Td.test(s)||Pd.test(s))&&(!r||r&&!r.has(s))||(n[s]=e[o].trim().replace(/\s+/g," "))}return n};var Ye=e=>encodeURIComponent(e).replace(/[!'()*]/g,nx),nx=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;var Ei=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e).sort()){if(n.toLowerCase()===kd)continue;t.push(n);let o=e[n];typeof o=="string"?r[n]=`${Ye(n)}=${Ye(o)}`:Array.isArray(o)&&(r[n]=o.slice(0).reduce((s,i)=>s.concat([`${Ye(n)}=${Ye(i)}`]),[]).sort().join("&"))}return t.map(n=>r[n]).filter(n=>n).join("&")};var pn=async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===hn)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||Or(t)){let n=new r;return n.update(be(t)),ce(await n.digest())}return vd};var Fd=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1};var po=({headers:e,query:t,...r})=>({...r,headers:{...e},query:t?ox(t):void 0}),ox=e=>Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{});var wi=(e,t={})=>{let{headers:r,query:n={}}=typeof e.clone=="function"?e.clone():po(e);for(let o of Object.keys(r)){let s=o.toLowerCase();s.slice(0,6)==="x-amz-"&&!t.unhoistableHeaders?.has(s)&&(n[o]=r[o],delete r[o])}return{...e,headers:r,query:n}};var yo=e=>{e=typeof e.clone=="function"?e.clone():po(e);for(let t of Object.keys(e.headers))_d.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e};var Ld=e=>sx(e).toISOString().replace(/\.\d{3}Z$/,"Z"),sx=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;var wr=class{constructor({applyChecksum:t,credentials:r,region:n,service:o,sha256:s,uriEscapePath:i=!0}){this.headerMarshaller=new vr(Oe,we),this.service=o,this.sha256=s,this.uriEscapePath=i,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=de(n),this.credentialProvider=de(r)}async presign(t,r={}){let{signingDate:n=new Date,expiresIn:o=3600,unsignableHeaders:s,unhoistableHeaders:i,signableHeaders:a,signingRegion:c,signingService:d}=r,l=await this.credentialProvider();this.validateResolvedCredentials(l);let u=c??await this.regionProvider(),{longDate:h,shortDate:g}=go(n);if(o>Dd)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let w=uo(g,u,d??this.service),b=wi(yo(t),{unhoistableHeaders:i});l.sessionToken&&(b.query[pi]=l.sessionToken),b.query[wd]=fo,b.query[bd]=`${l.accessKeyId}/${w}`,b.query[ui]=h,b.query[Ad]=o.toString(10);let E=ho(b,s,a);return b.query[Sd]=zd(E),b.query[hi]=await this.getSignature(h,w,this.getSigningKey(l,u,g,d),this.createCanonicalRequest(b,E,await pn(t,this.sha256))),b}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:o,signingRegion:s,signingService:i}){let a=s??await this.regionProvider(),{shortDate:c,longDate:d}=go(n),l=uo(c,a,i??this.service),u=await pn({headers:{},body:r},this.sha256),h=new this.sha256;h.update(t);let g=ce(await h.digest()),w=[Id,d,l,o,g,u].join(`
`);return this.signString(w,{signingDate:n,signingRegion:a,signingService:i})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:o}){return this.signEvent({headers:this.headerMarshaller.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:o,priorSignature:t.priorSignature}).then(i=>({message:t.message,signature:i}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:o}={}){let s=await this.credentialProvider();this.validateResolvedCredentials(s);let i=n??await this.regionProvider(),{shortDate:a}=go(r),c=new this.sha256(await this.getSigningKey(s,i,a,o));return c.update(be(t)),ce(await c.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:o,signingRegion:s,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let c=s??await this.regionProvider(),d=yo(t),{longDate:l,shortDate:u}=go(r),h=uo(u,c,i??this.service);d.headers[gi]=l,a.sessionToken&&(d.headers[Rd]=a.sessionToken);let g=await pn(d,this.sha256);!Fd(hn,d.headers)&&this.applyChecksum&&(d.headers[hn]=g);let w=ho(d,o,n),b=await this.getSignature(l,h,this.getSigningKey(a,c,u,i),this.createCanonicalRequest(d,w,g));return d.headers[yi]=`${fo} Credential=${a.accessKeyId}/${h}, SignedHeaders=${zd(w)}, Signature=${b}`,d}createCanonicalRequest(t,r,n){let o=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${Ei(t)}
${o.map(s=>`${s}:${r[s]}`).join(`
`)}

${o.join(";")}
${n}`}async createStringToSign(t,r,n){let o=new this.sha256;o.update(be(n));let s=await o.digest();return`${fo}
${t}
${r}
${ce(s)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let s of t.split("/"))s?.length!==0&&s!=="."&&(s===".."?r.pop():r.push(s));let n=`${t?.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t?.endsWith("/")?"/":""}`;return encodeURIComponent(n).replace(/%2F/g,"/")}return t}async getSignature(t,r,n,o){let s=await this.createStringToSign(t,r,o),i=new this.sha256(await n);return i.update(be(s)),ce(await i.digest())}getSigningKey(t,r,n,o){return Md(this.sha256,t,n,r,o||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}},go=e=>{let t=Ld(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},zd=e=>Object.keys(e).sort().join(";");var ix=3e5,Co=e=>{let t=e.credentials?ax(e.credentials):e.credentialDefaultProvider(e),{signingEscapePath:r=!0,systemClockOffset:n=e.systemClockOffset||0,sha256:o}=e,s;return e.signer?s=de(e.signer):e.regionInfoProvider?s=()=>de(e.region)().then(async i=>[await e.regionInfoProvider(i,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},i]).then(([i,a])=>{let{signingRegion:c,signingService:d}=i;e.signingRegion=e.signingRegion||c||a,e.signingName=e.signingName||d||e.serviceId;let l={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:r},u=e.signerConstructor||wr;return new u(l)}):s=async i=>{i=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await de(e.region)(),properties:{}},i);let a=i.signingRegion,c=i.signingName;e.signingRegion=e.signingRegion||a,e.signingName=e.signingName||c||e.serviceId;let d={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:r},l=e.signerConstructor||wr;return new l(d)},{...e,systemClockOffset:n,signingEscapePath:r,credentials:t,signer:s}};var ax=e=>typeof e=="function"?$t(e,t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<ix,t=>t.expiration!==void 0):de(e);var xo=e=>new Date(Date.now()+e);var $d=(e,t)=>Math.abs(xo(t).getTime()-e)>=3e5;var bi=(e,t)=>{let r=Date.parse(e);return $d(r,t)?r-Date.now():t};var cx=e=>(t,r)=>async function(n){if(!$.isInstance(n.request))return t(n);let o=r.endpointV2?.properties?.authSchemes?.[0],s=o?.name==="sigv4a"?o?.signingRegionSet?.join(","):void 0,i=await e.signer(o),a=await t({...n,request:await i.sign(n.request,{signingDate:xo(e.systemClockOffset),signingRegion:s||r.signing_region,signingService:r.signing_service})}).catch(d=>{let l=d.ServerTime??Ud(d.$response);throw l&&(e.systemClockOffset=bi(l,e.systemClockOffset)),d}),c=Ud(a.response);return c&&(e.systemClockOffset=bi(c,e.systemClockOffset)),a},Ud=e=>cn.isInstance(e)?e.headers?.date??e.headers?.Date:void 0,dx={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},Eo=e=>({applyToStack:t=>{t.addRelativeTo(cx(e),dx)}});function qt(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}var Si={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],version:"1.1"};var jd=Si,qd="",fx=e=>{let{partitions:t}=jd;for(let n of t){let{regions:o,outputs:s}=n;for(let[i,a]of Object.entries(o))if(i===e)return{...s,...a}}for(let n of t){let{regionRegex:o,outputs:s}=n;if(new RegExp(o).test(e))return{...s}}let r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},Kd=(e,t="")=>{jd=e,qd=t},mx=()=>{Kd(Si,"")},Ai=()=>qd;var ux=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),wo=e=>ux.test(e)||e.startsWith("[")&&e.endsWith("]");var ht="endpoints";function De(e){return typeof e!="object"||e==null?e:"ref"in e?`$${De(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(De).join(", ")})`:JSON.stringify(e,null,2)}var K=class extends Error{constructor(t){super(t),this.name="EndpointError"}};var Ni={};Gn(Ni,{aws:()=>_i,booleanEquals:()=>yx,getAttr:()=>ki,isSet:()=>gx,isValidHostLabel:()=>bo,not:()=>Cx,parseURL:()=>xx,stringEquals:()=>Ex,substring:()=>wx,uriEncode:()=>bx});var _i={};Gn(_i,{getUserAgentPrefix:()=>Ai,isVirtualHostableS3Bucket:()=>Gd,parseArn:()=>px,partition:()=>fx,setPartitionInfo:()=>Kd,useDefaultPartitionInfo:()=>mx});var hx=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),bo=(e,t=!1)=>{if(!t)return hx.test(e);let r=e.split(".");for(let n of r)if(!bo(n))return!1;return!0};var Gd=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!Gd(r))return!1;return!0}return!(!bo(e)||e.length<3||e.length>63||e!==e.toLowerCase()||wo(e))};var px=e=>{let t=e.split(":");if(t.length<6)return null;let[r,n,o,s,i,...a]=t;return r!=="arn"||n===""||o===""||a[0]===""?null:{partition:n,service:o,region:s,accountId:i,resourceId:a[0].includes("/")?a[0].split("/"):a}};var yx=(e,t)=>e===t;var Hd=e=>{let t=e.split("."),r=[];for(let n of t){let o=n.indexOf("[");if(o!==-1){if(n.indexOf("]")!==n.length-1)throw new K(`Path: '${e}' does not end with ']'`);let s=n.slice(o+1,-1);if(Number.isNaN(parseInt(s)))throw new K(`Invalid array index: '${s}' in path: '${e}'`);o!==0&&r.push(n.slice(0,o)),r.push(s)}else r.push(n)}return r};var ki=(e,t)=>Hd(t).reduce((r,n)=>{if(typeof r!="object")throw new K(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e);var gx=e=>e!=null;var Cx=e=>!e;var Vd;(function(e){e.AAAA="AAAA",e.A="A"})(Vd||(Vd={}));var Ri={[xr.HTTP]:80,[xr.HTTPS]:443},xx=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:h,port:g,protocol:w="",path:b="",query:E={}}=e,he=new URL(`${w}//${h}${g?`:${g}`:""}${b}`);return he.search=Object.entries(E).map(([Zr,Us])=>`${Zr}=${Us}`).join("&"),he}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:o,pathname:s,protocol:i,search:a}=t;if(a)return null;let c=i.slice(0,-1);if(!Object.values(xr).includes(c))return null;let d=wo(o),l=r.includes(`${n}:${Ri[c]}`)||typeof e=="string"&&e.includes(`${n}:${Ri[c]}`),u=`${n}${l?`:${Ri[c]}`:""}`;return{scheme:c,authority:u,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:d}};var Ex=(e,t)=>e===t;var wx=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r);var bx=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`);var So=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},o=0;for(;o<e.length;){let s=e.indexOf("{",o);if(s===-1){r.push(e.slice(o));break}r.push(e.slice(o,s));let i=e.indexOf("}",s);if(i===-1){r.push(e.slice(s));break}e[s+1]==="{"&&e[i+1]==="}"&&(r.push(e.slice(s+1,i)),o=i+2);let a=e.substring(s+1,i);if(a.includes("#")){let[c,d]=a.split("#");r.push(ki(n[c],d))}else r.push(n[a]);o=i+1}return r.join("")};var Wd=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e];var Kt=(e,t,r)=>{if(typeof e=="string")return So(e,r);if(e.fn)return Ao(e,r);if(e.ref)return Wd(e,r);throw new K(`'${t}': ${String(e)} is not a string, function or reference.`)};var Ao=({fn:e,argv:t},r)=>{let n=t.map(o=>["boolean","number"].includes(typeof o)?o:Kt(o,"arg",r));return e.split(".").reduce((o,s)=>o[s],Ni)(...n)};var Yd=({assign:e,...t},r)=>{if(e&&e in r.referenceRecord)throw new K(`'${e}' is already defined in Reference Record.`);let n=Ao(t,r);return r.logger?.debug?.(ht,`evaluateCondition: ${De(t)} = ${De(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}};var Br=(e=[],t)=>{let r={};for(let n of e){let{result:o,toAssign:s}=Yd(n,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!o)return{result:o};s&&(r[s.name]=s.value,t.logger?.debug?.(ht,`assign: ${s.name} := ${De(s.value)}`))}return{result:!0,referenceRecord:r}};var Qd=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:o.map(s=>{let i=Kt(s,"Header value entry",t);if(typeof i!="string")throw new K(`Header '${n}' value '${i}' is not a string`);return i})}),{});var Ti=(e,t)=>{if(Array.isArray(e))return e.map(r=>Ti(r,t));switch(typeof e){case"string":return So(e,t);case"object":if(e===null)throw new K(`Unexpected endpoint property: ${e}`);return _o(e,t);case"boolean":return e;default:throw new K(`Unexpected endpoint property type: ${typeof e}`)}};var _o=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:Ti(o,t)}),{});var Xd=(e,t)=>{let r=Kt(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new K(`Endpoint URL must be a string, got ${typeof r}`)};var Jd=(e,t)=>{let{conditions:r,endpoint:n}=e,{result:o,referenceRecord:s}=Br(r,t);if(!o)return;let i={...t,referenceRecord:{...t.referenceRecord,...s}},{url:a,properties:c,headers:d}=n;return t.logger?.debug?.(ht,`Resolving endpoint from template: ${De(n)}`),{...d!=null&&{headers:Qd(d,i)},...c!=null&&{properties:_o(c,i)},url:Xd(a,i)}};var Zd=(e,t)=>{let{conditions:r,error:n}=e,{result:o,referenceRecord:s}=Br(r,t);if(o)throw new K(Kt(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))};var el=(e,t)=>{let{conditions:r,rules:n}=e,{result:o,referenceRecord:s}=Br(r,t);if(o)return ko(n,{...t,referenceRecord:{...t.referenceRecord,...s}})};var ko=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=Jd(r,t);if(n)return n}else if(r.type==="error")Zd(r,t);else if(r.type==="tree"){let n=el(r,t);if(n)return n}else throw new K(`Unknown endpoint rule: ${r}`);throw new K("Rules evaluation failed")};var Gt=(e,t)=>{let{endpointParams:r,logger:n}=t,{parameters:o,rules:s}=e;t.logger?.debug?.(`${ht} Initial EndpointParams: ${De(r)}`);let i=Object.entries(o).filter(([,d])=>d.default!=null).map(([d,l])=>[d,l.default]);if(i.length>0)for(let[d,l]of i)r[d]=r[d]??l;let a=Object.entries(o).filter(([,d])=>d.required).map(([d])=>d);for(let d of a)if(r[d]==null)throw new K(`Missing required parameter: '${d}'`);let c=ko(s,{endpointParams:r,logger:n,referenceRecord:{}});if(t.endpointParams?.Endpoint)try{let d=new URL(t.endpointParams.Endpoint),{protocol:l,port:u}=d;c.url.protocol=l,c.url.port=u}catch{}return t.logger?.debug?.(`${ht} Resolved endpoint: ${De(c)}`),c};var Pi="user-agent",Ro="x-amz-user-agent",Ii=" ",No="/",tl=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,rl=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,vi="-";var Sx=e=>(t,r)=>async n=>{let{request:o}=n;if(!$.isInstance(o))return t(n);let{headers:s}=o,i=r?.userAgent?.map(Oi)||[],a=(await e.defaultUserAgentProvider()).map(Oi),c=e?.customUserAgent?.map(Oi)||[],d=Ai(),l=(d?[d]:[]).concat([...a,...i,...c]).join(Ii),u=[...a.filter(h=>h.startsWith("aws-sdk-")),...c].join(Ii);return e.runtime!=="browser"?(u&&(s[Ro]=s[Ro]?`${s[Pi]} ${u}`:u),s[Pi]=l):s[Ro]=l,t({...n,request:o})},Oi=e=>{let t=e[0].split(No).map(i=>i.replace(tl,vi)).join(No),r=e[1]?.replace(rl,vi),n=t.indexOf(No),o=t.substring(0,n),s=t.substring(n+1);return o==="api"&&(s=s.toLowerCase()),[o,s,r].filter(i=>i&&i.length>0).reduce((i,a,c)=>{switch(c){case 0:return a;case 1:return`${i}/${a}`;default:return`${i}#${a}`}},"")},Ax={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Ht=e=>({applyToStack:t=>{t.add(Sx(e),Ax)}});var Be;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(Be||(Be={}));var Qe=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}};var _x="AWS_USE_DUALSTACK_ENDPOINT",kx="use_dualstack_endpoint";var Vt={environmentVariableSelector:e=>Qe(e,_x,Be.ENV),configFileSelector:e=>Qe(e,kx,Be.CONFIG),default:!1};var Rx="AWS_USE_FIPS_ENDPOINT",Nx="use_fips_endpoint";var Wt={environmentVariableSelector:e=>Qe(e,Rx,Be.ENV),configFileSelector:e=>Qe(e,Nx,Be.CONFIG),default:!1};var Tx="AWS_REGION",Px="region",Xe={environmentVariableSelector:e=>e[Tx],configFileSelector:e=>e[Px],default:()=>{throw new Error("Region is missing")}},Yt={preferredFile:"credentials"};var To=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips"));var Di=e=>To(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e;var Qt=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return Di(t);let n=await t();return Di(n)},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return To(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}};var nl=e=>({...e,eventStreamMarshaller:e.eventStreamSerdeProvider(e)});var pt=class e{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let t=new e({...this,headers:{...this.headers}});return t.query&&(t.query=Ix(t.query)),t}};function Ix(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}var Xt=class{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};var ol="content-length";function vx(e){return t=>async r=>{let n=r.request;if(pt.isInstance(n)){let{body:o,headers:s}=n;if(o&&Object.keys(s).map(i=>i.toLowerCase()).indexOf(ol)===-1)try{let i=e(o);n.headers={...n.headers,[ol]:String(i)}}catch{}}return t({...r,request:n})}}var Ox={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Jt=e=>({applyToStack:t=>{t.add(vx(e.bodyLengthChecker),Ox)}});var sl=async e=>{let t=e?.Bucket||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Lx(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Fx(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},Dx=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Bx=/(\d+\.){3}\d+/,Mx=/\.\./;var Fx=e=>Dx.test(e)&&!Bx.test(e)&&!Mx.test(e),Lx=e=>{let[t,r,n,o,s,i]=e.split(":"),a=t==="arn"&&e.split(":").length>=6,c=[t,r,n,s,i].filter(Boolean).length===5;if(a&&!c)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return t==="arn"&&!!r&&!!n&&!!s&&!!i};var il=(e,t,r)=>{let n=async()=>{let o=r[e]??r[t];return typeof o=="function"?o():o};return e==="endpoint"||t==="endpoint"?async()=>{let o=await n();if(o&&typeof o=="object"){if("url"in o)return o.url.href;if("hostname"in o){let{protocol:s,hostname:i,port:a,path:c}=o;return`${s}//${i}${a?":"+a:""}${c}`}}return o}:n};var al=async(e,t,r,n)=>{let o=await zx(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(o,n)},zx=async(e,t,r)=>{let n={},o=t?.getEndpointParameterInstructions?.()||{};for(let[s,i]of Object.entries(o))switch(i.type){case"staticContextParams":n[s]=i.value;break;case"contextParams":n[s]=e[i.name];break;case"clientContextParams":case"builtInParams":n[s]=await il(i.name,s,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(i))}return Object.keys(o).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await sl(n),n};function cl(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,o=null]=r.split("=");n=decodeURIComponent(n),o&&(o=decodeURIComponent(o)),n in t?Array.isArray(t[n])?t[n].push(o):t[n]=[t[n],o]:t[n]=o}return t}var Se=e=>{if(typeof e=="string")return Se(new URL(e));let{hostname:t,pathname:r,port:n,protocol:o,search:s}=e,i;return s&&(i=cl(s)),{hostname:t,port:n?parseInt(n):void 0,protocol:o,path:r,query:i}};var dl=e=>typeof e=="object"?"url"in e?Se(e.url):e:Se(e);var ll=({config:e,instructions:t})=>(r,n)=>async o=>{let s=await al(o.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=s,n.authSchemes=s.properties?.authSchemes;let i=n.authSchemes?.[0];return i&&(n.signing_region=i.signingRegion,n.signing_service=i.signingName),r({...o})};var fl=(e,t)=>(r,n)=>async o=>{let{response:s}=await r(o);try{let i=await t(s,e);return{response:s,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:s}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";i.message+=`
  `+a}throw i}};var ml=(e,t)=>(r,n)=>async o=>{let s=n.endpointV2?.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!s)throw new Error("No valid endpoint provider available.");let i=await t(o.input,{...e,endpoint:s});return r({...o,request:i})};var $x={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Bi={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Ae(e,t,r){return{applyToStack:n=>{n.add(fl(e,r),$x),n.add(ml(e,t),Bi)}}}var Ux={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Bi.name},_e=(e,t)=>({applyToStack:r=>{r.addRelativeTo(ll({config:e,instructions:t}),Ux)}});var Zt=e=>{let t=e.tls??!0,{endpoint:r}=e,n=r!=null?async()=>dl(await de(r)()):void 0;return{...e,endpoint:n,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:de(e.useDualstackEndpoint??!1),useFipsEndpoint:de(e.useFipsEndpoint??!1)}};var $e;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})($e||($e={}));var br=3,Je=$e.STANDARD;var ul=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],hl=["TimeoutError","RequestTimeout","RequestTimeoutException"],pl=[500,502,503,504],yl=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"];var Mr=e=>e.$metadata?.httpStatusCode===429||ul.includes(e.name)||e.$retryable?.throttling==!0,Po=e=>hl.includes(e.name)||yl.includes(e?.code||"")||pl.includes(e.$metadata?.httpStatusCode||0),gl=e=>{if(e.$metadata?.httpStatusCode!==void 0){let t=e.$metadata.httpStatusCode;return 500<=t&&t<=599&&!Po(e)}return!1};var yn=class{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=t?.beta??.7,this.minCapacity=t?.minCapacity??1,this.minFillRate=t?.minFillRate??.5,this.scaleConstant=t?.scaleConstant??.4,this.smooth=t?.smooth??.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),Mr(t)){let o=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=o,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(o),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}};var Io="amz-sdk-invocation-id",vo="amz-sdk-request";var Cl=()=>{let e=100;return{computeNextBackoffDelay:n=>Math.floor(Math.min(2e4,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}};var Mi=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(2e4,e),getRetryCost:()=>r});var Sr=class{constructor(t){this.maxAttempts=t,this.mode=$e.STANDARD,this.capacity=500,this.retryBackoffStrategy=Cl(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return Mi({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(t,r){let n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){let o=r.errorType;this.retryBackoffStrategy.setDelayBase(o==="THROTTLING"?500:100);let s=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,s):s,a=this.getCapacityCost(o);return this.capacity-=a,Mi({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(500,this.capacity+(t.getRetryCost()??1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${br}`),br}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?10:5}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}};var Do=class{constructor(t,r){this.maxAttemptsProvider=t,this.mode=$e.ADAPTIVE;let{rateLimiter:n}=r??{};this.rateLimiter=n??new yn,this.standardRetryStrategy=new Sr(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}};var Sl=It(require("crypto")),Mo=new Uint8Array(256),Bo=Mo.length;function Li(){return Bo>Mo.length-16&&(Sl.default.randomFillSync(Mo),Bo=0),Mo.slice(Bo,Bo+=16)}var Al=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function jx(e){return typeof e=="string"&&Al.test(e)}var _l=jx;var le=[];for(let e=0;e<256;++e)le.push((e+256).toString(16).substr(1));function qx(e,t=0){let r=(le[e[t+0]]+le[e[t+1]]+le[e[t+2]]+le[e[t+3]]+"-"+le[e[t+4]]+le[e[t+5]]+"-"+le[e[t+6]]+le[e[t+7]]+"-"+le[e[t+8]]+le[e[t+9]]+"-"+le[e[t+10]]+le[e[t+11]]+le[e[t+12]]+le[e[t+13]]+le[e[t+14]]+le[e[t+15]]).toLowerCase();if(!_l(r))throw TypeError("Stringified UUID is invalid");return r}var kl=qx;function Kx(e,t,r){e=e||{};let n=e.random||(e.rng||Li)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return kl(n)}var zi=Kx;var $i=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`);var Rl="AWS_MAX_ATTEMPTS",Nl="max_attempts",er={environmentVariableSelector:e=>{let t=e[Rl];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${Rl} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[Nl];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${Nl} mast be a number, got "${t}"`);return r},default:br},tr=e=>{let{retryStrategy:t}=e,r=de(e.maxAttempts??br);return{...e,maxAttempts:r,retryStrategy:async()=>t||(await de(e.retryMode)()===$e.ADAPTIVE?new Do(r):new Sr(r))}},Gx="AWS_RETRY_MODE",Hx="retry_mode",rr={environmentVariableSelector:e=>e[Gx],configFileSelector:e=>e[Hx],default:Je};var Vx=e=>(t,r)=>async n=>{let o=await e.retryStrategy(),s=await e.maxAttempts();if(Wx(o)){o=o;let i=await o.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,d=0,{request:l}=n;for(pt.isInstance(l)&&(l.headers[Io]=zi());;)try{pt.isInstance(l)&&(l.headers[vo]=`attempt=${c+1}; max=${s}`);let{response:u,output:h}=await t(n);return o.recordSuccess(i),h.$metadata.attempts=c+1,h.$metadata.totalRetryDelay=d,{response:u,output:h}}catch(u){let h=Yx(u);a=$i(u);try{i=await o.refreshRetryTokenForRetry(i,h)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=d,a}c=i.getRetryCount();let g=i.getRetryDelay();d+=g,await new Promise(w=>setTimeout(w,g))}}else return o=o,o?.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",o.mode]]),o.retry(t,n)},Wx=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",Yx=e=>{let t={errorType:Qx(e)},r=Jx(e.$response);return r&&(t.retryAfterHint=r),t},Qx=e=>Mr(e)?"THROTTLING":Po(e)?"TRANSIENT":gl(e)?"SERVER_ERROR":"CLIENT_ERROR",Xx={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},nr=e=>({applyToStack:t=>{t.add(Vx(e),Xx)}}),Jx=e=>{if(!Xt.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};var Ze=class{trace(){}debug(){}info(){}warn(){}error(){}};var Lr=()=>{let e=[],t=[],r=new Set,n=l=>l.sort((u,h)=>Tl[h.step]-Tl[u.step]||Pl[h.priority||"normal"]-Pl[u.priority||"normal"]),o=l=>{let u=!1,h=g=>g.name&&g.name===l?(u=!0,r.delete(l),!1):!0;return e=e.filter(h),t=t.filter(h),u},s=l=>{let u=!1,h=g=>g.middleware===l?(u=!0,g.name&&r.delete(g.name),!1):!0;return e=e.filter(h),t=t.filter(h),u},i=l=>(e.forEach(u=>{l.add(u.middleware,{...u})}),t.forEach(u=>{l.addRelativeTo(u.middleware,{...u})}),l),a=l=>{let u=[];return l.before.forEach(h=>{h.before.length===0&&h.after.length===0?u.push(h):u.push(...a(h))}),u.push(l),l.after.reverse().forEach(h=>{h.before.length===0&&h.after.length===0?u.push(h):u.push(...a(h))}),u},c=(l=!1)=>{let u=[],h=[],g={};return e.forEach(b=>{let E={...b,before:[],after:[]};E.name&&(g[E.name]=E),u.push(E)}),t.forEach(b=>{let E={...b,before:[],after:[]};E.name&&(g[E.name]=E),h.push(E)}),h.forEach(b=>{if(b.toMiddleware){let E=g[b.toMiddleware];if(E===void 0){if(l)return;throw new Error(`${b.toMiddleware} is not found when adding ${b.name||"anonymous"} middleware ${b.relation} ${b.toMiddleware}`)}b.relation==="after"&&E.after.push(b),b.relation==="before"&&E.before.push(b)}}),n(u).map(a).reduce((b,E)=>(b.push(...E),b),[])},d={add:(l,u={})=>{let{name:h,override:g}=u,w={step:"initialize",priority:"normal",middleware:l,...u};if(h){if(r.has(h)){if(!g)throw new Error(`Duplicate middleware name '${h}'`);let b=e.findIndex(he=>he.name===h),E=e[b];if(E.step!==w.step||E.priority!==w.priority)throw new Error(`"${h}" middleware with ${E.priority} priority in ${E.step} step cannot be overridden by same-name middleware with ${w.priority} priority in ${w.step} step.`);e.splice(b,1)}r.add(h)}e.push(w)},addRelativeTo:(l,u)=>{let{name:h,override:g}=u,w={middleware:l,...u};if(h){if(r.has(h)){if(!g)throw new Error(`Duplicate middleware name '${h}'`);let b=t.findIndex(he=>he.name===h),E=t[b];if(E.toMiddleware!==w.toMiddleware||E.relation!==w.relation)throw new Error(`"${h}" middleware ${E.relation} "${E.toMiddleware}" middleware cannot be overridden by same-name middleware ${w.relation} "${w.toMiddleware}" middleware.`);t.splice(b,1)}r.add(h)}t.push(w)},clone:()=>i(Lr()),use:l=>{l.applyToStack(d)},remove:l=>typeof l=="string"?o(l):s(l),removeByTag:l=>{let u=!1,h=g=>{let{tags:w,name:b}=g;return w&&w.includes(l)?(b&&r.delete(b),u=!0,!1):!0};return e=e.filter(h),t=t.filter(h),u},concat:l=>{let u=i(Lr());return u.use(l),u},applyToStack:i,identify:()=>c(!0).map(l=>l.name+": "+(l.tags||[]).join(",")),resolve:(l,u)=>{for(let h of c().map(g=>g.middleware).reverse())l=h(l,u);return l}};return d},Tl={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Pl={high:3,normal:2,low:1};var et=class{constructor(t){this.middlewareStack=Lr(),this.config=t}send(t,r,n){let o=typeof r!="function"?r:void 0,s=typeof r=="function"?r:n,i=t.resolveMiddleware(this.middlewareStack,this.config,o);if(s)i(t).then(a=>s(null,a.output),a=>s(a)).catch(()=>{});else return i(t).then(a=>a.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}};var Zx=/^[A-Za-z0-9+/]*={0,2}$/,tt=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!Zx.exec(e))throw new TypeError("Invalid base64 string.");let t=Dr(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};var rt=e=>ut(e.buffer,e.byteOffset,e.byteLength).toString("base64");function Il(e,t="utf-8"){return t==="base64"?rt(e):Oe(e)}function vl(e,t){return t==="base64"?yt.mutate(tt(e)):yt.mutate(we(e))}var yt=class e extends Uint8Array{static fromString(t,r="utf-8"){switch(typeof t){case"string":return vl(t,r);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return Il(this,t)}};var Ol=require("stream"),Dl=(e,t)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:o,checksumLocationName:s,streamHasher:i}=t,a=r!==void 0&&o!==void 0&&s!==void 0&&i!==void 0,c=a?i(o,e):void 0,d=new Ol.Readable({read:()=>{}});return e.on("data",l=>{let u=n(l)||0;d.push(`${u.toString(16)}\r
`),d.push(l),d.push(`\r
`)}),e.on("end",async()=>{if(d.push(`0\r
`),a){let l=r(await c);d.push(`${s}:${l}\r
`),d.push(`\r
`)}d.push(null)}),d};function Ui(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=Ye(r),Array.isArray(n))for(let o=0,s=n.length;o<s;o++)t.push(`${r}=${Ye(n[o])}`);else{let o=r;(n||typeof n=="string")&&(o+=`=${Ye(n)}`),t.push(o)}}return t.join("&")}var Fo=require("http"),Lo=require("https");var Bl=["ECONNRESET","EPIPE","ETIMEDOUT"];var ji=e=>{let t={};for(let r of Object.keys(e)){let n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t};var Ml=(e,t,r=0)=>{if(!r)return;let n=setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r);e.on("socket",o=>{o.connecting?o.on("connect",()=>{clearTimeout(n)}):clearTimeout(n)})};var Fl=(e,{keepAlive:t,keepAliveMsecs:r})=>{t===!0&&e.on("socket",n=>{n.setKeepAlive(t,r||0)})};var Ll=(e,t,r=0)=>{e.setTimeout(r,()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))})};var $l=require("stream"),zl=1e3;async function qi(e,t,r=zl){let n=t.headers??{},o=n.Expect||n.expect,s=-1,i=!1;o==="100-continue"&&await Promise.race([new Promise(a=>{s=Number(setTimeout(a,Math.max(zl,r)))}),new Promise(a=>{e.on("continue",()=>{clearTimeout(s),a()}),e.on("error",()=>{i=!0,clearTimeout(s),a()})})]),i||eE(e,t.body)}function eE(e,t){t instanceof $l.Readable?t.pipe(e):t?e.end(Buffer.from(t)):e.end()}var nt=class{constructor(t){this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(o=>{r(this.resolveDefaultConfig(o))}).catch(n):r(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:n,socketTimeout:o,httpAgent:s,httpsAgent:i}=t||{},a=!0,c=50;return{connectionTimeout:n,requestTimeout:r??o,httpAgent:s||new Fo.Agent({keepAlive:a,maxSockets:c}),httpsAgent:i||new Lo.Agent({keepAlive:a,maxSockets:c})}}destroy(){this.config?.httpAgent?.destroy(),this.config?.httpsAgent?.destroy()}async handle(t,{abortSignal:r}={}){return this.config||(this.config=await this.configProvider),new Promise((n,o)=>{let s,i=async E=>{await s,n(E)},a=async E=>{await s,o(E)};if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r?.aborted){let E=new Error("Request aborted");E.name="AbortError",a(E);return}let c=t.protocol==="https:",d=Ui(t.query||{}),l;if(t.username!=null||t.password!=null){let E=t.username??"",he=t.password??"";l=`${E}:${he}`}let u=t.path;d&&(u+=`?${d}`),t.fragment&&(u+=`#${t.fragment}`);let h={headers:t.headers,host:t.hostname,method:t.method,path:u,port:t.port,agent:c?this.config.httpsAgent:this.config.httpAgent,auth:l},w=(c?Lo.request:Fo.request)(h,E=>{let he=new Xt({statusCode:E.statusCode||-1,reason:E.statusMessage,headers:ji(E.headers),body:E});i({response:he})});w.on("error",E=>{Bl.includes(E.code)?a(Object.assign(E,{name:"TimeoutError"})):a(E)}),Ml(w,a,this.config.connectionTimeout),Ll(w,a,this.config.requestTimeout),r&&(r.onabort=()=>{w.abort();let E=new Error("Request aborted");E.name="AbortError",a(E)});let b=h.agent;typeof b=="object"&&"keepAlive"in b&&Fl(w,{keepAlive:b.keepAlive,keepAliveMsecs:b.keepAliveMsecs}),s=qi(w,t,this.config.requestTimeout).catch(o)})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){return this.config??{}}};var Ki=class{constructor(t){this.sessions=[],this.sessions=t??[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(r=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let r of this.sessions)r===t&&(r.destroyed||r.destroy())}};var Ul=require("stream"),zo=class extends Ul.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(t,r,n){this.bufferedBytes.push(t),n()}};var ot=e=>new Promise((t,r)=>{let n=new zo;e.pipe(n),e.on("error",o=>{n.end(),r(o)}),n.on("error",r),n.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.bufferedBytes));t(o)})});var $o=require("stream"),ql=require("util"),jl="The stream has already been transformed.",Kl=e=>{if(!(e instanceof $o.Readable)){let n=e?.__proto__?.constructor?.name||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${n}`)}let t=!1,r=async()=>{if(t)throw new Error(jl);return t=!0,await ot(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async n=>{let o=await r();return n===void 0||Buffer.isEncoding(n)?ut(o.buffer,o.byteOffset,o.byteLength).toString(n):new ql.TextDecoder(n).decode(o)},transformToWebStream:()=>{if(t)throw new Error(jl);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof $o.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please make sure you are using Node.js >= 17.0.0, or polyfill is available.");return t=!0,$o.Readable.toWeb(e)}})};var gt=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return yt.mutate(e);if(!e)return yt.mutate(new Uint8Array);let r=t.streamCollector(e);return yt.mutate(await r)};var ye=class{constructor(){this.middlewareStack=Lr()}};var Ne="***SensitiveInformation***";var Gl=(e,t)=>{for(let r of Object.keys(e)){let n=e[r],o=async function(i,a,c){let d=new n(i);if(typeof a=="function")this.send(d,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(d,a||{},c)}else return this.send(d,a)},s=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[s]=o}};var Yl=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}};var tE=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&ef.warn(Zl(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},rE=Math.ceil(34028234663852886e22),Hl=e=>{let t=tE(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>rE)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},Uo=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}};var zr=e=>Gi(e,32),Vl=e=>Gi(e,16),Wl=e=>Gi(e,8),Gi=(e,t)=>{let r=Uo(e);if(r!==void 0&&nE(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},nE=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},Ue=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},Ar=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},S=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return ef.warn(Zl(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}};var Ql=e=>Hl(typeof e=="string"?jo(e):e),oE=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,jo=e=>{let t=e.match(oE);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)};var qo=e=>zr(typeof e=="string"?jo(e):e),Xl=e=>Vl(typeof e=="string"?jo(e):e),Jl=e=>Wl(typeof e=="string"?jo(e):e),Zl=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),ef={warn:console.warn};var sE=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],tf=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function rf(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),o=e.getUTCDate(),s=e.getUTCHours(),i=e.getUTCMinutes(),a=e.getUTCSeconds(),c=o<10?`0${o}`:`${o}`,d=s<10?`0${s}`:`${s}`,l=i<10?`0${i}`:`${i}`,u=a<10?`0${a}`:`${a}`;return`${sE[n]}, ${c} ${tf[r]} ${t} ${d}:${l}:${u} GMT`}var XB=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var iE=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Hi=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=iE.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,s,i,a,c,d,l]=t,u=Xl(nf(n)),h=gn(o,"month",1,12),g=gn(s,"day",1,31),w=aE(u,h,g,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d});return l.toUpperCase()!="Z"&&w.setTime(w.getTime()-mE(l)),w},JB=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),ZB=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),e1=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/);var aE=(e,t,r,n)=>{let o=t-1;return dE(e,o,r),new Date(Date.UTC(e,o,r,gn(n.hours,"hour",0,23),gn(n.minutes,"minute",0,59),gn(n.seconds,"seconds",0,60),fE(n.fractionalMilliseconds)))};var t1=50*365*24*60*60*1e3;var cE=[31,28,31,30,31,30,31,31,30,31,30,31],dE=(e,t,r)=>{let n=cE[t];if(t===1&&lE(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${tf[t]} in ${e}: ${r}`)},lE=e=>e%4===0&&(e%100!==0||e%400===0),gn=(e,t,r,n)=>{let o=Jl(nf(e));if(o<r||o>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return o},fE=e=>e==null?0:Ql("0."+e)*1e3,mE=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),o=Number(e.substring(4,6));return r*(n*60+o)*60*1e3},nf=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};var st=class e extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,e.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}},U=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,o])=>{(e[n]==null||e[n]==="")&&(e[n]=o)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e};var uE=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let o=hE(e),s=o.httpStatusCode?o.httpStatusCode+"":void 0,i=new r({name:t?.code||t?.Code||n||s||"UnknownError",$fault:"client",$metadata:o});throw U(i,t)},or=e=>({output:t,parsedBody:r,errorCode:n})=>{uE({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},hE=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]});var sr=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};var of=!1,ir=e=>{e&&!of&&parseInt(e.substring(1,e.indexOf(".")))<14&&(of=!0)};var sf=e=>{let t=[];for(let r in Pr){let n=Pr[r];e[n]!==void 0&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},af=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t};var cf=e=>{let t=e.retryStrategy;return{setRetryStrategy(r){t=r},retryStrategy(){return t}}},df=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t};var $r=e=>({...sf(e),...cf(e)});var Ur=e=>({...af(e),...df(e)});function jr(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var Cn=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=Cn(e[r]));return e};var Vi=function(){let e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),r=new t;return Object.setPrototypeOf(r,e.prototype),r};Vi.prototype=Object.create(String.prototype,{constructor:{value:Vi,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(Vi,String);function j(e,t,r){let n,o,s;if(typeof t>"u"&&typeof r>"u")n={},s=e;else{if(n=e,typeof t=="function")return o=t,s=r,pE(n,o,s);s=t}for(let i of Object.keys(s)){if(!Array.isArray(s[i])){n[i]=s[i];continue}lf(n,null,s,i)}return n}var G=(e,t)=>{let r={};for(let n in t)lf(r,e,t,n);return r},pE=(e,t,r)=>j(e,Object.entries(r).reduce((n,[o,s])=>(Array.isArray(s)?n[o]=s:typeof s=="function"?n[o]=[t,s()]:n[o]=[t,s],n),{})),lf=(e,t,r,n)=>{if(t!==null){let i=r[n];typeof i=="function"&&(i=[,i]);let[a=yE,c=gE,d=n]=i;(typeof a=="function"&&a(t[d])||typeof a!="function"&&a)&&(e[n]=c(t[d]));return}let[o,s]=r[n];if(typeof s=="function"){let i,a=o===void 0&&(i=s())!=null,c=typeof o=="function"&&!!o(void 0)||typeof o!="function"&&!!o;a?e[n]=i:c&&(e[n]=s())}else{let i=o===void 0&&s!=null,a=typeof o=="function"&&!!o(s)||typeof o!="function"&&!!o;(i||a)&&(e[n]=s)}},yE=e=>e!=null,gE=e=>e;var Wi=(e,t,r,n,o,s)=>{if(t!=null&&t[r]!==void 0){let i=n();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(o,s?i.split("/").map(a=>jr(a)).join("/"):jr(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return e};var qr=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=qr(e[r]));return t}return e};var ff=e=>({...e,useFipsEndpoint:e.useFipsEndpoint??!1,useDualstackEndpoint:e.useDualstackEndpoint??!1,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"});var mf={name:"@aws-sdk/client-s3",description:"AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",version:"3.409.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo s3",test:"yarn test:unit","test:e2e":"ts-mocha test/**/*.ispec.ts && karma start karma.conf.js","test:unit":"ts-mocha test/**/*.spec.ts"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha1-browser":"3.0.0","@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.409.0","@aws-sdk/credential-provider-node":"3.409.0","@aws-sdk/middleware-bucket-endpoint":"3.409.0","@aws-sdk/middleware-expect-continue":"3.408.0","@aws-sdk/middleware-flexible-checksums":"3.408.0","@aws-sdk/middleware-host-header":"3.408.0","@aws-sdk/middleware-location-constraint":"3.408.0","@aws-sdk/middleware-logger":"3.408.0","@aws-sdk/middleware-recursion-detection":"3.408.0","@aws-sdk/middleware-sdk-s3":"3.408.0","@aws-sdk/middleware-signing":"3.408.0","@aws-sdk/middleware-ssec":"3.408.0","@aws-sdk/middleware-user-agent":"3.408.0","@aws-sdk/signature-v4-multi-region":"3.408.0","@aws-sdk/types":"3.408.0","@aws-sdk/util-endpoints":"3.408.0","@aws-sdk/util-user-agent-browser":"3.408.0","@aws-sdk/util-user-agent-node":"3.408.0","@aws-sdk/xml-builder":"3.310.0","@smithy/config-resolver":"^2.0.5","@smithy/eventstream-serde-browser":"^2.0.5","@smithy/eventstream-serde-config-resolver":"^2.0.5","@smithy/eventstream-serde-node":"^2.0.5","@smithy/fetch-http-handler":"^2.0.5","@smithy/hash-blob-browser":"^2.0.5","@smithy/hash-node":"^2.0.5","@smithy/hash-stream-node":"^2.0.5","@smithy/invalid-dependency":"^2.0.5","@smithy/md5-js":"^2.0.5","@smithy/middleware-content-length":"^2.0.5","@smithy/middleware-endpoint":"^2.0.5","@smithy/middleware-retry":"^2.0.5","@smithy/middleware-serde":"^2.0.5","@smithy/middleware-stack":"^2.0.0","@smithy/node-config-provider":"^2.0.6","@smithy/node-http-handler":"^2.0.5","@smithy/protocol-http":"^2.0.5","@smithy/smithy-client":"^2.0.5","@smithy/types":"^2.2.2","@smithy/url-parser":"^2.0.5","@smithy/util-base64":"^2.0.0","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.6","@smithy/util-defaults-mode-node":"^2.0.6","@smithy/util-retry":"^2.0.0","@smithy/util-stream":"^2.0.5","@smithy/util-utf8":"^2.0.0","@smithy/util-waiter":"^2.0.5","fast-xml-parser":"4.2.5",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"}};var uf=(e,{stsClientCtor:t})=>Co({...e,stsClientCtor:t});var hf=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,defaultSigningName:"sts"});var pf={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.409.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn test:unit","test:unit":"jest"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/credential-provider-node":"3.409.0","@aws-sdk/middleware-host-header":"3.408.0","@aws-sdk/middleware-logger":"3.408.0","@aws-sdk/middleware-recursion-detection":"3.408.0","@aws-sdk/middleware-sdk-sts":"3.408.0","@aws-sdk/middleware-signing":"3.408.0","@aws-sdk/middleware-user-agent":"3.408.0","@aws-sdk/types":"3.408.0","@aws-sdk/util-endpoints":"3.408.0","@aws-sdk/util-user-agent-browser":"3.408.0","@aws-sdk/util-user-agent-node":"3.408.0","@smithy/config-resolver":"^2.0.5","@smithy/fetch-http-handler":"^2.0.5","@smithy/hash-node":"^2.0.5","@smithy/invalid-dependency":"^2.0.5","@smithy/middleware-content-length":"^2.0.5","@smithy/middleware-endpoint":"^2.0.5","@smithy/middleware-retry":"^2.0.5","@smithy/middleware-serde":"^2.0.5","@smithy/middleware-stack":"^2.0.0","@smithy/node-config-provider":"^2.0.6","@smithy/node-http-handler":"^2.0.5","@smithy/protocol-http":"^2.0.5","@smithy/smithy-client":"^2.0.5","@smithy/types":"^2.2.2","@smithy/url-parser":"^2.0.5","@smithy/util-base64":"^2.0.0","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.6","@smithy/util-defaults-mode-node":"^2.0.6","@smithy/util-retry":"^2.0.0","@smithy/util-utf8":"^2.0.0","fast-xml-parser":"4.2.5",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}};var Me=class e extends st{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var Ko=class e extends Me{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Go=class e extends Me{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Ho=class e extends Me{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Vo=class e extends Me{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Wo=class e extends Me{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Yo=class e extends Me{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Qo=class e extends Me{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var yf=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:Ne}}),gf=e=>({...e,...e.Credentials&&{Credentials:yf(e.Credentials)}});var Cf=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:Ne}}),xf=e=>({...e,...e.Credentials&&{Credentials:yf(e.Credentials)}});var Qf=It(oa());var Xf=async(e,t)=>{let r=lm,n;return n=mm({...Ow(e,t),Action:"AssumeRole",Version:"2011-06-15"}),dm(t,r,"/",void 0,n)};var Jf=async(e,t)=>{let r=lm,n;return n=mm({...Dw(e,t),Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),dm(t,r,"/",void 0,n)};var Zf=async(e,t)=>{if(e.statusCode>=300)return Nw(e,t);let r=await sa(e.body,t),n={};return n=Uw(r.AssumeRoleResult,t),{$metadata:xt(e),...n}},Nw=async(e,t)=>{let r={...e,body:await fm(e.body,t)},n=um(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await tm(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await rm(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await nm(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await om(r,t);default:let o=r.body;return cm({output:e,parsedBody:o.Error,errorCode:n})}};var em=async(e,t)=>{if(e.statusCode>=300)return Tw(e,t);let r=await sa(e.body,t),n={};return n=jw(r.AssumeRoleWithWebIdentityResult,t),{$metadata:xt(e),...n}},Tw=async(e,t)=>{let r={...e,body:await fm(e.body,t)},n=um(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await tm(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await Pw(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await Iw(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await vw(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await rm(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await nm(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await om(r,t);default:let o=r.body;return cm({output:e,parsedBody:o.Error,errorCode:n})}};var tm=async(e,t)=>{let r=e.body,n=qw(r.Error,t),o=new Ko({$metadata:xt(e),...n});return U(o,r)},Pw=async(e,t)=>{let r=e.body,n=Kw(r.Error,t),o=new Qo({$metadata:xt(e),...n});return U(o,r)},Iw=async(e,t)=>{let r=e.body,n=Gw(r.Error,t),o=new Wo({$metadata:xt(e),...n});return U(o,r)};var vw=async(e,t)=>{let r=e.body,n=Hw(r.Error,t),o=new Yo({$metadata:xt(e),...n});return U(o,r)},rm=async(e,t)=>{let r=e.body,n=Vw(r.Error,t),o=new Go({$metadata:xt(e),...n});return U(o,r)},nm=async(e,t)=>{let r=e.body,n=Ww(r.Error,t),o=new Ho({$metadata:xt(e),...n});return U(o,r)},om=async(e,t)=>{let r=e.body,n=Yw(r.Error,t),o=new Vo({$metadata:xt(e),...n});return U(o,r)},Ow=(e,t)=>{let r={};if(e.RoleArn!=null&&(r.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(r.RoleSessionName=e.RoleSessionName),e.PolicyArns!=null){let n=sm(e.PolicyArns,t);e.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([o,s])=>{let i=`PolicyArns.${o}`;r[i]=s})}if(e.Policy!=null&&(r.Policy=e.Policy),e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),e.Tags!=null){let n=$w(e.Tags,t);e.Tags?.length===0&&(r.Tags=[]),Object.entries(n).forEach(([o,s])=>{let i=`Tags.${o}`;r[i]=s})}if(e.TransitiveTagKeys!=null){let n=zw(e.TransitiveTagKeys,t);e.TransitiveTagKeys?.length===0&&(r.TransitiveTagKeys=[]),Object.entries(n).forEach(([o,s])=>{let i=`TransitiveTagKeys.${o}`;r[i]=s})}if(e.ExternalId!=null&&(r.ExternalId=e.ExternalId),e.SerialNumber!=null&&(r.SerialNumber=e.SerialNumber),e.TokenCode!=null&&(r.TokenCode=e.TokenCode),e.SourceIdentity!=null&&(r.SourceIdentity=e.SourceIdentity),e.ProvidedContexts!=null){let n=Fw(e.ProvidedContexts,t);e.ProvidedContexts?.length===0&&(r.ProvidedContexts=[]),Object.entries(n).forEach(([o,s])=>{let i=`ProvidedContexts.${o}`;r[i]=s})}return r};var Dw=(e,t)=>{let r={};if(e.RoleArn!=null&&(r.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(r.RoleSessionName=e.RoleSessionName),e.WebIdentityToken!=null&&(r.WebIdentityToken=e.WebIdentityToken),e.ProviderId!=null&&(r.ProviderId=e.ProviderId),e.PolicyArns!=null){let n=sm(e.PolicyArns,t);e.PolicyArns?.length===0&&(r.PolicyArns=[]),Object.entries(n).forEach(([o,s])=>{let i=`PolicyArns.${o}`;r[i]=s})}return e.Policy!=null&&(r.Policy=e.Policy),e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),r};var sm=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=Bw(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},Bw=(e,t)=>{let r={};return e.arn!=null&&(r.arn=e.arn),r},Mw=(e,t)=>{let r={};return e.ProviderArn!=null&&(r.ProviderArn=e.ProviderArn),e.ContextAssertion!=null&&(r.ContextAssertion=e.ContextAssertion),r},Fw=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=Mw(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},Lw=(e,t)=>{let r={};return e.Key!=null&&(r.Key=e.Key),e.Value!=null&&(r.Value=e.Value),r},zw=(e,t)=>{let r={},n=1;for(let o of e)o!==null&&(r[`member.${n}`]=o,n++);return r},$w=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=Lw(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},im=(e,t)=>{let r={};return e.AssumedRoleId!==void 0&&(r.AssumedRoleId=S(e.AssumedRoleId)),e.Arn!==void 0&&(r.Arn=S(e.Arn)),r},Uw=(e,t)=>{let r={};return e.Credentials!==void 0&&(r.Credentials=am(e.Credentials,t)),e.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=im(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=qo(e.PackedPolicySize)),e.SourceIdentity!==void 0&&(r.SourceIdentity=S(e.SourceIdentity)),r};var jw=(e,t)=>{let r={};return e.Credentials!==void 0&&(r.Credentials=am(e.Credentials,t)),e.SubjectFromWebIdentityToken!==void 0&&(r.SubjectFromWebIdentityToken=S(e.SubjectFromWebIdentityToken)),e.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=im(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=qo(e.PackedPolicySize)),e.Provider!==void 0&&(r.Provider=S(e.Provider)),e.Audience!==void 0&&(r.Audience=S(e.Audience)),e.SourceIdentity!==void 0&&(r.SourceIdentity=S(e.SourceIdentity)),r},am=(e,t)=>{let r={};return e.AccessKeyId!==void 0&&(r.AccessKeyId=S(e.AccessKeyId)),e.SecretAccessKey!==void 0&&(r.SecretAccessKey=S(e.SecretAccessKey)),e.SessionToken!==void 0&&(r.SessionToken=S(e.SessionToken)),e.Expiration!==void 0&&(r.Expiration=Ue(Hi(e.Expiration))),r};var qw=(e,t)=>{let r={};return e.message!==void 0&&(r.message=S(e.message)),r};var Kw=(e,t)=>{let r={};return e.message!==void 0&&(r.message=S(e.message)),r},Gw=(e,t)=>{let r={};return e.message!==void 0&&(r.message=S(e.message)),r};var Hw=(e,t)=>{let r={};return e.message!==void 0&&(r.message=S(e.message)),r},Vw=(e,t)=>{let r={};return e.message!==void 0&&(r.message=S(e.message)),r},Ww=(e,t)=>{let r={};return e.message!==void 0&&(r.message=S(e.message)),r},Yw=(e,t)=>{let r={};return e.message!==void 0&&(r.message=S(e.message)),r},xt=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Qw=(e,t)=>gt(e,t).then(r=>t.utf8Encoder(r)),cm=or(Me),dm=async(e,t,r,n,o)=>{let{hostname:s,protocol:i="https",port:a,path:c}=await e.endpoint(),d={protocol:i,hostname:s,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return n!==void 0&&(d.hostname=n),o!==void 0&&(d.body=o),new $(d)},lm={"content-type":"application/x-www-form-urlencoded"},sa=(e,t)=>Qw(e,t).then(r=>{if(r.length){let n=new Qf.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o=n.parse(r),s="#text",i=Object.keys(o)[0],a=o[i];return a[s]&&(a[i]=a[s],delete a[s]),Cn(a)}return{}}),fm=async(e,t)=>{let r=await sa(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},mm=e=>Object.entries(e).map(([t,r])=>jr(t)+"="+jr(r)).join("&"),um=(e,t)=>{if(t.Error?.Code!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"};var Jo=class e extends ye{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(Ae(r,this.serialize,this.deserialize)),this.middlewareStack.use(_e(r,e.getEndpointParameterInstructions())),this.middlewareStack.use(Eo(r));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"STSClient",commandName:"AssumeRoleCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:gf},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Xf(t,r)}deserialize(t,r){return Zf(t,r)}};var Zo=class e extends ye{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(Ae(r,this.serialize,this.deserialize)),this.middlewareStack.use(_e(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"STSClient",commandName:"AssumeRoleWithWebIdentityCommand",inputFilterSensitiveLog:Cf,outputFilterSensitiveLog:xf},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Jf(t,r)}deserialize(t,r){return em(t,r)}};var hm="us-east-1",pm=e=>typeof e!="function"?e===void 0?hm:e:async()=>{try{return await e()}catch{return hm}},ia=(e,t)=>{let r,n;return async(o,s)=>{if(n=o,!r){let{logger:a,region:c,requestHandler:d}=e;r=new t({logger:a,credentialDefaultProvider:()=>async()=>n,region:pm(c||e.region),...d?{requestHandler:d}:{}})}let{Credentials:i}=await r.send(new Jo(s));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${s.RoleArn}`);return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration}}},aa=(e,t)=>{let r;return async n=>{if(!r){let{logger:s,region:i,requestHandler:a}=e;r=new t({logger:s,region:pm(i||e.region),...a?{requestHandler:a}:{}})}let{Credentials:o}=await r.send(new Zo(n));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration}}},ym=e=>t=>e({roleAssumer:ia(t,t.stsClientCtor),roleAssumerWithWebIdentity:aa(t,t.stsClientCtor),...t});var Xw="AWS_ACCESS_KEY_ID",Jw="AWS_SECRET_ACCESS_KEY",Zw="AWS_SESSION_TOKEN",eb="AWS_CREDENTIAL_EXPIRATION",es=()=>async()=>{let e=process.env[Xw],t=process.env[Jw],r=process.env[Zw],n=process.env[eb];if(e&&t)return{accessKeyId:e,secretAccessKey:t,...r&&{sessionToken:r},...n&&{expiration:new Date(n)}};throw new N("Unable to find environment variable credentials.")};var gm=require("os"),Cm=require("path"),ca={},tb=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",Kr=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:n=`C:${Cm.sep}`}=process.env;if(e)return e;if(t)return t;if(r)return`${n}${r}`;let o=tb();return ca[o]||(ca[o]=(0,gm.homedir)()),ca[o]};var da="AWS_PROFILE",rb="default",Fe=e=>e.profile||process.env[da]||rb;var xm=require("crypto"),Em=require("path");var ts=e=>{let r=(0,xm.createHash)("sha1").update(e).digest("hex");return(0,Em.join)(Kr(),".aws","sso","cache",`${r}.json`)};var wm=require("fs");var{readFile:nb}=wm.promises,rs=async e=>{let t=ts(e),r=await nb(t,"utf8");return JSON.parse(r)};var bm=require("path");var ob="AWS_CONFIG_FILE",ns=()=>process.env[ob]||(0,bm.join)(Kr(),".aws","config");var Sm=require("path");var sb="AWS_SHARED_CREDENTIALS_FILE",Am=()=>process.env[sb]||(0,Sm.join)(Kr(),".aws","credentials");var _m=/^profile\s(["'])?([^\1]+)\1$/,km=e=>Object.entries(e).filter(([t])=>_m.test(t)).reduce((t,[r,n])=>({...t,[_m.exec(r)[2]]:n}),{...e.default&&{default:e.default}});var ib=["__proto__","profile __proto__"],wn=e=>{let t={},r;for(let n of e.split(/\r?\n/))if(n=n.split(/(^|\s)[;#]/)[0].trim(),n[0]==="["&&n[n.length-1]==="]"){if(r=n.substring(1,n.length-1),ib.includes(r))throw new Error(`Found invalid profile name "${r}"`)}else if(r){let s=n.indexOf("="),i=0,a=n.length-1;if(s!==-1&&s!==i&&s!==a){let[d,l]=[n.substring(0,s).trim(),n.substring(s+1).trim()];t[r]=t[r]||{},t[r][d]=l}}return t};var Rm=require("fs"),{readFile:ab}=Rm.promises,la={},bn=(e,t)=>((!la[e]||t?.ignoreCache)&&(la[e]=ab(e,"utf8")),la[e]);var Nm=()=>({}),os=async(e={})=>{let{filepath:t=Am(),configFilepath:r=ns()}=e,n=await Promise.all([bn(r,{ignoreCache:e.ignoreCache}).then(wn).then(km).catch(Nm),bn(t,{ignoreCache:e.ignoreCache}).then(wn).catch(Nm)]);return{configFile:n[0],credentialsFile:n[1]}};var Tm=/^sso-session\s(["'])?([^\1]+)\1$/,Pm=e=>Object.entries(e).filter(([t])=>Tm.test(t)).reduce((t,[r,n])=>({...t,[Tm.exec(r)[2]]:n}),{});var cb=()=>({}),ss=async(e={})=>bn(e.configFilepath??ns()).then(wn).then(Pm).catch(cb);var Im=(...e)=>{let t={};for(let r of e)for(let[n,o]of Object.entries(r))t[n]!==void 0?Object.assign(t[n],o):t[n]=o;return t};var cr=async e=>{let t=await os(e);return Im(t.configFile,t.credentialsFile)};var Bm=require("url");var vm=require("buffer"),Om=require("http");function Et(e){return new Promise((t,r)=>{let n=(0,Om.request)({method:"GET",...e,hostname:e.hostname?.replace(/^\[(.+)\]$/,"$1")});n.on("error",o=>{r(Object.assign(new Ie("Unable to connect to instance metadata service"),o)),n.destroy()}),n.on("timeout",()=>{r(new Ie("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",o=>{let{statusCode:s=400}=o;(s<200||300<=s)&&(r(Object.assign(new Ie("Error response received from instance metadata service"),{statusCode:s})),n.destroy());let i=[];o.on("data",a=>{i.push(a)}),o.on("end",()=>{t(vm.Buffer.concat(i)),n.destroy()})}),n.end()})}var is=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",as=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)});var cs=({maxRetries:e=0,timeout:t=1e3})=>({maxRetries:e,timeout:t});var Sn=(e,t)=>{let r=e();for(let n=0;n<t;n++)r=r.catch(e);return r};var An="AWS_CONTAINER_CREDENTIALS_FULL_URI",_n="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",Dm="AWS_CONTAINER_AUTHORIZATION_TOKEN",ds=(e={})=>{let{timeout:t,maxRetries:r}=cs(e);return()=>Sn(async()=>{let n=await ub(),o=JSON.parse(await db(t,n));if(!is(o))throw new N("Invalid response received from instance metadata service.");return as(o)},r)},db=async(e,t)=>(process.env[Dm]&&(t.headers={...t.headers,Authorization:process.env[Dm]}),(await Et({...t,timeout:e})).toString()),lb="169.254.170.2",fb={localhost:!0,"127.0.0.1":!0},mb={"http:":!0,"https:":!0},ub=async()=>{if(process.env[_n])return{hostname:lb,path:process.env[_n]};if(process.env[An]){let e=(0,Bm.parse)(process.env[An]);if(!e.hostname||!(e.hostname in fb))throw new N(`${e.hostname} is not a valid container metadata service hostname`,!1);if(!e.protocol||!(e.protocol in mb))throw new N(`${e.protocol} is not a valid container metadata service protocol`,!1);return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new N(`The container metadata credential provider cannot be used unless the ${_n} or ${An} environment variable is set`,!1)};var Mm=e=>async()=>{try{let t=e(process.env);if(t===void 0)throw new Error;return t}catch(t){throw new N(t.message||`Cannot load config from environment variables with getter: ${e}`)}};var Fm=(e,{preferredFile:t="config",...r}={})=>async()=>{let n=Fe(r),{configFile:o,credentialsFile:s}=await os(r),i=s[n]||{},a=o[n]||{},c=t==="config"?{...i,...a}:{...a,...i};try{let d=e(c);if(d===void 0)throw new Error;return d}catch(d){throw new N(d.message||`Cannot load config for profile ${n} in SDK configuration files with getter: ${e}`)}};var hb=e=>typeof e=="function",Lm=e=>hb(e)?async()=>await e():Wc(e);var F=({environmentVariableSelector:e,configFileSelector:t,default:r},n={})=>$t(Jn(Mm(e),Fm(t,n),Lm(r)));var kn;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(kn||(kn={}));var pb="AWS_EC2_METADATA_SERVICE_ENDPOINT",yb="ec2_metadata_service_endpoint",zm={environmentVariableSelector:e=>e[pb],configFileSelector:e=>e[yb],default:void 0};var dr;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(dr||(dr={}));var gb="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",Cb="ec2_metadata_service_endpoint_mode",$m={environmentVariableSelector:e=>e[gb],configFileSelector:e=>e[Cb],default:dr.IPv4};var Rn=async()=>Se(await xb()||await Eb()),xb=async()=>F(zm)(),Eb=async()=>{let e=await F($m)();switch(e){case dr.IPv4:return kn.IPv4;case dr.IPv6:return kn.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(dr)}`)}};var wb="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",fa=(e,t)=>{let r=300+Math.floor(Math.random()*300),n=new Date(Date.now()+r*1e3);t.warn("Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(newExpiration)}.\nFor more information, please visit: "+wb);let o=e.originalExpiration??e.expiration;return{...e,...o?{originalExpiration:o}:{},expiration:n}};var Um=(e,t={})=>{let r=t?.logger||console,n;return async()=>{let o;try{o=await e(),o.expiration&&o.expiration.getTime()<Date.now()&&(o=fa(o,r))}catch(s){if(n)r.warn("Credential renew failed: ",s),o=fa(n,r);else throw s}return n=o,o}};var jm="/latest/meta-data/iam/security-credentials/",bb="/latest/api/token",ls=(e={})=>Um(Sb(e),{logger:e.logger}),Sb=e=>{let t=!1,{timeout:r,maxRetries:n}=cs(e),o=async(s,i)=>{let a=(await Sn(async()=>{let c;try{c=await _b(i)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},s)).trim();return Sn(async()=>{let c;try{c=await kb(a,i)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},s)};return async()=>{let s=await Rn();if(t)return o(n,{...s,timeout:r});{let i;try{i=(await Ab({...s,timeout:r})).toString()}catch(a){if(a?.statusCode===400)throw Object.assign(a,{message:"EC2 Metadata token request returned error"});return(a.message==="TimeoutError"||[403,404,405].includes(a.statusCode))&&(t=!0),o(n,{...s,timeout:r})}return o(n,{...s,headers:{"x-aws-ec2-metadata-token":i},timeout:r})}}},Ab=async e=>Et({...e,path:bb,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),_b=async e=>(await Et({...e,path:jm})).toString(),kb=async(e,t)=>{let r=JSON.parse((await Et({...t,path:jm+e})).toString());if(!is(r))throw new N("Invalid response received from instance metadata service.");return as(r)};var qm=(e,t)=>{let r={EcsContainer:ds,Ec2InstanceMetadata:ls,Environment:es};if(e in r)return r[e]();throw new N(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`)};var Km=e=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(Rb(e)||Nb(e)),Rb=e=>typeof e.source_profile=="string"&&typeof e.credential_source>"u",Nb=e=>typeof e.credential_source=="string"&&typeof e.source_profile>"u",Gm=async(e,t,r,n={})=>{let o=t[e];if(!r.roleAssumer)throw new N(`Profile ${e} requires a role to be assumed, but no role assumption callback was provided.`,!1);let{source_profile:s}=o;if(s&&s in n)throw new N(`Detected a cycle attempting to resolve credentials for profile ${Fe(r)}. Profiles visited: `+Object.keys(n).join(", "),!1);let i=s?fs(s,t,r,{...n,[s]:!0}):qm(o.credential_source,e)(),a={RoleArn:o.role_arn,RoleSessionName:o.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:o.external_id},{mfa_serial:c}=o;if(c){if(!r.mfaCodeProvider)throw new N(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,!1);a.SerialNumber=c,a.TokenCode=await r.mfaCodeProvider(c)}let d=await i;return r.roleAssumer(d,a)};var Vm=require("child_process"),Wm=require("util");var Hm=(e,t)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let r=new Date;if(new Date(t.Expiration)<r)throw Error(`Profile ${e} credential_process returned expired credentials.`)}return{accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)}}};var Ym=async(e,t)=>{let r=t[e];if(t[e]){let n=r.credential_process;if(n!==void 0){let o=(0,Wm.promisify)(Vm.exec);try{let{stdout:s}=await o(n),i;try{i=JSON.parse(s.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return Hm(e,i)}catch(s){throw new N(s.message)}}else throw new N(`Profile ${e} did not contain credential_process.`)}else throw new N(`Profile ${e} could not be found in shared credentials file.`)};var ms=(e={})=>async()=>{let t=await cr(e);return Ym(Fe(e),t)};var Qm=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",Xm=async(e,t)=>ms({...e,profile:t})();var Nn=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string");var Jm=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssoportal"});var Zm={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.409.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/middleware-host-header":"3.408.0","@aws-sdk/middleware-logger":"3.408.0","@aws-sdk/middleware-recursion-detection":"3.408.0","@aws-sdk/middleware-user-agent":"3.408.0","@aws-sdk/types":"3.408.0","@aws-sdk/util-endpoints":"3.408.0","@aws-sdk/util-user-agent-browser":"3.408.0","@aws-sdk/util-user-agent-node":"3.408.0","@smithy/config-resolver":"^2.0.5","@smithy/fetch-http-handler":"^2.0.5","@smithy/hash-node":"^2.0.5","@smithy/invalid-dependency":"^2.0.5","@smithy/middleware-content-length":"^2.0.5","@smithy/middleware-endpoint":"^2.0.5","@smithy/middleware-retry":"^2.0.5","@smithy/middleware-serde":"^2.0.5","@smithy/middleware-stack":"^2.0.0","@smithy/node-config-provider":"^2.0.6","@smithy/node-http-handler":"^2.0.5","@smithy/protocol-http":"^2.0.5","@smithy/smithy-client":"^2.0.5","@smithy/types":"^2.2.2","@smithy/url-parser":"^2.0.5","@smithy/util-base64":"^2.0.0","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.6","@smithy/util-defaults-mode-node":"^2.0.6","@smithy/util-retry":"^2.0.0","@smithy/util-utf8":"^2.0.0",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}};var us=require("os"),Tn=require("process");var eu=()=>{try{return typeof require=="function"&&typeof module<"u"&&require("aws-crt")?["md/crt-avail"]:null}catch{return null}};var Pb="AWS_SDK_UA_APP_ID",Ib="sdk-ua-app-id",lr=({serviceId:e,clientVersion:t})=>{let r=[["aws-sdk-js",t],["ua","2.0"],[`os/${(0,us.platform)()}`,(0,us.release)()],["lang/js"],["md/nodejs",`${Tn.versions.node}`]],n=eu();n&&r.push(n),e&&r.push([`api/${e}`,t]),Tn.env.AWS_EXECUTION_ENV&&r.push([`exec-env/${Tn.env.AWS_EXECUTION_ENV}`]);let o=F({environmentVariableSelector:i=>i[Pb],configFileSelector:i=>i[Ib],default:void 0})(),s;return async()=>{if(!s){let i=await o;s=i?[...r,[`app/${i}`]]:[...r]}return s}};var ru=require("buffer"),hs=require("crypto"),Le=class{constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(be(tu(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,hs.createHmac)(this.algorithmIdentifier,tu(this.secret)):(0,hs.createHash)(this.algorithmIdentifier)}};function tu(e,t){return ru.Buffer.isBuffer(e)?e:typeof e=="string"?Dr(e,t):ArrayBuffer.isView(e)?ut(e.buffer,e.byteOffset,e.byteLength):ut(e)}var ps=require("fs"),fr=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.from(e).length;if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return(0,ps.lstatSync)(e.path).size;if(typeof e.fd=="number")return(0,ps.fstatSync)(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)};var mu="required",bt="fn",St="argv",Hr="ref",nu="isSet",wt="tree",Gr="error",Pn="endpoint",ma="PartitionResult",ou={[mu]:!1,type:"String"},su={[mu]:!0,default:!1,type:"Boolean"},iu={[Hr]:"Endpoint"},uu={[bt]:"booleanEquals",[St]:[{[Hr]:"UseFIPS"},!0]},hu={[bt]:"booleanEquals",[St]:[{[Hr]:"UseDualStack"},!0]},it={},au={[bt]:"booleanEquals",[St]:[!0,{[bt]:"getAttr",[St]:[{[Hr]:ma},"supportsFIPS"]}]},cu={[bt]:"booleanEquals",[St]:[!0,{[bt]:"getAttr",[St]:[{[Hr]:ma},"supportsDualStack"]}]},du=[uu],lu=[hu],fu=[{[Hr]:"Region"}],vb={version:"1.0",parameters:{Region:ou,UseDualStack:su,UseFIPS:su,Endpoint:ou},rules:[{conditions:[{[bt]:nu,[St]:[iu]}],type:wt,rules:[{conditions:du,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Gr},{conditions:lu,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Gr},{endpoint:{url:iu,properties:it,headers:it},type:Pn}]},{conditions:[{[bt]:nu,[St]:fu}],type:wt,rules:[{conditions:[{[bt]:"aws.partition",[St]:fu,assign:ma}],type:wt,rules:[{conditions:[uu,hu],type:wt,rules:[{conditions:[au,cu],type:wt,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:it,headers:it},type:Pn}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Gr}]},{conditions:du,type:wt,rules:[{conditions:[au],type:wt,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:it,headers:it},type:Pn}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Gr}]},{conditions:lu,type:wt,rules:[{conditions:[cu],type:wt,rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:it,headers:it},type:Pn}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Gr}]},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:it,headers:it},type:Pn}]}]},{error:"Invalid Configuration: Missing Region",type:Gr}]},pu=vb;var yu=(e,t={})=>Gt(pu,{endpointParams:e,logger:t.logger});var gu=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??tt,base64Encoder:e?.base64Encoder??rt,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??yu,extensions:e?.extensions??[],logger:e?.logger??new Ze,serviceId:e?.serviceId??"SSO",urlParser:e?.urlParser??Se,utf8Decoder:e?.utf8Decoder??we,utf8Encoder:e?.utf8Encoder??Oe});var Cu="AWS_EXECUTION_ENV",ua="AWS_REGION",ha="AWS_DEFAULT_REGION",xu="AWS_EC2_METADATA_DISABLED",Eu=["in-region","cross-region","mobile","standard","legacy"],wu="/latest/meta-data/placement/region";var Ob="AWS_DEFAULTS_MODE",Db="defaults_mode",bu={environmentVariableSelector:e=>e[Ob],configFileSelector:e=>e[Db],default:"legacy"};var mr=({region:e=F(Xe),defaultsMode:t=F(bu)}={})=>$t(async()=>{let r=typeof t=="function"?await t():t;switch(r?.toLowerCase()){case"auto":return Bb(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r?.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Eu.join(", ")}, got ${r}`)}}),Bb=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await Mb();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},Mb=async()=>{if(process.env[Cu]&&(process.env[ua]||process.env[ha]))return process.env[ua]??process.env[ha];if(!process.env[xu])try{let e=await Rn();return(await Et({...e,path:wu})).toString()}catch{}};var Su=e=>{ir(process.version);let t=mr(e),r=()=>t().then(sr),n=gu(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??fr,defaultUserAgentProvider:e?.defaultUserAgentProvider??lr({serviceId:n.serviceId,clientVersion:Zm.version}),maxAttempts:e?.maxAttempts??F(er),region:e?.region??F(Xe,Yt),requestHandler:e?.requestHandler??new nt(r),retryMode:e?.retryMode??F({...rr,default:async()=>(await r()).retryMode||Je}),sha256:e?.sha256??Le.bind(null,"sha256"),streamCollector:e?.streamCollector??ot,useDualstackEndpoint:e?.useDualstackEndpoint??F(Vt),useFipsEndpoint:e?.useFipsEndpoint??F(Wt)}};var Fb=e=>e,Au=(e,t)=>{let r={...Fb($r(e))};return t.forEach(n=>n.configure(r)),{...e,...Ur(r)}};var ys=class extends et{constructor(...[t]){let r=Su(t||{}),n=Jm(r),o=Qt(n),s=Zt(o),i=tr(s),a=i,c=qt(a),d=Au(c,t?.extensions||[]);super(d),this.config=d,this.middlewareStack.use(nr(this.config)),this.middlewareStack.use(Jt(this.config)),this.middlewareStack.use(Ft(this.config)),this.middlewareStack.use(Lt(this.config)),this.middlewareStack.use(zt(this.config)),this.middlewareStack.use(Ht(this.config))}destroy(){super.destroy()}};var At=class e extends st{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var gs=class e extends At{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Cs=class e extends At{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},xs=class e extends At{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Es=class e extends At{constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},_u=e=>({...e,...e.accessToken&&{accessToken:Ne}}),Lb=e=>({...e,...e.secretAccessKey&&{secretAccessKey:Ne},...e.sessionToken&&{sessionToken:Ne}}),ku=e=>({...e,...e.roleCredentials&&{roleCredentials:Lb(e.roleCredentials)}});var Ru=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i=j({},Hb,{"x-amz-sso_bearer_token":e.accessToken}),a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/federation/credentials`,c=j({role_name:[,Ue(e.roleName,"roleName")],account_id:[,Ue(e.accountId,"accountId")]}),d;return new $({protocol:n,hostname:r,port:o,method:"GET",headers:i,path:a,query:c,body:d})};var Nu=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return zb(e,t);let r=j({$metadata:In(e)}),n=Ue(Ar(await Tu(e.body,t)),"body"),o=G(n,{roleCredentials:qr});return Object.assign(r,o),r},zb=async(e,t)=>{let r={...e,body:await Vb(e.body,t)},n=Wb(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await Ub(r,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await jb(r,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await qb(r,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await Kb(r,t);default:let o=r.body;return $b({output:e,parsedBody:o,errorCode:n})}};var $b=or(At),Ub=async(e,t)=>{let r=j({}),n=e.body,o=G(n,{message:S});Object.assign(r,o);let s=new gs({$metadata:In(e),...r});return U(s,e.body)},jb=async(e,t)=>{let r=j({}),n=e.body,o=G(n,{message:S});Object.assign(r,o);let s=new Cs({$metadata:In(e),...r});return U(s,e.body)},qb=async(e,t)=>{let r=j({}),n=e.body,o=G(n,{message:S});Object.assign(r,o);let s=new xs({$metadata:In(e),...r});return U(s,e.body)},Kb=async(e,t)=>{let r=j({}),n=e.body,o=G(n,{message:S});Object.assign(r,o);let s=new Es({$metadata:In(e),...r});return U(s,e.body)},In=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Gb=(e,t)=>gt(e,t).then(r=>t.utf8Encoder(r)),Hb=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),Tu=(e,t)=>Gb(e,t).then(r=>r.length?JSON.parse(r):{}),Vb=async(e,t)=>{let r=await Tu(e,t);return r.message=r.message??r.Message,r},Wb=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};var ws=class e extends ye{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(Ae(r,this.serialize,this.deserialize)),this.middlewareStack.use(_e(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOClient",commandName:"GetRoleCredentialsCommand",inputFilterSensitiveLog:_u,outputFilterSensitiveLog:ku},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Ru(t,r)}deserialize(t,r){return Nu(t,r)}};var Yb=e=>({...e,useDualstackEndpoint:e.useDualstackEndpoint??!1,useFipsEndpoint:e.useFipsEndpoint??!1,defaultSigningName:"awsssooidc"}),Qb={version:"3.387.0"},Fu="required",_t="fn",kt="argv",Vr="ref",ya="PartitionResult",at="tree",vn="error",On="endpoint",Pu={[Fu]:!1,type:"String"},Iu={[Fu]:!0,default:!1,type:"Boolean"},Lu={[Vr]:"Endpoint"},zu={[_t]:"booleanEquals",[kt]:[{[Vr]:"UseFIPS"},!0]},$u={[_t]:"booleanEquals",[kt]:[{[Vr]:"UseDualStack"},!0]},ct={},vu={[_t]:"booleanEquals",[kt]:[!0,{[_t]:"getAttr",[kt]:[{[Vr]:ya},"supportsFIPS"]}]},Ou={[_t]:"booleanEquals",[kt]:[!0,{[_t]:"getAttr",[kt]:[{[Vr]:ya},"supportsDualStack"]}]},Du=[Lu],Bu=[zu],Mu=[$u],Xb={version:"1.0",parameters:{Region:Pu,UseDualStack:Iu,UseFIPS:Iu,Endpoint:Pu},rules:[{conditions:[{[_t]:"aws.partition",[kt]:[{[Vr]:"Region"}],assign:ya}],type:at,rules:[{conditions:[{[_t]:"isSet",[kt]:Du},{[_t]:"parseURL",[kt]:Du,assign:"url"}],type:at,rules:[{conditions:Bu,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:vn},{type:at,rules:[{conditions:Mu,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:vn},{endpoint:{url:Lu,properties:ct,headers:ct},type:On}]}]},{conditions:[zu,$u],type:at,rules:[{conditions:[vu,Ou],type:at,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ct,headers:ct},type:On}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:vn}]},{conditions:Bu,type:at,rules:[{conditions:[vu],type:at,rules:[{type:at,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:ct,headers:ct},type:On}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:vn}]},{conditions:Mu,type:at,rules:[{conditions:[Ou],type:at,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ct,headers:ct},type:On}]},{error:"DualStack is enabled but this partition does not support DualStack",type:vn}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:ct,headers:ct},type:On}]}]},Jb=Xb,Zb=(e,t={})=>Gt(Jb,{endpointParams:e,logger:t.logger}),eS=e=>({apiVersion:"2019-06-10",base64Decoder:e?.base64Decoder??tt,base64Encoder:e?.base64Encoder??rt,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Zb,logger:e?.logger??new Ze,serviceId:e?.serviceId??"SSO OIDC",urlParser:e?.urlParser??Se,utf8Decoder:e?.utf8Decoder??we,utf8Encoder:e?.utf8Encoder??Oe}),tS=e=>{ir(process.version);let t=mr(e),r=()=>t().then(sr),n=eS(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??fr,defaultUserAgentProvider:e?.defaultUserAgentProvider??lr({serviceId:n.serviceId,clientVersion:Qb.version}),maxAttempts:e?.maxAttempts??F(er),region:e?.region??F(Xe,Yt),requestHandler:e?.requestHandler??new nt(r),retryMode:e?.retryMode??F({...rr,default:async()=>(await r()).retryMode||Je}),sha256:e?.sha256??Le.bind(null,"sha256"),streamCollector:e?.streamCollector??ot,useDualstackEndpoint:e?.useDualstackEndpoint??F(Vt),useFipsEndpoint:e?.useFipsEndpoint??F(Wt)}},ga=class extends et{constructor(...[e]){let t=tS(e||{}),r=Yb(t),n=Qt(r),o=Zt(n),s=tr(o),i=s,a=qt(i);super(a),this.config=a,this.middlewareStack.use(nr(this.config)),this.middlewareStack.use(Jt(this.config)),this.middlewareStack.use(Ft(this.config)),this.middlewareStack.use(Lt(this.config)),this.middlewareStack.use(zt(this.config)),this.middlewareStack.use(Ht(this.config))}destroy(){super.destroy()}},Te=class Uu extends st{constructor(t){super(t),Object.setPrototypeOf(this,Uu.prototype)}},rS=class ju extends Te{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,ju.prototype),this.error=t.error,this.error_description=t.error_description}},nS=class qu extends Te{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,qu.prototype),this.error=t.error,this.error_description=t.error_description}},oS=class Ku extends Te{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,Ku.prototype),this.error=t.error,this.error_description=t.error_description}},sS=class Gu extends Te{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,Gu.prototype),this.error=t.error,this.error_description=t.error_description}},iS=class Hu extends Te{constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,Hu.prototype),this.error=t.error,this.error_description=t.error_description}},aS=class Vu extends Te{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,Vu.prototype),this.error=t.error,this.error_description=t.error_description}},cS=class Wu extends Te{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,Wu.prototype),this.error=t.error,this.error_description=t.error_description}},dS=class Yu extends Te{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,Yu.prototype),this.error=t.error,this.error_description=t.error_description}},lS=class Qu extends Te{constructor(t){super({name:"SlowDownException",$fault:"client",...t}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,Qu.prototype),this.error=t.error,this.error_description=t.error_description}},fS=class Xu extends Te{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,Xu.prototype),this.error=t.error,this.error_description=t.error_description}},mS=class Ju extends Te{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,Ju.prototype),this.error=t.error,this.error_description=t.error_description}},uS=class Zu extends Te{constructor(t){super({name:"InvalidClientMetadataException",$fault:"client",...t}),this.name="InvalidClientMetadataException",this.$fault="client",Object.setPrototypeOf(this,Zu.prototype),this.error=t.error,this.error_description=t.error_description}},hS=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/token`,c;return c=JSON.stringify(G(e,{clientId:[],clientSecret:[],code:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:d=>qr(d)})),new $({protocol:n,hostname:r,port:o,method:"POST",headers:i,path:a,body:c})},pS=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/client/register`,c;return c=JSON.stringify(G(e,{clientName:[],clientType:[],scopes:d=>qr(d)})),new $({protocol:n,hostname:r,port:o,method:"POST",headers:i,path:a,body:c})},yS=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/device_authorization`,c;return c=JSON.stringify(G(e,{clientId:[],clientSecret:[],startUrl:[]})),new $({protocol:n,hostname:r,port:o,method:"POST",headers:i,path:a,body:c})},gS=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return CS(e,t);let r=j({$metadata:xe(e)}),n=Ue(Ar(await bs(e.body,t)),"body"),o=G(n,{accessToken:S,expiresIn:zr,idToken:S,refreshToken:S,tokenType:S});return Object.assign(r,o),r},CS=async(e,t)=>{let r={...e,body:await wa(e.body,t)},n=ba(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await SS(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await AS(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await _S(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await xa(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await eh(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await RS(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await Ea(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await th(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await rh(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await nh(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await NS(r,t);default:let o=r.body;return Ca({output:e,parsedBody:o,errorCode:n})}},xS=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ES(e,t);let r=j({$metadata:xe(e)}),n=Ue(Ar(await bs(e.body,t)),"body"),o=G(n,{authorizationEndpoint:S,clientId:S,clientIdIssuedAt:Uo,clientSecret:S,clientSecretExpiresAt:Uo,tokenEndpoint:S});return Object.assign(r,o),r},ES=async(e,t)=>{let r={...e,body:await wa(e.body,t)},n=ba(e,r.body);switch(n){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await xa(r,t);case"InvalidClientMetadataException":case"com.amazonaws.ssooidc#InvalidClientMetadataException":throw await kS(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await Ea(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await th(r,t);default:let o=r.body;return Ca({output:e,parsedBody:o,errorCode:n})}},wS=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return bS(e,t);let r=j({$metadata:xe(e)}),n=Ue(Ar(await bs(e.body,t)),"body"),o=G(n,{deviceCode:S,expiresIn:zr,interval:zr,userCode:S,verificationUri:S,verificationUriComplete:S});return Object.assign(r,o),r},bS=async(e,t)=>{let r={...e,body:await wa(e.body,t)},n=ba(e,r.body);switch(n){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await xa(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await eh(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await Ea(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await rh(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await nh(r,t);default:let o=r.body;return Ca({output:e,parsedBody:o,errorCode:n})}},Ca=or(Te),SS=async(e,t)=>{let r=j({}),n=e.body,o=G(n,{error:S,error_description:S});Object.assign(r,o);let s=new rS({$metadata:xe(e),...r});return U(s,e.body)},AS=async(e,t)=>{let r=j({}),n=e.body,o=G(n,{error:S,error_description:S});Object.assign(r,o);let s=new nS({$metadata:xe(e),...r});return U(s,e.body)},_S=async(e,t)=>{let r=j({}),n=e.body,o=G(n,{error:S,error_description:S});Object.assign(r,o);let s=new oS({$metadata:xe(e),...r});return U(s,e.body)},xa=async(e,t)=>{let r=j({}),n=e.body,o=G(n,{error:S,error_description:S});Object.assign(r,o);let s=new sS({$metadata:xe(e),...r});return U(s,e.body)},eh=async(e,t)=>{let r=j({}),n=e.body,o=G(n,{error:S,error_description:S});Object.assign(r,o);let s=new iS({$metadata:xe(e),...r});return U(s,e.body)},kS=async(e,t)=>{let r=j({}),n=e.body,o=G(n,{error:S,error_description:S});Object.assign(r,o);let s=new uS({$metadata:xe(e),...r});return U(s,e.body)},RS=async(e,t)=>{let r=j({}),n=e.body,o=G(n,{error:S,error_description:S});Object.assign(r,o);let s=new aS({$metadata:xe(e),...r});return U(s,e.body)},Ea=async(e,t)=>{let r=j({}),n=e.body,o=G(n,{error:S,error_description:S});Object.assign(r,o);let s=new cS({$metadata:xe(e),...r});return U(s,e.body)},th=async(e,t)=>{let r=j({}),n=e.body,o=G(n,{error:S,error_description:S});Object.assign(r,o);let s=new dS({$metadata:xe(e),...r});return U(s,e.body)},rh=async(e,t)=>{let r=j({}),n=e.body,o=G(n,{error:S,error_description:S});Object.assign(r,o);let s=new lS({$metadata:xe(e),...r});return U(s,e.body)},nh=async(e,t)=>{let r=j({}),n=e.body,o=G(n,{error:S,error_description:S});Object.assign(r,o);let s=new fS({$metadata:xe(e),...r});return U(s,e.body)},NS=async(e,t)=>{let r=j({}),n=e.body,o=G(n,{error:S,error_description:S});Object.assign(r,o);let s=new mS({$metadata:xe(e),...r});return U(s,e.body)},xe=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),TS=(e,t)=>gt(e,t).then(r=>t.utf8Encoder(r)),bs=(e,t)=>TS(e,t).then(r=>r.length?JSON.parse(r):{}),wa=async(e,t)=>{let r=await bs(e,t);return r.message=r.message??r.Message,r},ba=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)},Sa=class oh extends ye{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(Ae(r,this.serialize,this.deserialize)),this.middlewareStack.use(_e(r,oh.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return hS(t,r)}deserialize(t,r){return gS(t,r)}},PS=class sh extends ye{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(Ae(r,this.serialize,this.deserialize)),this.middlewareStack.use(_e(r,sh.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"RegisterClientCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return pS(t,r)}deserialize(t,r){return xS(t,r)}},IS=class ih extends ye{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(Ae(r,this.serialize,this.deserialize)),this.middlewareStack.use(_e(r,ih.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"StartDeviceAuthorizationCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return yS(t,r)}deserialize(t,r){return wS(t,r)}},vS={CreateTokenCommand:Sa,RegisterClientCommand:PS,StartDeviceAuthorizationCommand:IS},OS=class extends ga{};Gl(vS,OS);var Wr="To refresh this SSO session run 'aws sso login' with the corresponding profile.";var Aa={},ah=e=>{if(Aa[e])return Aa[e];let t=new ga({region:e});return Aa[e]=t,t};var ch=(e,t)=>ah(t).send(new Sa({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}));var _a=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new ve(`Token is expired. ${Wr}`,!1)};var ur=(e,t,r=!1)=>{if(typeof t>"u")throw new ve(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${Wr}`,!1)};var dh=require("fs"),{writeFile:DS}=dh.promises,lh=(e,t)=>{let r=ts(e),n=JSON.stringify(t,null,2);return DS(r,n)};var fh=new Date(0),mh=(e={})=>async()=>{let t=await cr(e),r=Fe(e),n=t[r];if(n){if(!n.sso_session)throw new ve(`Profile '${r}' is missing required property 'sso_session'.`)}else throw new ve(`Profile '${r}' could not be found in shared credentials file.`,!1);let o=n.sso_session,i=(await ss(e))[o];if(!i)throw new ve(`Sso session '${o}' could not be found in shared credentials file.`,!1);for(let g of["sso_start_url","sso_region"])if(!i[g])throw new ve(`Sso session '${o}' is missing required property '${g}'.`,!1);let a=i.sso_start_url,c=i.sso_region,d;try{d=await rs(o)}catch{throw new ve(`The SSO session token associated with profile=${r} was not found or is invalid. ${Wr}`,!1)}ur("accessToken",d.accessToken),ur("expiresAt",d.expiresAt);let{accessToken:l,expiresAt:u}=d,h={token:l,expiration:new Date(u)};if(h.expiration.getTime()-Date.now()>3e5)return h;if(Date.now()-fh.getTime()<30*1e3)return _a(h),h;ur("clientId",d.clientId,!0),ur("clientSecret",d.clientSecret,!0),ur("refreshToken",d.refreshToken,!0);try{fh.setTime(Date.now());let g=await ch(d,c);ur("accessToken",g.accessToken),ur("expiresIn",g.expiresIn);let w=new Date(Date.now()+g.expiresIn*1e3);try{await lh(o,{...d,accessToken:g.accessToken,expiresAt:w.toISOString(),refreshToken:g.refreshToken})}catch{}return{token:g.accessToken,expiration:w}}catch{return _a(h),h}};var Dn=!1,ka=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,profile:i})=>{let a,c="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let E=await mh({profile:i})();a={accessToken:E.token,expiresAt:new Date(E.expiration).toISOString()}}catch(E){throw new N(E.message,Dn)}else try{a=await rs(e)}catch{throw new N(`The SSO session associated with this profile is invalid. ${c}`,Dn)}if(new Date(a.expiresAt).getTime()-Date.now()<=0)throw new N(`The SSO session associated with this profile has expired. ${c}`,Dn);let{accessToken:d}=a,l=s||new ys({region:n}),u;try{u=await l.send(new ws({accountId:r,roleName:o,accessToken:d}))}catch(E){throw N.from(E,Dn)}let{roleCredentials:{accessKeyId:h,secretAccessKey:g,sessionToken:w,expiration:b}={}}=u;if(!h||!g||!w||!b)throw new N("SSO returns an invalid temporary credential.",Dn);return{accessKeyId:h,secretAccessKey:g,sessionToken:w,expiration:new Date(b)}};var Ss=e=>{let{sso_start_url:t,sso_account_id:r,sso_region:n,sso_role_name:o}=e;if(!t||!r||!n||!o)throw new N(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return e};var As=(e={})=>async()=>{let{ssoStartUrl:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,ssoSession:i}=e,a=Fe(e);if(!t&&!r&&!n&&!o&&!i){let d=(await cr(e))[a];if(!d)throw new N(`Profile ${a} was not found.`);if(!Nn(d))throw new N(`Profile ${a} is not configured with SSO credentials.`);if(d?.sso_session){let E=(await ss(e))[d.sso_session],he=` configurations in profile ${a} and sso-session ${d.sso_session}`;if(n&&n!==E.sso_region)throw new N("Conflicting SSO region"+he,!1);if(t&&t!==E.sso_start_url)throw new N("Conflicting SSO start_url"+he,!1);d.sso_region=E.sso_region,d.sso_start_url=E.sso_start_url}let{sso_start_url:l,sso_account_id:u,sso_region:h,sso_role_name:g,sso_session:w}=Ss(d);return ka({ssoStartUrl:l,ssoSession:w,ssoAccountId:u,ssoRegion:h,ssoRoleName:g,ssoClient:s,profile:a})}else{if(!t||!r||!n||!o)throw new N('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return ka({ssoStartUrl:t,ssoSession:i,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,profile:a})}};var uh=e=>{let{sso_start_url:t,sso_account_id:r,sso_session:n,sso_region:o,sso_role_name:s}=Ss(e);return As({ssoStartUrl:t,ssoAccountId:r,ssoSession:n,ssoRegion:o,ssoRoleName:s})()};var Ra=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1,Na=e=>Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token});var ph=require("fs");var hh=e=>()=>{let{roleArn:t,roleSessionName:r,webIdentityToken:n,providerId:o,policyArns:s,policy:i,durationSeconds:a,roleAssumerWithWebIdentity:c}=e;if(!c)throw new N(`Role Arn '${t}' needs to be assumed with web identity, but no role assumption callback was provided.`,!1);return c({RoleArn:t,RoleSessionName:r??`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:o,PolicyArns:s,Policy:i,DurationSeconds:a})};var MS="AWS_WEB_IDENTITY_TOKEN_FILE",FS="AWS_ROLE_ARN",LS="AWS_ROLE_SESSION_NAME",_s=(e={})=>async()=>{let t=e?.webIdentityTokenFile??process.env[MS],r=e?.roleArn??process.env[FS],n=e?.roleSessionName??process.env[LS];if(!t||!r)throw new N("Web identity configuration not specified");return hh({...e,webIdentityToken:(0,ph.readFileSync)(t,{encoding:"ascii"}),roleArn:r,roleSessionName:n})()};var yh=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,gh=async(e,t)=>_s({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity})();var fs=async(e,t,r,n={})=>{let o=t[e];if(Object.keys(n).length>0&&Ra(o))return Na(o);if(Km(o))return Gm(e,t,r,n);if(Ra(o))return Na(o);if(yh(o))return gh(o,r);if(Qm(o))return Xm(r,e);if(Nn(o))return uh(o);throw new N(`Profile ${e} could not be found or parsed in shared credentials file.`)};var Ch=(e={})=>async()=>{let t=await cr(e);return fs(Fe(e),t,e)};var zS="AWS_EC2_METADATA_DISABLED",xh=e=>process.env[_n]||process.env[An]?ds(e):process.env[zS]?async()=>{throw new N("EC2 Instance Metadata Service access disabled")}:ls(e);var ks=(e={})=>$t(Jn(...e.profile||process.env[da]?[]:[es()],As(e),Ch(e),ms(e),_s(e),xh(e),async()=>{throw new N("Could not load credentials from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);var Ph="required",I="type",L="fn",z="argv",hr="ref";var kr="booleanEquals",dt="tree",fe="stringEquals",Ih="sigv4",vh="sts",Oh="us-east-1",H="endpoint",Eh="https://sts.{Region}.{PartitionResult#dnsSuffix}",Yr="error",Pa="getAttr",wh={[Ph]:!1,[I]:"String"},Ta={[Ph]:!0,default:!1,[I]:"Boolean"},Dh={[hr]:"Endpoint"},bh={[L]:"isSet",[z]:[{[hr]:"Region"}]},me={[hr]:"Region"},Sh={[L]:"aws.partition",[z]:[me],assign:"PartitionResult"},Bh={[hr]:"UseFIPS"},Mh={[hr]:"UseDualStack"},ge={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:Ih,signingName:vh,signingRegion:Oh}]},headers:{}},Pe={},Ah={conditions:[{[L]:fe,[z]:[me,"aws-global"]}],[H]:ge,[I]:H},Fh={[L]:kr,[z]:[Bh,!0]},Lh={[L]:kr,[z]:[Mh,!0]},_h={[L]:kr,[z]:[!0,{[L]:Pa,[z]:[{[hr]:"PartitionResult"},"supportsFIPS"]}]},zh={[hr]:"PartitionResult"},kh={[L]:kr,[z]:[!0,{[L]:Pa,[z]:[zh,"supportsDualStack"]}]},Rh=[{[L]:"isSet",[z]:[Dh]}],Nh=[Fh],Th=[Lh],$S={version:"1.0",parameters:{Region:wh,UseDualStack:Ta,UseFIPS:Ta,Endpoint:wh,UseGlobalEndpoint:Ta},rules:[{conditions:[{[L]:kr,[z]:[{[hr]:"UseGlobalEndpoint"},!0]},{[L]:"not",[z]:Rh},bh,Sh,{[L]:kr,[z]:[Bh,!1]},{[L]:kr,[z]:[Mh,!1]}],[I]:dt,rules:[{conditions:[{[L]:fe,[z]:[me,"ap-northeast-1"]}],endpoint:ge,[I]:H},{conditions:[{[L]:fe,[z]:[me,"ap-south-1"]}],endpoint:ge,[I]:H},{conditions:[{[L]:fe,[z]:[me,"ap-southeast-1"]}],endpoint:ge,[I]:H},{conditions:[{[L]:fe,[z]:[me,"ap-southeast-2"]}],endpoint:ge,[I]:H},Ah,{conditions:[{[L]:fe,[z]:[me,"ca-central-1"]}],endpoint:ge,[I]:H},{conditions:[{[L]:fe,[z]:[me,"eu-central-1"]}],endpoint:ge,[I]:H},{conditions:[{[L]:fe,[z]:[me,"eu-north-1"]}],endpoint:ge,[I]:H},{conditions:[{[L]:fe,[z]:[me,"eu-west-1"]}],endpoint:ge,[I]:H},{conditions:[{[L]:fe,[z]:[me,"eu-west-2"]}],endpoint:ge,[I]:H},{conditions:[{[L]:fe,[z]:[me,"eu-west-3"]}],endpoint:ge,[I]:H},{conditions:[{[L]:fe,[z]:[me,"sa-east-1"]}],endpoint:ge,[I]:H},{conditions:[{[L]:fe,[z]:[me,Oh]}],endpoint:ge,[I]:H},{conditions:[{[L]:fe,[z]:[me,"us-east-2"]}],endpoint:ge,[I]:H},{conditions:[{[L]:fe,[z]:[me,"us-west-1"]}],endpoint:ge,[I]:H},{conditions:[{[L]:fe,[z]:[me,"us-west-2"]}],endpoint:ge,[I]:H},{endpoint:{url:Eh,properties:{authSchemes:[{name:Ih,signingName:vh,signingRegion:"{Region}"}]},headers:Pe},[I]:H}]},{conditions:Rh,[I]:dt,rules:[{conditions:Nh,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[I]:Yr},{conditions:Th,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[I]:Yr},{endpoint:{url:Dh,properties:Pe,headers:Pe},[I]:H}]},{conditions:[bh],[I]:dt,rules:[{conditions:[Sh],[I]:dt,rules:[{conditions:[Fh,Lh],[I]:dt,rules:[{conditions:[_h,kh],[I]:dt,rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Pe,headers:Pe},[I]:H}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[I]:Yr}]},{conditions:Nh,[I]:dt,rules:[{conditions:[_h],[I]:dt,rules:[{conditions:[{[L]:fe,[z]:["aws-us-gov",{[L]:Pa,[z]:[zh,"name"]}]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:Pe,headers:Pe},[I]:H},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:Pe,headers:Pe},[I]:H}]},{error:"FIPS is enabled but this partition does not support FIPS",[I]:Yr}]},{conditions:Th,[I]:dt,rules:[{conditions:[kh],[I]:dt,rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:Pe,headers:Pe},[I]:H}]},{error:"DualStack is enabled but this partition does not support DualStack",[I]:Yr}]},Ah,{endpoint:{url:Eh,properties:Pe,headers:Pe},[I]:H}]}]},{error:"Invalid Configuration: Missing Region",[I]:Yr}]},$h=$S;var Uh=(e,t={})=>Gt($h,{endpointParams:e,logger:t.logger});var jh=e=>({apiVersion:"2011-06-15",base64Decoder:e?.base64Decoder??tt,base64Encoder:e?.base64Encoder??rt,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??Uh,extensions:e?.extensions??[],logger:e?.logger??new Ze,serviceId:e?.serviceId??"STS",urlParser:e?.urlParser??Se,utf8Decoder:e?.utf8Decoder??we,utf8Encoder:e?.utf8Encoder??Oe});var qh=e=>{ir(process.version);let t=mr(e),r=()=>t().then(sr),n=jh(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??fr,credentialDefaultProvider:e?.credentialDefaultProvider??ym(ks),defaultUserAgentProvider:e?.defaultUserAgentProvider??lr({serviceId:n.serviceId,clientVersion:pf.version}),maxAttempts:e?.maxAttempts??F(er),region:e?.region??F(Xe,Yt),requestHandler:e?.requestHandler??new nt(r),retryMode:e?.retryMode??F({...rr,default:async()=>(await r()).retryMode||Je}),sha256:e?.sha256??Le.bind(null,"sha256"),streamCollector:e?.streamCollector??ot,useDualstackEndpoint:e?.useDualstackEndpoint??F(Vt),useFipsEndpoint:e?.useFipsEndpoint??F(Wt)}};var US=e=>e,Kh=(e,t)=>{let r={...US($r(e))};return t.forEach(n=>n.configure(r)),{...e,...Ur(r)}};var Bn=class e extends et{constructor(...[t]){let r=qh(t||{}),n=hf(r),o=Qt(n),s=Zt(o),i=tr(s),a=i,c=uf(a,{stsClientCtor:e}),d=qt(c),l=Kh(d,t?.extensions||[]);super(l),this.config=l,this.middlewareStack.use(nr(this.config)),this.middlewareStack.use(Jt(this.config)),this.middlewareStack.use(Ft(this.config)),this.middlewareStack.use(Lt(this.config)),this.middlewareStack.use(zt(this.config)),this.middlewareStack.use(Ht(this.config))}destroy(){super.destroy()}};var Gh=(e,t)=>t?class extends e{constructor(n){super(n);for(let o of t)this.middlewareStack.use(o)}}:e,jS=(e={},t)=>ia(e,Gh(Bn,t)),qS=(e={},t)=>aa(e,Gh(Bn,t)),Hh=e=>t=>e({roleAssumer:jS(t),roleAssumerWithWebIdentity:qS(t),...t});var KS="AWS_S3_USE_ARN_REGION",GS="s3_use_arn_region",Vh={environmentVariableSelector:e=>Qe(e,KS,Be.ENV),configFileSelector:e=>Qe(e,GS,Be.CONFIG),default:!1};function Wh(e){let t=0,r=0,n=null,o=null,s=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);t=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},i=async function*(){let a=e[Symbol.asyncIterator]();for(;;){let{value:c,done:d}=await a.next();if(d){if(t)if(t===r)yield n;else throw new Error("Truncated event message received.");else return;return}let l=c.length,u=0;for(;u<l;){if(!n){let g=l-u;o||(o=new Uint8Array(4));let w=Math.min(4-r,g);if(o.set(c.slice(u,u+w),r),r+=w,u+=w,r<4)break;s(new DataView(o.buffer).getUint32(0,!1)),o=null}let h=Math.min(t-r,l-u);n.set(c.slice(u,u+h),r),r+=h,u+=h,t&&t===r&&(yield n,n=null,t=0,r=0)}}};return{[Symbol.asyncIterator]:i}}function Yh(e,t){return async function(r){let{value:n}=r.headers[":message-type"];if(n==="error"){let o=new Error(r.headers[":error-message"].value||"UnknownError");throw o.name=r.headers[":error-code"].value,o}else if(n==="exception"){let o=r.headers[":exception-type"].value,s={[o]:r},i=await e(s);if(i.$unknown){let a=new Error(t(r.body));throw a.name=o,a}throw i[o]}else if(n==="event"){let o={[r.headers[":event-type"].value]:r},s=await e(o);return s.$unknown?void 0:s}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}var Mn=class{constructor({utf8Encoder:t,utf8Decoder:r}){this.eventStreamCodec=new oo(t,r),this.utfEncoder=t}deserialize(t,r){let n=Wh(t);return new ao({messageStream:new so({inputStream:n,decoder:this.eventStreamCodec}),deserializer:Yh(r,this.utfEncoder)})}serialize(t,r){return new io({messageStream:new co({inputStream:t,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};var Xh=require("stream");async function*Qh(e){let t=!1,r=!1,n=new Array;for(e.on("error",o=>{if(t||(t=!0),o)throw o}),e.on("data",o=>{n.push(o)}),e.on("end",()=>{t=!0});!r;){let o=await new Promise(s=>setTimeout(()=>s(n.shift()),0));o&&(yield o),r=t&&n.length===0}}var Rs=class{constructor({utf8Encoder:t,utf8Decoder:r}){this.universalMarshaller=new Mn({utf8Decoder:r,utf8Encoder:t})}deserialize(t,r){let n=typeof t[Symbol.asyncIterator]=="function"?t:Qh(t);return this.universalMarshaller.deserialize(n,r)}serialize(t,r){return Xh.Readable.from(this.universalMarshaller.serialize(t,r))}};var Jh=e=>new Rs(e);var Zh=require("stream"),Fn=class extends Zh.Writable{constructor(t,r){super(r),this.hash=t}_write(t,r,n){try{this.hash.update(be(t))}catch(o){return n(o)}n()}};var ep=(e,t)=>{if(t.readableFlowing!==null)throw new Error("Unable to calculate hash for flowing readable stream");let r=new e,n=new Fn(r);return t.pipe(n),new Promise((o,s)=>{t.on("error",i=>{n.end(),s(i)}),n.on("error",s),n.on("finish",()=>{r.digest().then(o).catch(s)})})};var Ns=class{constructor(t){this.sigv4Signer=new wr(t),this.signerOptions=t}async sign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().sign(t,r)}return this.sigv4Signer.sign(t,r)}async presign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().presign(t,r)}return this.sigv4Signer.presign(t,r)}getSigv4aSigner(){if(!this.sigv4aSigner){let t;try{if(t=typeof require=="function"&&require("@aws-sdk/signature-v4-crt").CrtSignerV4,typeof t!="function")throw new Error}catch(r){throw r.message=`${r.message}
Please check if you have installed "@aws-sdk/signature-v4-crt" package explicitly. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`,r}this.sigv4aSigner=new t({...this.signerOptions,signingAlgorithm:1})}return this.sigv4aSigner}};var nc="required",f="type",m="conditions",p="fn",y="argv",P="ref",ue="assign",_="url",k="properties",Nt="authSchemes",Tt="disableDoubleEncoding",Pt="signingName",gr="signingRegion",R="headers";var lt="isSet",C="tree",Ce="booleanEquals",A="error",vs="aws.partition",Y="stringEquals",X="getAttr",ze="name",Ln="substring",Vp="hardwareType",Wp="regionPrefix",tp="bucketAliasSuffix",ec="outpostId",Rr="isValidHostLabel",qe="not",Yp="parseURL",oc="s3-outposts",x="endpoint",rp="aws.isVirtualHostableS3Bucket",Xr="s3",Qp="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",Xp="{url#scheme}://{Bucket}.{url#authority}{url#path}",Jp="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",np="https://{Bucket}.s3.{partitionResult#dnsSuffix}",Zp="aws.parseArn",ey="bucketArn",ty="arnType",Os="",sc="s3-object-lambda",ry="accesspoint",ic="accessPointName",op="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",sp="mrapPartition",ip="outpostType",ap="arnPrefix",ny="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",cp="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",tc="{url#scheme}://{url#authority}{url#path}",dp="https://s3.{partitionResult#dnsSuffix}",Ia={[nc]:!1,[f]:"String"},Qr={[nc]:!0,default:!1,[f]:"Boolean"},va={[nc]:!1,[f]:"Boolean"},je={[p]:Ce,[y]:[{[P]:"Accelerate"},!0]},V={[p]:Ce,[y]:[{[P]:"UseFIPS"},!0]},q={[p]:Ce,[y]:[{[P]:"UseDualStack"},!0]},Q={[p]:lt,[y]:[{[P]:"Endpoint"}]},oy={[p]:vs,[y]:[{[P]:"Region"}],[ue]:"partitionResult"},lp={[p]:Y,[y]:[{[p]:X,[y]:[{[P]:"partitionResult"},ze]},"aws-cn"]},sy={[p]:lt,[y]:[{[P]:"Bucket"}]},Rt={[P]:"Bucket"},fp={[P]:Vp},mp={[m]:[{[p]:qe,[y]:[Q]}],[A]:"Expected a endpoint to be specified but no endpoint was found",[f]:A},T={[p]:qe,[y]:[Q]},Ee={[p]:Yp,[y]:[{[P]:"Endpoint"}],[ue]:"url"},Ts={[Nt]:[{[Tt]:!0,[ze]:"sigv4",[Pt]:oc,[gr]:"{Region}"}]},O={},Oa={[p]:Ce,[y]:[{[P]:"ForcePathStyle"},!1]},t0={[P]:"ForcePathStyle"},ee={[p]:Ce,[y]:[{[P]:"Accelerate"},!1]},re={[p]:Y,[y]:[{[P]:"Region"},"aws-global"]},oe={[Nt]:[{[Tt]:!0,[ze]:"sigv4",[Pt]:Xr,[gr]:"us-east-1"}]},M={[p]:qe,[y]:[re]},se={[p]:Ce,[y]:[{[P]:"UseGlobalEndpoint"},!0]},up={[_]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:{[Nt]:[{[Tt]:!0,[ze]:"sigv4",[Pt]:Xr,[gr]:"{Region}"}]},[R]:{}},te={[Nt]:[{[Tt]:!0,[ze]:"sigv4",[Pt]:Xr,[gr]:"{Region}"}]},ie={[p]:Ce,[y]:[{[P]:"UseGlobalEndpoint"},!1]},D={[p]:Ce,[y]:[{[P]:"UseDualStack"},!1]},hp={[_]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[k]:te,[R]:{}},v={[p]:Ce,[y]:[{[P]:"UseFIPS"},!1]},pp={[_]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[k]:te,[R]:{}},yp={[_]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:te,[R]:{}},Da={[p]:Ce,[y]:[{[p]:X,[y]:[{[P]:"url"},"isIp"]},!0]},iy={[P]:"url"},Ba={[p]:Ce,[y]:[{[p]:X,[y]:[iy,"isIp"]},!1]},Ma={[_]:Qp,[k]:te,[R]:{}},rc={[_]:Xp,[k]:te,[R]:{}},gp={[x]:rc,[f]:x},Fa={[_]:Jp,[k]:te,[R]:{}},Cp={[_]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[k]:te,[R]:{}},Ps={[A]:"Invalid region: region was not a valid DNS name.",[f]:A},Re={[P]:ey},ay={[P]:ty},La={[p]:X,[y]:[Re,"service"]},ac={[P]:ic},xp={[m]:[q],[A]:"S3 Object Lambda does not support Dual-stack",[f]:A},Ep={[m]:[je],[A]:"S3 Object Lambda does not support S3 Accelerate",[f]:A},wp={[m]:[{[p]:lt,[y]:[{[P]:"DisableAccessPoints"}]},{[p]:Ce,[y]:[{[P]:"DisableAccessPoints"},!0]}],[A]:"Access points are not supported for this operation",[f]:A},za={[m]:[{[p]:lt,[y]:[{[P]:"UseArnRegion"}]},{[p]:Ce,[y]:[{[P]:"UseArnRegion"},!1]},{[p]:qe,[y]:[{[p]:Y,[y]:[{[p]:X,[y]:[Re,"region"]},"{Region}"]}]}],[A]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[f]:A},cy={[p]:X,[y]:[{[P]:"bucketPartition"},ze]},dy={[p]:X,[y]:[Re,"accountId"]},$a={[Nt]:[{[Tt]:!0,[ze]:"sigv4",[Pt]:sc,[gr]:"{bucketArn#region}"}]},bp={[A]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[f]:A},Ua={[A]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[f]:A},ja={[A]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[f]:A},qa={[A]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[f]:A},Sp={[A]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[f]:A},Ap={[A]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[f]:A},zn={[Nt]:[{[Tt]:!0,[ze]:"sigv4",[Pt]:Xr,[gr]:"{bucketArn#region}"}]},_p={[Nt]:[{[Tt]:!0,[ze]:"sigv4",[Pt]:oc,[gr]:"{bucketArn#region}"}]},kp={[p]:Zp,[y]:[Rt]},Rp={[_]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:te,[R]:{}},Np={[_]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:te,[R]:{}},Tp={[_]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:te,[R]:{}},Ka={[_]:ny,[k]:te,[R]:{}},Pp={[_]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:te,[R]:{}},Ip={[P]:"UseObjectLambdaEndpoint"},Ga={[Nt]:[{[Tt]:!0,[ze]:"sigv4",[Pt]:sc,[gr]:"{Region}"}]},vp={[_]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:te,[R]:{}},Op={[_]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[k]:te,[R]:{}},Dp={[_]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:te,[R]:{}},Ha={[_]:tc,[k]:te,[R]:{}},Bp={[_]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[k]:te,[R]:{}},Va=[{[P]:"Region"}],r0=[{[P]:"Endpoint"}],Mp=[Rt],Fp=[{[p]:Rr,[y]:[{[P]:ec},!1]}],Lp=[{[p]:Y,[y]:[{[P]:Wp},"beta"]}],$n=[Q,Ee],zp=[sy],pr=[oy],$p=[{[p]:Rr,[y]:[{[P]:"Region"},!1]}],yr=[{[p]:Y,[y]:[{[P]:"Region"},"us-east-1"]}],Wa=[{[p]:Y,[y]:[ay,ry]}],Up=[{[p]:X,[y]:[Re,"resourceId[1]"],[ue]:ic},{[p]:qe,[y]:[{[p]:Y,[y]:[ac,Os]}]}],n0=[Re,"resourceId[1]"],jp=[q],Ya=[je],Qa=[{[p]:qe,[y]:[{[p]:Y,[y]:[{[p]:X,[y]:[Re,"region"]},Os]}]}],qp=[{[p]:qe,[y]:[{[p]:lt,[y]:[{[p]:X,[y]:[Re,"resourceId[2]"]}]}]}],o0=[Re,"resourceId[2]"],Xa=[{[p]:vs,[y]:[{[p]:X,[y]:[Re,"region"]}],[ue]:"bucketPartition"}],Kp=[{[p]:Y,[y]:[cy,{[p]:X,[y]:[{[P]:"partitionResult"},ze]}]}],Ja=[{[p]:Rr,[y]:[{[p]:X,[y]:[Re,"region"]},!0]}],Za=[{[p]:Rr,[y]:[dy,!1]}],Gp=[{[p]:Rr,[y]:[ac,!1]}],Is=[V],Hp=[{[p]:Rr,[y]:[{[P]:"Region"},!0]}],s0={version:"1.0",parameters:{Bucket:Ia,Region:Ia,UseFIPS:Qr,UseDualStack:Qr,Endpoint:Ia,ForcePathStyle:Qr,Accelerate:Qr,UseGlobalEndpoint:Qr,UseObjectLambdaEndpoint:va,DisableAccessPoints:va,DisableMultiRegionAccessPoints:Qr,UseArnRegion:va},rules:[{[m]:[{[p]:lt,[y]:Va}],[f]:C,rules:[{[m]:[je,V],error:"Accelerate cannot be used with FIPS",[f]:A},{[m]:[q,Q],error:"Cannot set dual-stack in combination with a custom endpoint.",[f]:A},{[m]:[Q,V],error:"A custom endpoint cannot be combined with FIPS",[f]:A},{[m]:[Q,je],error:"A custom endpoint cannot be combined with S3 Accelerate",[f]:A},{[m]:[V,oy,lp],error:"Partition does not support FIPS",[f]:A},{[m]:[sy,{[p]:Ln,[y]:[Rt,49,50,!0],[ue]:Vp},{[p]:Ln,[y]:[Rt,8,12,!0],[ue]:Wp},{[p]:Ln,[y]:[Rt,0,7,!0],[ue]:tp},{[p]:Ln,[y]:[Rt,32,49,!0],[ue]:ec},{[p]:vs,[y]:Va,[ue]:"regionPartition"},{[p]:Y,[y]:[{[P]:tp},"--op-s3"]}],[f]:C,rules:[{[m]:Fp,[f]:C,rules:[{[m]:[{[p]:Y,[y]:[fp,"e"]}],[f]:C,rules:[{[m]:Lp,[f]:C,rules:[mp,{[m]:$n,endpoint:{[_]:"https://{Bucket}.ec2.{url#authority}",[k]:Ts,[R]:O},[f]:x}]},{endpoint:{[_]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[k]:Ts,[R]:O},[f]:x}]},{[m]:[{[p]:Y,[y]:[fp,"o"]}],[f]:C,rules:[{[m]:Lp,[f]:C,rules:[mp,{[m]:$n,endpoint:{[_]:"https://{Bucket}.op-{outpostId}.{url#authority}",[k]:Ts,[R]:O},[f]:x}]},{endpoint:{[_]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[k]:Ts,[R]:O},[f]:x}]},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[f]:A}]},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[f]:A}]},{[m]:zp,[f]:C,rules:[{[m]:[Q,{[p]:qe,[y]:[{[p]:lt,[y]:[{[p]:Yp,[y]:r0}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[f]:A},{[m]:[Oa,{[p]:rp,[y]:[Rt,!1]}],[f]:C,rules:[{[m]:pr,[f]:C,rules:[{[m]:$p,[f]:C,rules:[{[m]:[je,lp],error:"S3 Accelerate cannot be used in this region",[f]:A},{[m]:[q,V,ee,T,re],endpoint:{[_]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:oe,[R]:O},[f]:x},{[m]:[q,V,ee,T,M,se],[f]:C,rules:[{endpoint:up,[f]:x}]},{[m]:[q,V,ee,T,M,ie],endpoint:up,[f]:x},{[m]:[D,V,ee,T,re],endpoint:{[_]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[k]:oe,[R]:O},[f]:x},{[m]:[D,V,ee,T,M,se],[f]:C,rules:[{endpoint:hp,[f]:x}]},{[m]:[D,V,ee,T,M,ie],endpoint:hp,[f]:x},{[m]:[q,v,je,T,re],endpoint:{[_]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:oe,[R]:O},[f]:x},{[m]:[q,v,je,T,M,se],[f]:C,rules:[{endpoint:pp,[f]:x}]},{[m]:[q,v,je,T,M,ie],endpoint:pp,[f]:x},{[m]:[q,v,ee,T,re],endpoint:{[_]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:oe,[R]:O},[f]:x},{[m]:[q,v,ee,T,M,se],[f]:C,rules:[{endpoint:yp,[f]:x}]},{[m]:[q,v,ee,T,M,ie],endpoint:yp,[f]:x},{[m]:[D,v,ee,Q,Ee,Da,re],endpoint:{[_]:Qp,[k]:oe,[R]:O},[f]:x},{[m]:[D,v,ee,Q,Ee,Ba,re],endpoint:{[_]:Xp,[k]:oe,[R]:O},[f]:x},{[m]:[D,v,ee,Q,Ee,Da,M,se],[f]:C,rules:[{[m]:yr,endpoint:Ma,[f]:x},{endpoint:Ma,[f]:x}]},{[m]:[D,v,ee,Q,Ee,Ba,M,se],[f]:C,rules:[{[m]:yr,endpoint:rc,[f]:x},gp]},{[m]:[D,v,ee,Q,Ee,Da,M,ie],endpoint:Ma,[f]:x},{[m]:[D,v,ee,Q,Ee,Ba,M,ie],endpoint:rc,[f]:x},{[m]:[D,v,je,T,re],endpoint:{[_]:Jp,[k]:oe,[R]:O},[f]:x},{[m]:[D,v,je,T,M,se],[f]:C,rules:[{[m]:yr,endpoint:Fa,[f]:x},{endpoint:Fa,[f]:x}]},{[m]:[D,v,je,T,M,ie],endpoint:Fa,[f]:x},{[m]:[D,v,ee,T,re],endpoint:{[_]:np,[k]:oe,[R]:O},[f]:x},{[m]:[D,v,ee,T,M,se],[f]:C,rules:[{[m]:yr,endpoint:{[_]:np,[k]:te,[R]:O},[f]:x},{endpoint:Cp,[f]:x}]},{[m]:[D,v,ee,T,M,ie],endpoint:Cp,[f]:x}]},Ps]}]},{[m]:[Q,Ee,{[p]:Y,[y]:[{[p]:X,[y]:[iy,"scheme"]},"http"]},{[p]:rp,[y]:[Rt,!0]},Oa,v,D,ee],[f]:C,rules:[{[m]:pr,[f]:C,rules:[{[m]:$p,[f]:C,rules:[gp]},Ps]}]},{[m]:[Oa,{[p]:Zp,[y]:Mp,[ue]:ey}],[f]:C,rules:[{[m]:[{[p]:X,[y]:[Re,"resourceId[0]"],[ue]:ty},{[p]:qe,[y]:[{[p]:Y,[y]:[ay,Os]}]}],[f]:C,rules:[{[m]:[{[p]:Y,[y]:[La,sc]}],[f]:C,rules:[{[m]:Wa,[f]:C,rules:[{[m]:Up,[f]:C,rules:[xp,Ep,{[m]:Qa,[f]:C,rules:[wp,{[m]:qp,[f]:C,rules:[za,{[m]:Xa,[f]:C,rules:[{[m]:pr,[f]:C,rules:[{[m]:Kp,[f]:C,rules:[{[m]:Ja,[f]:C,rules:[{[m]:[{[p]:Y,[y]:[dy,Os]}],error:"Invalid ARN: Missing account id",[f]:A},{[m]:Za,[f]:C,rules:[{[m]:Gp,[f]:C,rules:[{[m]:$n,endpoint:{[_]:op,[k]:$a,[R]:O},[f]:x},{[m]:Is,endpoint:{[_]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:$a,[R]:O},[f]:x},{endpoint:{[_]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:$a,[R]:O},[f]:x}]},bp]},Ua]},ja]},qa]}]}]},Sp]},{error:"Invalid ARN: bucket ARN is missing a region",[f]:A}]},Ap]},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[f]:A}]},{[m]:Wa,[f]:C,rules:[{[m]:Up,[f]:C,rules:[{[m]:Qa,[f]:C,rules:[{[m]:Wa,[f]:C,rules:[{[m]:Qa,[f]:C,rules:[wp,{[m]:qp,[f]:C,rules:[za,{[m]:Xa,[f]:C,rules:[{[m]:pr,[f]:C,rules:[{[m]:[{[p]:Y,[y]:[cy,"{partitionResult#name}"]}],[f]:C,rules:[{[m]:Ja,[f]:C,rules:[{[m]:[{[p]:Y,[y]:[La,Xr]}],[f]:C,rules:[{[m]:Za,[f]:C,rules:[{[m]:Gp,[f]:C,rules:[{[m]:Ya,error:"Access Points do not support S3 Accelerate",[f]:A},{[m]:[V,q],endpoint:{[_]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:zn,[R]:O},[f]:x},{[m]:[V,D],endpoint:{[_]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:zn,[R]:O},[f]:x},{[m]:[v,q],endpoint:{[_]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:zn,[R]:O},[f]:x},{[m]:[v,D,Q,Ee],endpoint:{[_]:op,[k]:zn,[R]:O},[f]:x},{[m]:[v,D],endpoint:{[_]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:zn,[R]:O},[f]:x}]},bp]},Ua]},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[f]:A}]},ja]},qa]}]}]},Sp]}]}]},{[m]:[{[p]:Rr,[y]:[ac,!0]}],[f]:C,rules:[{[m]:jp,error:"S3 MRAP does not support dual-stack",[f]:A},{[m]:Is,error:"S3 MRAP does not support FIPS",[f]:A},{[m]:Ya,error:"S3 MRAP does not support S3 Accelerate",[f]:A},{[m]:[{[p]:Ce,[y]:[{[P]:"DisableMultiRegionAccessPoints"},!0]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[f]:A},{[m]:[{[p]:vs,[y]:Va,[ue]:sp}],[f]:C,rules:[{[m]:[{[p]:Y,[y]:[{[p]:X,[y]:[{[P]:sp},ze]},{[p]:X,[y]:[Re,"partition"]}]}],[f]:C,rules:[{endpoint:{[_]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[k]:{[Nt]:[{[Tt]:!0,name:"sigv4a",[Pt]:Xr,signingRegionSet:["*"]}]},[R]:O},[f]:x}]},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[f]:A}]}]},{error:"Invalid Access Point Name",[f]:A}]},Ap]},{[m]:[{[p]:Y,[y]:[La,oc]}],[f]:C,rules:[{[m]:jp,error:"S3 Outposts does not support Dual-stack",[f]:A},{[m]:Is,error:"S3 Outposts does not support FIPS",[f]:A},{[m]:Ya,error:"S3 Outposts does not support S3 Accelerate",[f]:A},{[m]:[{[p]:lt,[y]:[{[p]:X,[y]:[Re,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[f]:A},{[m]:[{[p]:X,[y]:n0,[ue]:ec}],[f]:C,rules:[{[m]:Fp,[f]:C,rules:[za,{[m]:Xa,[f]:C,rules:[{[m]:pr,[f]:C,rules:[{[m]:Kp,[f]:C,rules:[{[m]:Ja,[f]:C,rules:[{[m]:Za,[f]:C,rules:[{[m]:[{[p]:X,[y]:o0,[ue]:ip}],[f]:C,rules:[{[m]:[{[p]:X,[y]:[Re,"resourceId[3]"],[ue]:ic}],[f]:C,rules:[{[m]:[{[p]:Y,[y]:[{[P]:ip},ry]}],[f]:C,rules:[{[m]:$n,endpoint:{[_]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[k]:_p,[R]:O},[f]:x},{endpoint:{[_]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:_p,[R]:O},[f]:x}]},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[f]:A}]},{error:"Invalid ARN: expected an access point name",[f]:A}]},{error:"Invalid ARN: Expected a 4-component resource",[f]:A}]},Ua]},ja]},qa]}]}]},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[f]:A}]},{error:"Invalid ARN: The Outpost Id was not set",[f]:A}]},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[f]:A}]},{error:"Invalid ARN: No ARN type specified",[f]:A}]},{[m]:[{[p]:Ln,[y]:[Rt,0,4,!1],[ue]:ap},{[p]:Y,[y]:[{[P]:ap},"arn:"]},{[p]:qe,[y]:[{[p]:lt,[y]:[kp]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[f]:A},{[m]:[{[p]:Ce,[y]:[t0,!0]},kp],error:"Path-style addressing cannot be used with ARN buckets",[f]:A},{[m]:[{[p]:"uriEncode",[y]:Mp,[ue]:"uri_encoded_bucket"}],[f]:C,rules:[{[m]:pr,[f]:C,rules:[{[m]:[ee],[f]:C,rules:[{[m]:[q,T,V,re],endpoint:{[_]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:oe,[R]:O},[f]:x},{[m]:[q,T,V,M,se],[f]:C,rules:[{endpoint:Rp,[f]:x}]},{[m]:[q,T,V,M,ie],endpoint:Rp,[f]:x},{[m]:[D,T,V,re],endpoint:{[_]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:oe,[R]:O},[f]:x},{[m]:[D,T,V,M,se],[f]:C,rules:[{endpoint:Np,[f]:x}]},{[m]:[D,T,V,M,ie],endpoint:Np,[f]:x},{[m]:[q,T,v,re],endpoint:{[_]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:oe,[R]:O},[f]:x},{[m]:[q,T,v,M,se],[f]:C,rules:[{endpoint:Tp,[f]:x}]},{[m]:[q,T,v,M,ie],endpoint:Tp,[f]:x},{[m]:[D,Q,Ee,v,re],endpoint:{[_]:ny,[k]:oe,[R]:O},[f]:x},{[m]:[D,Q,Ee,v,M,se],[f]:C,rules:[{[m]:yr,endpoint:Ka,[f]:x},{endpoint:Ka,[f]:x}]},{[m]:[D,Q,Ee,v,M,ie],endpoint:Ka,[f]:x},{[m]:[D,T,v,re],endpoint:{[_]:cp,[k]:oe,[R]:O},[f]:x},{[m]:[D,T,v,M,se],[f]:C,rules:[{[m]:yr,endpoint:{[_]:cp,[k]:te,[R]:O},[f]:x},{endpoint:Pp,[f]:x}]},{[m]:[D,T,v,M,ie],endpoint:Pp,[f]:x}]},{error:"Path-style addressing cannot be used with S3 Accelerate",[f]:A}]}]}]},{[m]:[{[p]:lt,[y]:[Ip]},{[p]:Ce,[y]:[Ip,!0]}],[f]:C,rules:[{[m]:pr,[f]:C,rules:[{[m]:Hp,[f]:C,rules:[xp,Ep,{[m]:$n,endpoint:{[_]:tc,[k]:Ga,[R]:O},[f]:x},{[m]:Is,endpoint:{[_]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[k]:Ga,[R]:O},[f]:x},{endpoint:{[_]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[k]:Ga,[R]:O},[f]:x}]},Ps]}]},{[m]:[{[p]:qe,[y]:zp}],[f]:C,rules:[{[m]:pr,[f]:C,rules:[{[m]:Hp,[f]:C,rules:[{[m]:[V,q,T,re],endpoint:{[_]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:oe,[R]:O},[f]:x},{[m]:[V,q,T,M,se],[f]:C,rules:[{endpoint:vp,[f]:x}]},{[m]:[V,q,T,M,ie],endpoint:vp,[f]:x},{[m]:[V,D,T,re],endpoint:{[_]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[k]:oe,[R]:O},[f]:x},{[m]:[V,D,T,M,se],[f]:C,rules:[{endpoint:Op,[f]:x}]},{[m]:[V,D,T,M,ie],endpoint:Op,[f]:x},{[m]:[v,q,T,re],endpoint:{[_]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:oe,[R]:O},[f]:x},{[m]:[v,q,T,M,se],[f]:C,rules:[{endpoint:Dp,[f]:x}]},{[m]:[v,q,T,M,ie],endpoint:Dp,[f]:x},{[m]:[v,D,Q,Ee,re],endpoint:{[_]:tc,[k]:oe,[R]:O},[f]:x},{[m]:[v,D,Q,Ee,M,se],[f]:C,rules:[{[m]:yr,endpoint:Ha,[f]:x},{endpoint:Ha,[f]:x}]},{[m]:[v,D,Q,Ee,M,ie],endpoint:Ha,[f]:x},{[m]:[v,D,T,re],endpoint:{[_]:dp,[k]:oe,[R]:O},[f]:x},{[m]:[v,D,T,M,se],[f]:C,rules:[{[m]:yr,endpoint:{[_]:dp,[k]:te,[R]:O},[f]:x},{endpoint:Bp,[f]:x}]},{[m]:[v,D,T,M,ie],endpoint:Bp,[f]:x}]},Ps]}]}]},{error:"A region must be set when sending requests to S3.",[f]:A}]},ly=s0;var fy=(e,t={})=>Gt(ly,{endpointParams:e,logger:t.logger});var my=e=>({apiVersion:"2006-03-01",base64Decoder:e?.base64Decoder??tt,base64Encoder:e?.base64Encoder??rt,disableHostPrefix:e?.disableHostPrefix??!1,endpointProvider:e?.endpointProvider??fy,extensions:e?.extensions??[],getAwsChunkedEncodingStream:e?.getAwsChunkedEncodingStream??Dl,logger:e?.logger??new Ze,sdkStreamMixin:e?.sdkStreamMixin??Kl,serviceId:e?.serviceId??"S3",signerConstructor:e?.signerConstructor??Ns,signingEscapePath:e?.signingEscapePath??!1,urlParser:e?.urlParser??Se,useArnRegion:e?.useArnRegion??!1,utf8Decoder:e?.utf8Decoder??we,utf8Encoder:e?.utf8Encoder??Oe});var uy=e=>{ir(process.version);let t=mr(e),r=()=>t().then(sr),n=my(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:e?.bodyLengthChecker??fr,credentialDefaultProvider:e?.credentialDefaultProvider??Hh(ks),defaultUserAgentProvider:e?.defaultUserAgentProvider??lr({serviceId:n.serviceId,clientVersion:mf.version}),eventStreamSerdeProvider:e?.eventStreamSerdeProvider??Jh,maxAttempts:e?.maxAttempts??F(er),md5:e?.md5??Le.bind(null,"md5"),region:e?.region??F(Xe,Yt),requestHandler:e?.requestHandler??new nt(r),retryMode:e?.retryMode??F({...rr,default:async()=>(await r()).retryMode||Je}),sha1:e?.sha1??Le.bind(null,"sha1"),sha256:e?.sha256??Le.bind(null,"sha256"),streamCollector:e?.streamCollector??ot,streamHasher:e?.streamHasher??ep,useArnRegion:e?.useArnRegion??F(Vh),useDualstackEndpoint:e?.useDualstackEndpoint??F(Vt),useFipsEndpoint:e?.useFipsEndpoint??F(Wt)}};var i0=e=>e,hy=(e,t)=>{let r={...i0($r(e))};return t.forEach(n=>n.configure(r)),{...e,...Ur(r)}};var Ds=class extends et{constructor(...[t]){let r=uy(t||{}),n=ff(r),o=Qt(n),s=Zt(o),i=tr(s),a=i,c=Co(a),d=Hc(c),l=qt(d),u=nl(l),h=hy(u,t?.extensions||[]);super(h),this.config=h,this.middlewareStack.use(nr(this.config)),this.middlewareStack.use(Jt(this.config)),this.middlewareStack.use(Ft(this.config)),this.middlewareStack.use(Lt(this.config)),this.middlewareStack.use(zt(this.config)),this.middlewareStack.use(Eo(this.config)),this.middlewareStack.use(Vc(this.config)),this.middlewareStack.use(qc(this.config)),this.middlewareStack.use(Ht(this.config))}destroy(){super.destroy()}};var wy=It(oa());var Bs=class e extends st{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var py;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(py||(py={}));var yy;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.ObjectSizeGreaterThan!==void 0?r.ObjectSizeGreaterThan(t.ObjectSizeGreaterThan):t.ObjectSizeLessThan!==void 0?r.ObjectSizeLessThan(t.ObjectSizeLessThan):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(yy||(yy={}));var gy;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.AccessPointArn!==void 0?r.AccessPointArn(t.AccessPointArn):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(gy||(gy={}));var Cy;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(Cy||(Cy={}));var xy=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:Ne},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Ne}}),Ey=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:Ne},...e.SSEKMSKeyId&&{SSEKMSKeyId:Ne},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Ne}});var by=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i=j({},Un,{"content-type":e.ContentType||"application/octet-stream","x-amz-acl":e.ACL,"cache-control":e.CacheControl,"content-disposition":e.ContentDisposition,"content-encoding":e.ContentEncoding,"content-language":e.ContentLanguage,"content-length":[()=>Un(e.ContentLength),()=>e.ContentLength.toString()],"content-md5":e.ContentMD5,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-checksum-crc32":e.ChecksumCRC32,"x-amz-checksum-crc32c":e.ChecksumCRC32C,"x-amz-checksum-sha1":e.ChecksumSHA1,"x-amz-checksum-sha256":e.ChecksumSHA256,expires:[()=>Un(e.Expires),()=>rf(e.Expires).toString()],"x-amz-grant-full-control":e.GrantFullControl,"x-amz-grant-read":e.GrantRead,"x-amz-grant-read-acp":e.GrantReadACP,"x-amz-grant-write-acp":e.GrantWriteACP,"x-amz-server-side-encryption":e.ServerSideEncryption,"x-amz-storage-class":e.StorageClass,"x-amz-website-redirect-location":e.WebsiteRedirectLocation,"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":e.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5,"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId,"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext,"x-amz-server-side-encryption-bucket-key-enabled":[()=>Un(e.BucketKeyEnabled),()=>e.BucketKeyEnabled.toString()],"x-amz-request-payer":e.RequestPayer,"x-amz-tagging":e.Tagging,"x-amz-object-lock-mode":e.ObjectLockMode,"x-amz-object-lock-retain-until-date":[()=>Un(e.ObjectLockRetainUntilDate),()=>(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()],"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner,...e.Metadata!==void 0&&Object.keys(e.Metadata).reduce((u,h)=>(u[`x-amz-meta-${h.toLowerCase()}`]=e.Metadata[h],u),{})}),a=`${s?.endsWith("/")?s.slice(0,-1):s||""}/{Key+}`;a=Wi(a,e,"Bucket",()=>e.Bucket,"{Bucket}",!1),a=Wi(a,e,"Key",()=>e.Key,"{Key+}",!0);let c=j({"x-id":[,"PutObject"]}),d;e.Body!==void 0&&(d=e.Body);let l;return e.Body!==void 0&&(l=e.Body,d=l),new $({protocol:n,hostname:r,port:o,method:"PUT",headers:i,path:a,query:c,body:d})};var Sy=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return c0(e,t);let r=j({$metadata:l0(e),Expiration:[,e.headers["x-amz-expiration"]],ETag:[,e.headers.etag],ChecksumCRC32:[,e.headers["x-amz-checksum-crc32"]],ChecksumCRC32C:[,e.headers["x-amz-checksum-crc32c"]],ChecksumSHA1:[,e.headers["x-amz-checksum-sha1"]],ChecksumSHA256:[,e.headers["x-amz-checksum-sha256"]],ServerSideEncryption:[,e.headers["x-amz-server-side-encryption"]],VersionId:[,e.headers["x-amz-version-id"]],SSECustomerAlgorithm:[,e.headers["x-amz-server-side-encryption-customer-algorithm"]],SSECustomerKeyMD5:[,e.headers["x-amz-server-side-encryption-customer-key-md5"]],SSEKMSKeyId:[,e.headers["x-amz-server-side-encryption-aws-kms-key-id"]],SSEKMSEncryptionContext:[,e.headers["x-amz-server-side-encryption-context"]],BucketKeyEnabled:[()=>e.headers["x-amz-server-side-encryption-bucket-key-enabled"]!==void 0,()=>Yl(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])],RequestCharged:[,e.headers["x-amz-request-charged"]]});return await gt(e.body,t),r},c0=async(e,t)=>{let r={...e,body:await u0(e.body,t)},n=h0(e,r.body),o=r.body;return d0({output:e,parsedBody:o,errorCode:n})};var d0=or(Bs);var l0=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),f0=(e,t)=>gt(e,t).then(r=>t.utf8Encoder(r)),Un=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),m0=(e,t)=>f0(e,t).then(r=>{if(r.length){let n=new wy.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o=n.parse(r),s="#text",i=Object.keys(o)[0],a=o[i];return a[s]&&(a[i]=a[s],delete a[s]),Cn(a)}return{}}),u0=async(e,t)=>{let r=await m0(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},h0=(e,t)=>{if(t?.Code!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"};function p0(e){return t=>async r=>{let n={...r.input},o=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(let s of o){let i=n[s.target];if(i){let a=ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):typeof i=="string"?e.utf8Decoder(i):new Uint8Array(i),c=e.base64Encoder(a),d=new e.md5;d.update(a),n={...n,[s.target]:c,[s.hash]:e.base64Encoder(await d.digest())}}}return t({...r,input:n})}}var y0={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},Ay=e=>({applyToStack:t=>{t.add(p0(e),y0)}});var J;(function(e){e.MD5="MD5",e.CRC32="CRC32",e.CRC32C="CRC32C",e.SHA1="SHA1",e.SHA256="SHA256"})(J||(J={}));var _y;(function(e){e.HEADER="header",e.TRAILER="trailer"})(_y||(_y={}));var jn=[J.CRC32,J.CRC32C,J.SHA1,J.SHA256],ky=[J.CRC32,J.CRC32C,J.SHA1,J.SHA256];var Ry=(e,{requestChecksumRequired:t,requestAlgorithmMember:r})=>{if(!r||!e[r])return t?J.MD5:void 0;let n=e[r];if(!jn.includes(n))throw new Error(`The checksum algorithm "${n}" is not supported by the client. Select one of ${jn}.`);return n};var Ms=e=>e===J.MD5?"content-md5":`x-amz-checksum-${e.toLowerCase()}`;var Ny=(e,t)=>{let r=e.toLowerCase();for(let n of Object.keys(t))if(r===n.toLowerCase())return!0;return!1};var Jr=e=>e!==void 0&&typeof e!="string"&&!ArrayBuffer.isView(e)&&!Or(e);var Oy=It(un()),Dy=It(dc());var Ls=(e,t)=>({[J.MD5]:t.md5,[J.CRC32]:Oy.AwsCrc32,[J.CRC32C]:Dy.AwsCrc32c,[J.SHA1]:t.sha1,[J.SHA256]:t.sha256})[e];var zs=(e,t)=>{let r=new e;return r.update(be(t||"")),r.digest()};var By=(e,t)=>r=>async n=>{if(!$.isInstance(n.request))return r(n);let{request:o}=n,{body:s,headers:i}=o,{base64Encoder:a,streamHasher:c}=e,{input:d,requestChecksumRequired:l,requestAlgorithmMember:u}=t,h=Ry(d,{requestChecksumRequired:l,requestAlgorithmMember:u}),g=s,w=i;if(h){let E=Ms(h),he=Ls(h,e);if(Jr(s)){let{getAwsChunkedEncodingStream:Zr,bodyLengthChecker:Us}=e;g=Zr(s,{base64Encoder:a,bodyLengthChecker:Us,checksumLocationName:E,checksumAlgorithmFn:he,streamHasher:c}),w={...i,"content-encoding":i["content-encoding"]?`${i["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":i["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":E},delete w["content-length"]}else if(!Ny(E,i)){let Zr=await zs(he,s);w={...i,[E]:a(Zr)}}}return await r({...n,request:{...o,headers:w,body:g}})};var My=require("stream");function lc(e){let t=new My.Transform;return t.push(e),t.push(null),t}var Fy=async(e,{streamHasher:t,checksumAlgorithmFn:r,base64Encoder:n})=>{let o=Jr(e)?t(r,e):zs(r,e);return n(await o)};var Ly=(e=[])=>{let t=[];for(let r of ky)!e.includes(r)||!jn.includes(r)||t.push(r);return t};var zy=async(e,{config:t,responseAlgorithms:r})=>{let n=Ly(r),{body:o,headers:s}=e;for(let i of n){let a=Ms(i),c=s[a];if(c){let d=Ls(i,t),{streamHasher:l,base64Encoder:u}=t,h=await Fy(o,{streamHasher:l,checksumAlgorithmFn:d,base64Encoder:u});if(h===c)break;throw new Error(`Checksum mismatch: expected "${h}" but received "${c}" in response header "${a}".`)}}};var $y={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},Uy=(e,t)=>r=>async n=>{if(!$.isInstance(n.request))return r(n);let o=n.input,s=await r(n),i=s.response,a,{requestValidationModeMember:c,responseAlgorithms:d}=t;if(c&&o[c]==="ENABLED"){let l=Jr(i.body);l&&(a=await e.streamCollector(i.body),i.body=lc(a)),await zy(s.response,{config:e,responseAlgorithms:d}),l&&a&&(i.body=lc(a))}return s};var A0={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},jy=(e,t)=>({applyToStack:r=>{r.add(By(e,t),A0),r.addRelativeTo(Uy(e,t),$y)}});var $s=class e extends ye{static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(Ae(r,this.serialize,this.deserialize)),this.middlewareStack.use(_e(r,e.getEndpointParameterInstructions())),this.middlewareStack.use(Gc(r)),this.middlewareStack.use(Ay(r)),this.middlewareStack.use(jy(r,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!1}));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:Ey,outputFilterSensitiveLog:xy},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return by(t,r)}deserialize(t,r){return Sy(t,r)}};var _0=new Ds({region:"auto",endpoint:`https://${process.env.CLOUDFLARE_ACCOUNT_ID}.r2.cloudflarestorage.com`,credentials:{accessKeyId:process.env.R2_ACCESS_KEY_ID,secretAccessKey:process.env.R2_SECRET_ACCESS_KEY}}),qy=async(e,t,r)=>{let n=new $s({Bucket:process.env.R2_BUCKET,Key:e,Body:t,ContentType:r});return await _0.send(n)};var Ky=require("fs/promises"),k0=async()=>{let{filename:e,location:t,result:r}=await jc(),n=await qy(`images/${e}`,r,"image/jpeg");console.log(n),await(0,Ky.unlink)(t)};k0();
/*! Bundled license information:

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
//# sourceMappingURL=main.js.map