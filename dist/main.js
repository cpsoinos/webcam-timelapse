"use strict";var Gy=Object.create;var Kn=Object.defineProperty;var Hy=Object.getOwnPropertyDescriptor;var Vy=Object.getOwnPropertyNames;var Wy=Object.getPrototypeOf,Yy=Object.prototype.hasOwnProperty;var Gn=(e,t)=>()=>(e&&(t=e(e=0)),t);var B=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Hn=(e,t)=>{for(var r in t)Kn(e,r,{get:t[r],enumerable:!0})},mc=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Vy(t))!Yy.call(e,o)&&o!==r&&Kn(e,o,{get:()=>t[o],enumerable:!(n=Hy(t,o))||n.enumerable});return e};var Ot=(e,t,r)=>(r=e!=null?Gy(Wy(e)):{},mc(t||!e||!e.__esModule?Kn(r,"default",{value:e,enumerable:!0}):r,e)),tn=e=>mc(Kn({},"__esModule",{value:!0}),e);var fc=B((N0,Qy)=>{Qy.exports={name:"dotenv",version:"16.3.1",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{types:"./lib/main.d.ts",require:"./lib/main.js",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard","lint-readme":"standard-markdown",pretest:"npm run lint && npm run dts-check",test:"tap tests/*.js --100 -Rspec",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},funding:"https://github.com/motdotla/dotenv?sponsor=1",keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@definitelytyped/dtslint":"^0.0.133","@types/node":"^18.11.3",decache:"^4.6.1",sinon:"^14.0.1",standard:"^17.0.0","standard-markdown":"^7.1.0","standard-version":"^9.5.0",tap:"^16.3.0",tar:"^6.1.11",typescript:"^4.8.4"},engines:{node:">=12"},browser:{fs:!1}}});var yc=B((T0,ut)=>{"use strict";var uc=require("fs"),Ks=require("path"),Xy=require("os"),Jy=require("crypto"),Zy=fc(),Gs=Zy.version,eg=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function tg(e){let t={},r=e.toString();r=r.replace(/\r\n?/mg,`
`);let n;for(;(n=eg.exec(r))!=null;){let o=n[1],s=n[2]||"";s=s.trim();let i=s[0];s=s.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),i==='"'&&(s=s.replace(/\\n/g,`
`),s=s.replace(/\\r/g,"\r")),t[o]=s}return t}function rg(e){let t=pc(e),r=se.configDotenv({path:t});if(!r.parsed)throw new Error(`MISSING_DATA: Cannot parse ${t} for an unknown reason`);let n=hc(e).split(","),o=n.length,s;for(let i=0;i<o;i++)try{let a=n[i].trim(),c=sg(r,a);s=se.decrypt(c.ciphertext,c.key);break}catch(a){if(i+1>=o)throw a}return se.parse(s)}function ng(e){console.log(`[dotenv@${Gs}][INFO] ${e}`)}function og(e){console.log(`[dotenv@${Gs}][WARN] ${e}`)}function qs(e){console.log(`[dotenv@${Gs}][DEBUG] ${e}`)}function hc(e){return e&&e.DOTENV_KEY&&e.DOTENV_KEY.length>0?e.DOTENV_KEY:process.env.DOTENV_KEY&&process.env.DOTENV_KEY.length>0?process.env.DOTENV_KEY:""}function sg(e,t){let r;try{r=new URL(t)}catch(a){throw a.code==="ERR_INVALID_URL"?new Error("INVALID_DOTENV_KEY: Wrong format. Must be in valid uri format like dotenv://:key_1234@dotenv.org/vault/.env.vault?environment=development"):a}let n=r.password;if(!n)throw new Error("INVALID_DOTENV_KEY: Missing key part");let o=r.searchParams.get("environment");if(!o)throw new Error("INVALID_DOTENV_KEY: Missing environment part");let s=`DOTENV_VAULT_${o.toUpperCase()}`,i=e.parsed[s];if(!i)throw new Error(`NOT_FOUND_DOTENV_ENVIRONMENT: Cannot locate environment ${s} in your .env.vault file.`);return{ciphertext:i,key:n}}function pc(e){let t=Ks.resolve(process.cwd(),".env");return e&&e.path&&e.path.length>0&&(t=e.path),t.endsWith(".vault")?t:`${t}.vault`}function ig(e){return e[0]==="~"?Ks.join(Xy.homedir(),e.slice(1)):e}function ag(e){ng("Loading env from encrypted .env.vault");let t=se._parseVault(e),r=process.env;return e&&e.processEnv!=null&&(r=e.processEnv),se.populate(r,t,e),{parsed:t}}function cg(e){let t=Ks.resolve(process.cwd(),".env"),r="utf8",n=!!(e&&e.debug);e&&(e.path!=null&&(t=ig(e.path)),e.encoding!=null&&(r=e.encoding));try{let o=se.parse(uc.readFileSync(t,{encoding:r})),s=process.env;return e&&e.processEnv!=null&&(s=e.processEnv),se.populate(s,o,e),{parsed:o}}catch(o){return n&&qs(`Failed to load ${t} ${o.message}`),{error:o}}}function dg(e){let t=pc(e);return hc(e).length===0?se.configDotenv(e):uc.existsSync(t)?se._configVault(e):(og(`You set DOTENV_KEY but you are missing a .env.vault file at ${t}. Did you forget to build it?`),se.configDotenv(e))}function lg(e,t){let r=Buffer.from(t.slice(-64),"hex"),n=Buffer.from(e,"base64"),o=n.slice(0,12),s=n.slice(-16);n=n.slice(12,-16);try{let i=Jy.createDecipheriv("aes-256-gcm",r,o);return i.setAuthTag(s),`${i.update(n)}${i.final()}`}catch(i){let a=i instanceof RangeError,c=i.message==="Invalid key length",d=i.message==="Unsupported state or unable to authenticate data";if(a||c){let l="INVALID_DOTENV_KEY: It must be 64 characters long (or more)";throw new Error(l)}else if(d){let l="DECRYPTION_FAILED: Please check your DOTENV_KEY";throw new Error(l)}else throw console.error("Error: ",i.code),console.error("Error: ",i.message),i}}function mg(e,t,r={}){let n=!!(r&&r.debug),o=!!(r&&r.override);if(typeof t!="object")throw new Error("OBJECT_REQUIRED: Please check the processEnv argument being passed to populate");for(let s of Object.keys(t))Object.prototype.hasOwnProperty.call(e,s)?(o===!0&&(e[s]=t[s]),n&&qs(o===!0?`"${s}" is already defined and WAS overwritten`:`"${s}" is already defined and was NOT overwritten`)):e[s]=t[s]}var se={configDotenv:cg,_configVault:ag,_parseVault:rg,config:dg,decrypt:lg,parse:tg,populate:mg};ut.exports.configDotenv=se.configDotenv;ut.exports._configVault=se._configVault;ut.exports._parseVault=se._parseVault;ut.exports.config=se.config;ut.exports.decrypt=se.decrypt;ut.exports.parse=se.parse;ut.exports.populate=se.populate;ut.exports=se});var Cc=B((I0,gc)=>{"use strict";var Ir={};process.env.DOTENV_CONFIG_ENCODING!=null&&(Ir.encoding=process.env.DOTENV_CONFIG_ENCODING);process.env.DOTENV_CONFIG_PATH!=null&&(Ir.path=process.env.DOTENV_CONFIG_PATH);process.env.DOTENV_CONFIG_DEBUG!=null&&(Ir.debug=process.env.DOTENV_CONFIG_DEBUG);process.env.DOTENV_CONFIG_OVERRIDE!=null&&(Ir.override=process.env.DOTENV_CONFIG_OVERRIDE);process.env.DOTENV_CONFIG_DOTENV_KEY!=null&&(Ir.DOTENV_KEY=process.env.DOTENV_CONFIG_DOTENV_KEY);gc.exports=Ir});var Ec=B((v0,xc)=>{"use strict";var fg=/^dotenv_config_(encoding|path|debug|override|DOTENV_KEY)=(.+)$/;xc.exports=function(t){return t.reduce(function(r,n){let o=n.match(fg);return o&&(r[o[1]]=o[2]),r},{})}});var Sc=B(Dt=>{"use strict";var wc=Dt&&Dt.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.getCameras=Dt.getLinuxCameras=void 0;var ug=wc(require("os")),hg=wc(require("fs")),bc=()=>{let e=/^video/i,t="/dev/";return hg.default.readdirSync(t).reduce((o,s)=>(s.match(e)&&o.push(t+s),o),[])};Dt.getLinuxCameras=bc;var pg=()=>{switch(ug.default.platform()){case"linux":case"darwin":return bc()}};Dt.getCameras=pg});var _c=B(vr=>{"use strict";Object.defineProperty(vr,"__esModule",{value:!0});vr.defaults=vr.setDefaults=void 0;var Ac={width:1280,height:720,quality:100,delay:0,title:"",subtitle:"",timestamp:"",saveShots:!0,output:"jpeg",device:"",verbose:!1,frames:1,greyScale:!1,rotation:0,bottomBanner:!1,topBanner:!1,skip:0};vr.defaults=Ac;var yg=(e={})=>Object.assign(Object.assign({},Ac),e);vr.setDefaults=yg});var Nc=B(Bt=>{"use strict";var kc=Bt&&Bt.__classPrivateFieldSet||function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},Rc=Bt&&Bt.__classPrivateFieldGet||function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Vn,Wn;Object.defineProperty(Bt,"__esModule",{value:!0});Bt.Shot=void 0;var Hs=class{constructor(t,r){Vn.set(this,void 0),Wn.set(this,void 0),kc(this,Vn,t,"f"),kc(this,Wn,r,"f")}get location(){return Rc(this,Vn,"f")}get data(){return Buffer.from(Rc(this,Wn,"f"))}};Bt.Shot=Hs;Vn=new WeakMap,Wn=new WeakMap});var Ws=B(ht=>{"use strict";var gg=ht&&ht.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Vs=ht&&ht.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&gg(t,e,r)};Object.defineProperty(ht,"__esModule",{value:!0});Vs(Sc(),ht);Vs(_c(),ht);Vs(Nc(),ht)});var rn=B(He=>{"use strict";var Cg=He&&He.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})},Ys=He&&He.__classPrivateFieldSet||function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},de=He&&He.__classPrivateFieldGet||function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Mt,ye;Object.defineProperty(He,"__esModule",{value:!0});He.BaseWebcam=void 0;var xg=require("child_process"),Eg=require("util"),Qs=require("fs"),Xs=Ws(),wg=(0,Eg.promisify)(xg.exec),bg=/(?<=\.)[^.]*$/,Sg=["jpg","jpeg","png","bmp"],Js=class e{constructor(t){Mt.set(this,void 0),ye.set(this,void 0),Ys(this,Mt,[],"f"),Ys(this,ye,(0,Xs.setDefaults)(t),"f")}get options(){return Object.assign({},de(this,ye,"f"))}setMaxQuality(){de(this,ye,"f").quality=9}setMaxDelay(){de(this,ye,"f").delay=1}setDelayInMilliseconds(){de(this,ye,"f").delay=de(this,ye,"f").delay*1e3}clone(){return new e(de(this,ye,"f"))}clear(){Ys(this,Mt,[],"f")}list(){return(0,Xs.getCameras)()}hasCamera(t){var r,n;return(n=(r=this.list())===null||r===void 0?void 0:r.includes(t))!==null&&n!==void 0?n:!1}getListControlsSh(t){let r=typeof de(this,ye,"f").device=="string"&&de(this,ye,"f").device?`--device=${de(this,ye,"f").device.trim()}`:"";return`${t} ${r} --list-controls`}createShot(t,r){return new Xs.Shot(t,r)}capture(t,r,n){return Cg(this,void 0,void 0,function*(){let o=r.match(bg);if(!o)throw new Error("Invalid path, missing type file");if(!o[0])throw new Error(`Invalid type extension: ${o[0]}`);if(!Sg.includes(o[0]))throw new Error(`Invalid file extension: ${o[0]}`);if(de(this,ye,"f").output!==o[0])throw new Error(`The output (${de(this,ye,"f").output}) and the file type (${o[0]}) does not match`);try{yield wg(t,{maxBuffer:1024*1e4});let s=(0,Qs.readFileSync)(r);switch(n){case"buffer":return s;case"base64":return this.getBase64FromBuffer(s);default:throw new Error(`Invalid returnType: ${n}`)}}catch(s){throw de(this,ye,"f").verbose&&console.error("Error while shotting: ",s),s}})}getShot(t){if(t<0||t>de(this,Mt,"f").length)throw new Error("Index out of bonds");return de(this,Mt,"f")[t]}getLastShot(){return de(this,Mt,"f")[de(this,Mt,"f").length-1]}getShotBuffer(t){let r=this.getShot(t);return(0,Qs.readFileSync)(r.location)}getLastShotBuffer(){let t=this.getLastShot();return(0,Qs.readFileSync)(t.location)}getBase64FromBuffer(t){return`data:image/${de(this,ye,"f").output};base64,${t.toString("base64")}`}getBase64(t){let r=this.getShot(t);return this.getBase64FromBuffer(r.data)}getLastShotBase64(){let t=this.getLastShot();return this.getBase64FromBuffer(t.data)}};He.BaseWebcam=Js;Mt=new WeakMap,ye=new WeakMap});var Ic=B(Ft=>{"use strict";var Ag=Ft&&Ft.__classPrivateFieldSet||function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},Tc=Ft&&Ft.__classPrivateFieldGet||function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},nn;Object.defineProperty(Ft,"__esModule",{value:!0});Ft.FSWebcam=void 0;var _g=rn(),Zs=class extends _g.BaseWebcam{constructor(t){super(t),nn.set(this,void 0),Ag(this,nn,"fswebcam","f"),t!=null&&t.quality&&t.quality>9&&this.setMaxQuality()}generateSh(t){let r=super.options,n=` -r ${r.width}x${r.height}`,o=`-F ${r.frames}`,s=`-D ${r.delay}`,i=r.output==="jpg"?"":`--${r.output} -1`,a=r.title?`--title ${r.title}`:"",c=r.subtitle?`--subtitle ${r.subtitle}`:"",d=r.timestamp?`--timestamp ${r.timestamp}`:"",l=r.device?`-d ${r.device}`:"",f=r.greyScale?"--greyscale":"",h=r.rotation?`--rotate ${r.rotation}`:"",p=!r.topBanner&&!r.bottomBanner?"--no-banner":r.topBanner?"--top-banner":"--bottom-banner",C=r.skip?`--skip ${r.skip}`:"",x=r.verbose?"":" -q",b=t||"- -";return`${Tc(this,nn,"f")} ${x} ${n} ${o} ${s} ${a} ${c} ${d} ${l} ${f} ${h} ${p} ${C} ${i} ${b}`.replace(/ +/g," ")}getListControlsSh(){let{options:{device:t}}=this,r=t?" --device="+t.trim():"";return`${Tc(this,nn,"f")} ${r} --list-controls`}};Ft.FSWebcam=Zs;nn=new WeakMap});var Pc=B(Ve=>{"use strict";var kg=Ve&&Ve.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})},Rg=Ve&&Ve.__classPrivateFieldSet||function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},vc=Ve&&Ve.__classPrivateFieldGet||function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},on;Object.defineProperty(Ve,"__esModule",{value:!0});Ve.ImageSnapWebcam=void 0;var Ng=require("child_process"),Tg=require("util"),Ig=rn(),vg=(0,Tg.promisify)(Ng.exec),ei=class extends Ig.BaseWebcam{constructor(t){super(t),on.set(this,void 0),Rg(this,on,"imagesnap","f"),t!=null&&t.delay&&(t==null?void 0:t.delay)<1&&super.setMaxDelay()}generateSh(t){let{options:r}=this,n=r.verbose?"-v":"-q",o=r.delay?`-w ${r.delay}`:"",s=r.device?`-d "${r.device}"`:"";return`${vc(this,on,"f")} ${o} ${s} ${n} ${t}`.replace(/ +/g," ")}listWebcams(){return kg(this,void 0,void 0,function*(){let t=`${vc(this,on,"f")} -l`,r=yield vg(t);if(r.stderr)throw this.options.verbose&&console.error("Error while listing webcams: ",r.stderr),new Error(r.stderr);return r.stdout.split(`
`).reduce((o,s)=>(s==="Video Devices:"||!s||o.push(s.replace(/.*?\[(.*?)\].*/,"$1")),o),[])})}};Ve.ImageSnapWebcam=ei;on=new WeakMap});var Dc=B(We=>{"use strict";var Pg=We&&We.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})},Og=We&&We.__classPrivateFieldSet||function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},Oc=We&&We.__classPrivateFieldGet||function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},sn;Object.defineProperty(We,"__esModule",{value:!0});We.WindowsWebcam=void 0;var Dg=require("child_process"),Bg=require("util"),Mg=require("path"),Fg=rn(),Lg=(0,Bg.promisify)(Dg.exec),ti=class extends Fg.BaseWebcam{constructor(t){super(Object.assign(Object.assign({},t),{output:"bmp"})),sn.set(this,void 0),Og(this,sn,(0,Mg.resolve)(__dirname,"..","bindings","CommandCam","CommandCam.exe"),"f"),t!=null&&t.delay&&super.setDelayInMilliseconds()}generateSh(t){let{options:r}=this,n=r.device?`/devnum ${r.device}`:"",o=r.delay?`/delay ${r.delay}`:"";return`${Oc(this,sn,"f")} ${o} ${n} /filename ${t}`.replace(/ +/g," ")}listWebcams(){return Pg(this,void 0,void 0,function*(){let t=`${Oc(this,sn,"f")} /devlist`,r=yield Lg(t);if(r.stderr)throw this.options.verbose&&console.error("Error while listing webcams: ",r.stderr),new Error(r.stderr);return r.stdout.split(`
`).reduce((o,s)=>{let i=s.replace("\r","");return["Available capture devices:","Available capture devices:"].includes(i)||!i||o.push(i),o},[])})}};We.WindowsWebcam=ti;sn=new WeakMap});var ri=B(Ye=>{"use strict";var zg=Ye&&Ye.__createBinding||(Object.create?function(e,t,r,n){n===void 0&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}),Yn=Ye&&Ye.__exportStar||function(e,t){for(var r in e)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&zg(t,e,r)};Object.defineProperty(Ye,"__esModule",{value:!0});Yn(rn(),Ye);Yn(Ic(),Ye);Yn(Pc(),Ye);Yn(Dc(),Ye)});var Mc=B(Lt=>{"use strict";var Bc=Lt&&Lt.__classPrivateFieldSet||function(e,t,r,n,o){if(n==="m")throw new TypeError("Private method is not writable");if(n==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return n==="a"?o.call(e,r):o?o.value=r:t.set(e,r),r},ni=Lt&&Lt.__classPrivateFieldGet||function(e,t,r,n){if(r==="a"&&!n)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?n:r==="a"?n.call(e):n?n.value:t.get(e)},Qn,cn;Object.defineProperty(Lt,"__esModule",{value:!0});Lt.Factory=void 0;var $g=require("os"),an=ri(),oi=class{constructor(t){Qn.set(this,void 0),cn.set(this,void 0),Bc(this,Qn,(0,$g.platform)(),"f"),Bc(this,cn,{linux:new an.FSWebcam(t),fswebcam:new an.FSWebcam(t),darwin:new an.ImageSnapWebcam(t),win32:new an.WindowsWebcam(t),win64:new an.WindowsWebcam(t)},"f")}create(t){if(!Object.keys(ni(this,cn,"f")).includes(t))throw new Error("Webcam type is not supported");let r=t||ni(this,Qn,"f");return ni(this,cn,"f")[r]}};Lt.Factory=oi;Qn=new WeakMap,cn=new WeakMap});var Lc=B(Y=>{"use strict";var Ug=Y&&Y.__awaiter||function(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})};Object.defineProperty(Y,"__esModule",{value:!0});Y.defaults=Y.WindowsWebcam=Y.ImageSnapWebcam=Y.FSWebcam=Y.BaseWebcam=Y.Factory=Y.list=Y.capture=Y.create=void 0;var jg=require("path"),Fc=Mc();Object.defineProperty(Y,"Factory",{enumerable:!0,get:function(){return Fc.Factory}});var Xn=ri();Object.defineProperty(Y,"BaseWebcam",{enumerable:!0,get:function(){return Xn.BaseWebcam}});Object.defineProperty(Y,"FSWebcam",{enumerable:!0,get:function(){return Xn.FSWebcam}});Object.defineProperty(Y,"ImageSnapWebcam",{enumerable:!0,get:function(){return Xn.ImageSnapWebcam}});Object.defineProperty(Y,"WindowsWebcam",{enumerable:!0,get:function(){return Xn.WindowsWebcam}});var si=(e,t)=>new Fc.Factory(e).create(t);Y.create=si;var qg=({location:e="location.jpeg",type:t="linux",options:r={},cb:n=s=>{},returnType:o="base64"}={location:"location.jpeg",type:"linux",options:{},cb:s=>{},returnType:"base64"})=>Ug(void 0,void 0,void 0,function*(){let s=si(r,t),i=(0,jg.resolve)(__dirname,e),a=yield s.capture(s.generateSh(e),i,o);return n==null||n(a),a});Y.capture=qg;var Kg=e=>si({},e).list();Y.list=Kg;var Gg=Ws();Object.defineProperty(Y,"defaults",{enumerable:!0,get:function(){return Gg.defaults}})});var mn={};Hn(mn,{__assign:()=>li,__asyncDelegator:()=>EC,__asyncGenerator:()=>xC,__asyncValues:()=>wC,__await:()=>ln,__awaiter:()=>uC,__classPrivateFieldGet:()=>_C,__classPrivateFieldSet:()=>kC,__createBinding:()=>pC,__decorate:()=>lC,__exportStar:()=>yC,__extends:()=>cC,__generator:()=>hC,__importDefault:()=>AC,__importStar:()=>SC,__makeTemplateObject:()=>bC,__metadata:()=>fC,__param:()=>mC,__read:()=>Yc,__rest:()=>dC,__spread:()=>gC,__spreadArrays:()=>CC,__values:()=>mi});function cC(e,t){di(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}function dC(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]]);return r}function lC(e,t,r,n){var o=arguments.length,s=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,r,s):i(t,r))||s);return o>3&&s&&Object.defineProperty(t,r,s),s}function mC(e,t){return function(r,n){t(r,n,e)}}function fC(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function uC(e,t,r,n){function o(s){return s instanceof r?s:new r(function(i){i(s)})}return new(r||(r=Promise))(function(s,i){function a(l){try{d(n.next(l))}catch(f){i(f)}}function c(l){try{d(n.throw(l))}catch(f){i(f)}}function d(l){l.done?s(l.value):o(l.value).then(a,c)}d((n=n.apply(e,t||[])).next())})}function hC(e,t){var r={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},n,o,s,i;return i={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(i[Symbol.iterator]=function(){return this}),i;function a(d){return function(l){return c([d,l])}}function c(d){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(s=d[0]&2?o.return:d[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,d[1])).done)return s;switch(o=0,s&&(d=[d[0]&2,s.value]),d[0]){case 0:case 1:s=d;break;case 4:return r.label++,{value:d[1],done:!1};case 5:r.label++,o=d[1],d=[0];continue;case 7:d=r.ops.pop(),r.trys.pop();continue;default:if(s=r.trys,!(s=s.length>0&&s[s.length-1])&&(d[0]===6||d[0]===2)){r=0;continue}if(d[0]===3&&(!s||d[1]>s[0]&&d[1]<s[3])){r.label=d[1];break}if(d[0]===6&&r.label<s[1]){r.label=s[1],s=d;break}if(s&&r.label<s[2]){r.label=s[2],r.ops.push(d);break}s[2]&&r.ops.pop(),r.trys.pop();continue}d=t.call(e,r)}catch(l){d=[6,l],o=0}finally{n=s=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function pC(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function yC(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function mi(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Yc(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),o,s=[],i;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(a){i={error:a}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(i)throw i.error}}return s}function gC(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Yc(arguments[t]));return e}function CC(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),o=0,t=0;t<r;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)n[o]=s[i];return n}function ln(e){return this instanceof ln?(this.v=e,this):new ln(e)}function xC(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),o,s=[];return o={},i("next"),i("throw"),i("return"),o[Symbol.asyncIterator]=function(){return this},o;function i(h){n[h]&&(o[h]=function(p){return new Promise(function(C,x){s.push([h,p,C,x])>1||a(h,p)})})}function a(h,p){try{c(n[h](p))}catch(C){f(s[0][3],C)}}function c(h){h.value instanceof ln?Promise.resolve(h.value.v).then(d,l):f(s[0][2],h)}function d(h){a("next",h)}function l(h){a("throw",h)}function f(h,p){h(p),s.shift(),s.length&&a(s[0][0],s[0][1])}}function EC(e){var t,r;return t={},n("next"),n("throw",function(o){throw o}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(o,s){t[o]=e[o]?function(i){return(r=!r)?{value:ln(e[o](i)),done:o==="return"}:s?s(i):i}:s}}function wC(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof mi=="function"?mi(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(s){r[s]=e[s]&&function(i){return new Promise(function(a,c){i=e[s](i),o(a,c,i.done,i.value)})}}function o(s,i,a,c){Promise.resolve(c).then(function(d){s({value:d,done:a})},i)}}function bC(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function SC(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function AC(e){return e&&e.__esModule?e:{default:e}}function _C(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function kC(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}var di,li,fn=Gn(()=>{"use strict";di=function(e,t){return di=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var o in n)n.hasOwnProperty(o)&&(r[o]=n[o])},di(e,t)};li=function(){return li=Object.assign||function(t){for(var r,n=1,o=arguments.length;n<o;n++){r=arguments[n];for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s])}return t},li.apply(this,arguments)}});var Qc,Xc,Jc=Gn(()=>{"use strict";Qc=e=>{let t=[];for(let r=0,n=e.length;r<n;r++){let o=e.charCodeAt(r);if(o<128)t.push(o);else if(o<2048)t.push(o>>6|192,o&63|128);else if(r+1<e.length&&(o&64512)===55296&&(e.charCodeAt(r+1)&64512)===56320){let s=65536+((o&1023)<<10)+(e.charCodeAt(++r)&1023);t.push(s>>18|240,s>>12&63|128,s>>6&63|128,s&63|128)}else t.push(o>>12|224,o>>6&63|128,o&63|128)}return Uint8Array.from(t)},Xc=e=>{let t="";for(let r=0,n=e.length;r<n;r++){let o=e[r];if(o<128)t+=String.fromCharCode(o);else if(192<=o&&o<224){let s=e[++r];t+=String.fromCharCode((o&31)<<6|s&63)}else if(240<=o&&o<365){let i="%"+[o,e[++r],e[++r],e[++r]].map(a=>a.toString(16)).join("%");t+=decodeURIComponent(i)}else t+=String.fromCharCode((o&15)<<12|(e[++r]&63)<<6|e[++r]&63)}return t}});function Zc(e){return new TextEncoder().encode(e)}function ed(e){return new TextDecoder("utf-8").decode(e)}var td=Gn(()=>{"use strict"});var rd={};Hn(rd,{fromUtf8:()=>RC,toUtf8:()=>NC});var RC,NC,nd=Gn(()=>{"use strict";Jc();td();RC=e=>typeof TextEncoder=="function"?Zc(e):Qc(e),NC=e=>typeof TextDecoder=="function"?ed(e):Xc(e)});var od=B(eo=>{"use strict";Object.defineProperty(eo,"__esModule",{value:!0});eo.convertToBuffer=void 0;var TC=(nd(),tn(rd)),IC=typeof Buffer<"u"&&Buffer.from?function(e){return Buffer.from(e,"utf8")}:TC.fromUtf8;function vC(e){return e instanceof Uint8Array?e:typeof e=="string"?IC(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}eo.convertToBuffer=vC});var sd=B(to=>{"use strict";Object.defineProperty(to,"__esModule",{value:!0});to.isEmptyData=void 0;function PC(e){return typeof e=="string"?e.length===0:e.byteLength===0}to.isEmptyData=PC});var id=B(ro=>{"use strict";Object.defineProperty(ro,"__esModule",{value:!0});ro.numToUint8=void 0;function OC(e){return new Uint8Array([(e&4278190080)>>24,(e&16711680)>>16,(e&65280)>>8,e&255])}ro.numToUint8=OC});var ad=B(no=>{"use strict";Object.defineProperty(no,"__esModule",{value:!0});no.uint32ArrayFrom=void 0;function DC(e){if(!Uint32Array.from){for(var t=new Uint32Array(e.length),r=0;r<e.length;)t[r]=e[r],r+=1;return t}return Uint32Array.from(e)}no.uint32ArrayFrom=DC});var un=B(Qe=>{"use strict";Object.defineProperty(Qe,"__esModule",{value:!0});Qe.uint32ArrayFrom=Qe.numToUint8=Qe.isEmptyData=Qe.convertToBuffer=void 0;var BC=od();Object.defineProperty(Qe,"convertToBuffer",{enumerable:!0,get:function(){return BC.convertToBuffer}});var MC=sd();Object.defineProperty(Qe,"isEmptyData",{enumerable:!0,get:function(){return MC.isEmptyData}});var FC=id();Object.defineProperty(Qe,"numToUint8",{enumerable:!0,get:function(){return FC.numToUint8}});var LC=ad();Object.defineProperty(Qe,"uint32ArrayFrom",{enumerable:!0,get:function(){return LC.uint32ArrayFrom}})});var ld=B(oo=>{"use strict";Object.defineProperty(oo,"__esModule",{value:!0});oo.AwsCrc32=void 0;var cd=(fn(),tn(mn)),fi=un(),dd=hn(),zC=function(){function e(){this.crc32=new dd.Crc32}return e.prototype.update=function(t){(0,fi.isEmptyData)(t)||this.crc32.update((0,fi.convertToBuffer)(t))},e.prototype.digest=function(){return cd.__awaiter(this,void 0,void 0,function(){return cd.__generator(this,function(t){return[2,(0,fi.numToUint8)(this.crc32.digest())]})})},e.prototype.reset=function(){this.crc32=new dd.Crc32},e}();oo.AwsCrc32=zC});var hn=B(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.AwsCrc32=qt.Crc32=qt.crc32=void 0;var $C=(fn(),tn(mn)),UC=un();function jC(e){return new md().update(e).digest()}qt.crc32=jC;var md=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=$C.__values(t),s=o.next();!s.done;s=o.next()){var i=s.value;this.checksum=this.checksum>>>8^KC[(this.checksum^i)&255]}}catch(a){r={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}();qt.Crc32=md;var qC=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],KC=(0,UC.uint32ArrayFrom)(qC),GC=ld();Object.defineProperty(qt,"AwsCrc32",{enumerable:!0,get:function(){return GC.AwsCrc32}})});var Zo=B(Et=>{"use strict";var xm=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",EE=xm+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Em="["+xm+"]["+EE+"]*",wE=new RegExp("^"+Em+"$"),bE=function(e,t){let r=[],n=t.exec(e);for(;n;){let o=[];o.startIndex=t.lastIndex-n[0].length;let s=n.length;for(let i=0;i<s;i++)o.push(n[i]);r.push(o),n=t.exec(e)}return r},SE=function(e){let t=wE.exec(e);return!(t===null||typeof t>"u")};Et.isExist=function(e){return typeof e<"u"};Et.isEmptyObject=function(e){return Object.keys(e).length===0};Et.merge=function(e,t,r){if(t){let n=Object.keys(t),o=n.length;for(let s=0;s<o;s++)r==="strict"?e[n[s]]=[t[n[s]]]:e[n[s]]=t[n[s]]}};Et.getValue=function(e){return Et.isExist(e)?e:""};Et.isName=SE;Et.getAllMatches=bE;Et.nameRegexp=Em});var Qi=B(_m=>{"use strict";var Yi=Zo(),AE={allowBooleanAttributes:!1,unpairedTags:[]};_m.validate=function(e,t){t=Object.assign({},AE,t);let r=[],n=!1,o=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let s=0;s<e.length;s++)if(e[s]==="<"&&e[s+1]==="?"){if(s+=2,s=bm(e,s),s.err)return s}else if(e[s]==="<"){let i=s;if(s++,e[s]==="!"){s=Sm(e,s);continue}else{let a=!1;e[s]==="/"&&(a=!0,s++);let c="";for(;s<e.length&&e[s]!==">"&&e[s]!==" "&&e[s]!=="	"&&e[s]!==`
`&&e[s]!=="\r";s++)c+=e[s];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),s--),!PE(c)){let f;return c.trim().length===0?f="Invalid space after '<'.":f="Tag '"+c+"' is an invalid name.",te("InvalidTag",f,Re(e,s))}let d=RE(e,s);if(d===!1)return te("InvalidAttr","Attributes for '"+c+"' have open quote.",Re(e,s));let l=d.value;if(s=d.index,l[l.length-1]==="/"){let f=s-l.length;l=l.substring(0,l.length-1);let h=Am(l,t);if(h===!0)n=!0;else return te(h.err.code,h.err.msg,Re(e,f+h.err.line))}else if(a)if(d.tagClosed){if(l.trim().length>0)return te("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",Re(e,i));{let f=r.pop();if(c!==f.tagName){let h=Re(e,f.tagStartPos);return te("InvalidTag","Expected closing tag '"+f.tagName+"' (opened in line "+h.line+", col "+h.col+") instead of closing tag '"+c+"'.",Re(e,i))}r.length==0&&(o=!0)}}else return te("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",Re(e,s));else{let f=Am(l,t);if(f!==!0)return te(f.err.code,f.err.msg,Re(e,s-l.length+f.err.line));if(o===!0)return te("InvalidXml","Multiple possible root nodes found.",Re(e,s));t.unpairedTags.indexOf(c)!==-1||r.push({tagName:c,tagStartPos:i}),n=!0}for(s++;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="!"){s++,s=Sm(e,s);continue}else if(e[s+1]==="?"){if(s=bm(e,++s),s.err)return s}else break;else if(e[s]==="&"){let f=IE(e,s);if(f==-1)return te("InvalidChar","char '&' is not expected.",Re(e,s));s=f}else if(o===!0&&!wm(e[s]))return te("InvalidXml","Extra text at the end",Re(e,s));e[s]==="<"&&s--}}else{if(wm(e[s]))continue;return te("InvalidChar","char '"+e[s]+"' is not expected.",Re(e,s))}if(n){if(r.length==1)return te("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",Re(e,r[0].tagStartPos));if(r.length>0)return te("InvalidXml","Invalid '"+JSON.stringify(r.map(s=>s.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return te("InvalidXml","Start tag expected.",1);return!0};function wm(e){return e===" "||e==="	"||e===`
`||e==="\r"}function bm(e,t){let r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){let n=e.substr(r,t-r);if(t>5&&n==="xml")return te("InvalidXml","XML declaration allowed only at the start of the document.",Re(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function Sm(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}var _E='"',kE="'";function RE(e,t){let r="",n="",o=!1;for(;t<e.length;t++){if(e[t]===_E||e[t]===kE)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){o=!0;break}r+=e[t]}return n!==""?!1:{value:r,index:t,tagClosed:o}}var NE=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function Am(e,t){let r=Yi.getAllMatches(e,NE),n={};for(let o=0;o<r.length;o++){if(r[o][1].length===0)return te("InvalidAttr","Attribute '"+r[o][2]+"' has no space in starting.",En(r[o]));if(r[o][3]!==void 0&&r[o][4]===void 0)return te("InvalidAttr","Attribute '"+r[o][2]+"' is without value.",En(r[o]));if(r[o][3]===void 0&&!t.allowBooleanAttributes)return te("InvalidAttr","boolean attribute '"+r[o][2]+"' is not allowed.",En(r[o]));let s=r[o][2];if(!vE(s))return te("InvalidAttr","Attribute '"+s+"' is an invalid name.",En(r[o]));if(!n.hasOwnProperty(s))n[s]=1;else return te("InvalidAttr","Attribute '"+s+"' is repeated.",En(r[o]))}return!0}function TE(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function IE(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,TE(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function te(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function vE(e){return Yi.isName(e)}function PE(e){return Yi.isName(e)}function Re(e,t){let r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function En(e){return e.startIndex+e[1].length}});var Rm=B(Xi=>{"use strict";var km={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}},OE=function(e){return Object.assign({},km,e)};Xi.buildOptions=OE;Xi.defaultOptions=km});var Tm=B((dM,Nm)=>{"use strict";var Ji=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}};Nm.exports=Ji});var vm=B((lM,Im)=>{"use strict";var DE=Zo();function BE(e,t){let r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let n=1,o=!1,s=!1,i="";for(;t<e.length;t++)if(e[t]==="<"&&!s){if(o&&LE(e,t))t+=7,[entityName,val,t]=ME(e,t+1),val.indexOf("&")===-1&&(r[jE(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(o&&zE(e,t))t+=8;else if(o&&$E(e,t))t+=8;else if(o&&UE(e,t))t+=9;else if(FE)s=!0;else throw new Error("Invalid DOCTYPE");n++,i=""}else if(e[t]===">"){if(s?e[t-1]==="-"&&e[t-2]==="-"&&(s=!1,n--):n--,n===0)break}else e[t]==="["?o=!0:i+=e[t];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}function ME(e,t){let r="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)r+=e[t];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");let n=e[t++],o="";for(;t<e.length&&e[t]!==n;t++)o+=e[t];return[r,o,t]}function FE(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}function LE(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}function zE(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}function $E(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}function UE(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}function jE(e){if(DE.isName(e))return e;throw new Error(`Invalid entity name ${e}`)}Im.exports=BE});var Om=B((mM,Pm)=>{"use strict";var qE=/^[-+]?0x[a-fA-F0-9]+$/,KE=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);var GE={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function HE(e,t={}){if(t=Object.assign({},GE,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(t.hex&&qE.test(r))return Number.parseInt(r,16);{let n=KE.exec(r);if(n){let o=n[1],s=n[2],i=VE(n[3]),a=n[4]||n[6];if(!t.leadingZeros&&s.length>0&&o&&r[2]!==".")return e;if(!t.leadingZeros&&s.length>0&&!o&&r[1]!==".")return e;{let c=Number(r),d=""+c;return d.search(/[eE]/)!==-1||a?t.eNotation?c:e:r.indexOf(".")!==-1?d==="0"&&i===""||d===i||o&&d==="-"+i?c:e:s?i===d||o+i===d?c:e:r===d||r===o+d?c:e}}else return e}}function VE(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}Pm.exports=HE});var Bm=B((uM,Dm)=>{"use strict";var ra=Zo(),wn=Tm(),WE=vm(),YE=Om(),fM="<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,ra.nameRegexp),Zi=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"\xA2"},pound:{regex:/&(pound|#163);/g,val:"\xA3"},yen:{regex:/&(yen|#165);/g,val:"\xA5"},euro:{regex:/&(euro|#8364);/g,val:"\u20AC"},copyright:{regex:/&(copy|#169);/g,val:"\xA9"},reg:{regex:/&(reg|#174);/g,val:"\xAE"},inr:{regex:/&(inr|#8377);/g,val:"\u20B9"}},this.addExternalEntities=QE,this.parseXml=tw,this.parseTextData=XE,this.resolveNameSpace=JE,this.buildAttributesMap=ew,this.isItStopNode=sw,this.replaceEntitiesValue=nw,this.readStopNodeData=aw,this.saveTextToParentTag=ow,this.addChild=rw}};function QE(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function XE(e,t,r,n,o,s,i){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){i||(e=this.replaceEntitiesValue(e));let a=this.options.tagValueProcessor(t,e,r,o,s);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?ta(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?ta(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function JE(e){if(this.options.removeNSPrefix){let t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}var ZE=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function ew(e,t,r){if(!this.options.ignoreAttributes&&typeof e=="string"){let n=ra.getAllMatches(e,ZE),o=n.length,s={};for(let i=0;i<o;i++){let a=this.resolveNameSpace(n[i][1]),c=n[i][4],d=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(d=this.options.transformAttributeName(d)),d==="__proto__"&&(d="#__proto__"),c!==void 0){this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c);let l=this.options.attributeValueProcessor(a,c,t);l==null?s[d]=c:typeof l!=typeof c||l!==c?s[d]=l:s[d]=ta(c,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[d]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){let i={};return i[this.options.attributesGroupName]=s,i}return s}}var tw=function(e){e=e.replace(/\r\n?/g,`
`);let t=new wn("!xml"),r=t,n="",o="";for(let s=0;s<e.length;s++)if(e[s]==="<")if(e[s+1]==="/"){let a=Rr(e,">",s,"Closing Tag is not closed."),c=e.substring(s+2,a).trim();if(this.options.removeNSPrefix){let f=c.indexOf(":");f!==-1&&(c=c.substr(f+1))}this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&(n=this.saveTextToParentTag(n,r,o));let d=o.substring(o.lastIndexOf(".")+1);if(c&&this.options.unpairedTags.indexOf(c)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${c}>`);let l=0;d&&this.options.unpairedTags.indexOf(d)!==-1?(l=o.lastIndexOf(".",o.lastIndexOf(".")-1),this.tagsNodeStack.pop()):l=o.lastIndexOf("."),o=o.substring(0,l),r=this.tagsNodeStack.pop(),n="",s=a}else if(e[s+1]==="?"){let a=ea(e,s,!1,"?>");if(!a)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,o),!(this.options.ignoreDeclaration&&a.tagName==="?xml"||this.options.ignorePiTags)){let c=new wn(a.tagName);c.add(this.options.textNodeName,""),a.tagName!==a.tagExp&&a.attrExpPresent&&(c[":@"]=this.buildAttributesMap(a.tagExp,o,a.tagName)),this.addChild(r,c,o)}s=a.closeIndex+1}else if(e.substr(s+1,3)==="!--"){let a=Rr(e,"-->",s+4,"Comment is not closed.");if(this.options.commentPropName){let c=e.substring(s+4,a-2);n=this.saveTextToParentTag(n,r,o),r.add(this.options.commentPropName,[{[this.options.textNodeName]:c}])}s=a}else if(e.substr(s+1,2)==="!D"){let a=WE(e,s);this.docTypeEntities=a.entities,s=a.i}else if(e.substr(s+1,2)==="!["){let a=Rr(e,"]]>",s,"CDATA is not closed.")-2,c=e.substring(s+9,a);if(n=this.saveTextToParentTag(n,r,o),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:c}]);else{let d=this.parseTextData(c,r.tagname,o,!0,!1,!0);d==null&&(d=""),r.add(this.options.textNodeName,d)}s=a+2}else{let a=ea(e,s,this.options.removeNSPrefix),c=a.tagName,d=a.tagExp,l=a.attrExpPresent,f=a.closeIndex;this.options.transformTagName&&(c=this.options.transformTagName(c)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,o,!1));let h=r;if(h&&this.options.unpairedTags.indexOf(h.tagname)!==-1&&(r=this.tagsNodeStack.pop(),o=o.substring(0,o.lastIndexOf("."))),c!==t.tagname&&(o+=o?"."+c:c),this.isItStopNode(this.options.stopNodes,o,c)){let p="";if(d.length>0&&d.lastIndexOf("/")===d.length-1)s=a.closeIndex;else if(this.options.unpairedTags.indexOf(c)!==-1)s=a.closeIndex;else{let x=this.readStopNodeData(e,c,f+1);if(!x)throw new Error(`Unexpected end of ${c}`);s=x.i,p=x.tagContent}let C=new wn(c);c!==d&&l&&(C[":@"]=this.buildAttributesMap(d,o,c)),p&&(p=this.parseTextData(p,c,o,!0,l,!0,!0)),o=o.substr(0,o.lastIndexOf(".")),C.add(this.options.textNodeName,p),this.addChild(r,C,o)}else{if(d.length>0&&d.lastIndexOf("/")===d.length-1){c[c.length-1]==="/"?(c=c.substr(0,c.length-1),d=c):d=d.substr(0,d.length-1),this.options.transformTagName&&(c=this.options.transformTagName(c));let p=new wn(c);c!==d&&l&&(p[":@"]=this.buildAttributesMap(d,o,c)),this.addChild(r,p,o),o=o.substr(0,o.lastIndexOf("."))}else{let p=new wn(c);this.tagsNodeStack.push(r),c!==d&&l&&(p[":@"]=this.buildAttributesMap(d,o,c)),this.addChild(r,p,o),r=p}n="",s=f}}else n+=e[s];return t.child};function rw(e,t,r){let n=this.options.updateTag(t.tagname,r,t[":@"]);n===!1||(typeof n=="string"&&(t.tagname=n),e.addChild(t))}var nw=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){let r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){let r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){let r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function ow(e,t,r,n){return e&&(n===void 0&&(n=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function sw(e,t,r){let n="*."+r;for(let o in e){let s=e[o];if(n===s||t===s)return!0}return!1}function iw(e,t,r=">"){let n,o="";for(let s=t;s<e.length;s++){let i=e[s];if(n)i===n&&(n="");else if(i==='"'||i==="'")n=i;else if(i===r[0])if(r[1]){if(e[s+1]===r[1])return{data:o,index:s}}else return{data:o,index:s};else i==="	"&&(i=" ");o+=i}}function Rr(e,t,r,n){let o=e.indexOf(t,r);if(o===-1)throw new Error(n);return o+t.length-1}function ea(e,t,r,n=">"){let o=iw(e,t+1,n);if(!o)return;let s=o.data,i=o.index,a=s.search(/\s/),c=s,d=!0;if(a!==-1&&(c=s.substr(0,a).replace(/\s\s*$/,""),s=s.substr(a+1)),r){let l=c.indexOf(":");l!==-1&&(c=c.substr(l+1),d=c!==o.data.substr(l+1))}return{tagName:c,tagExp:s,closeIndex:i,attrExpPresent:d}}function aw(e,t,r){let n=r,o=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){let s=Rr(e,">",r,`${t} is not closed`);if(e.substring(r+2,s).trim()===t&&(o--,o===0))return{tagContent:e.substring(n,r),i:s};r=s}else if(e[r+1]==="?")r=Rr(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=Rr(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=Rr(e,"]]>",r,"StopNode is not closed.")-2;else{let s=ea(e,r,">");s&&((s&&s.tagName)===t&&s.tagExp[s.tagExp.length-1]!=="/"&&o++,r=s.closeIndex)}}function ta(e,t,r){if(t&&typeof e=="string"){let n=e.trim();return n==="true"?!0:n==="false"?!1:YE(e,r)}else return ra.isExist(e)?e:""}Dm.exports=Zi});var Lm=B(Fm=>{"use strict";function cw(e,t){return Mm(e,t)}function Mm(e,t,r){let n,o={};for(let s=0;s<e.length;s++){let i=e[s],a=dw(i),c="";if(r===void 0?c=a:c=r+"."+a,a===t.textNodeName)n===void 0?n=i[a]:n+=""+i[a];else{if(a===void 0)continue;if(i[a]){let d=Mm(i[a],t,c),l=mw(d,t);i[":@"]?lw(d,i[":@"],c,t):Object.keys(d).length===1&&d[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?d=d[t.textNodeName]:Object.keys(d).length===0&&(t.alwaysCreateTextNode?d[t.textNodeName]="":d=""),o[a]!==void 0&&o.hasOwnProperty(a)?(Array.isArray(o[a])||(o[a]=[o[a]]),o[a].push(d)):t.isArray(a,c,l)?o[a]=[d]:o[a]=d}}}return typeof n=="string"?n.length>0&&(o[t.textNodeName]=n):n!==void 0&&(o[t.textNodeName]=n),o}function dw(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function lw(e,t,r,n){if(t){let o=Object.keys(t),s=o.length;for(let i=0;i<s;i++){let a=o[i];n.isArray(a,r+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function mw(e,t){let{textNodeName:r}=t,n=Object.keys(e).length;return!!(n===0||n===1&&(e[r]||typeof e[r]=="boolean"||e[r]===0))}Fm.prettify=cw});var $m=B((pM,zm)=>{"use strict";var{buildOptions:fw}=Rm(),uw=Bm(),{prettify:hw}=Lm(),pw=Qi(),na=class{constructor(t){this.externalEntities={},this.options=fw(t)}parse(t,r){if(typeof t!="string")if(t.toString)t=t.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(r){r===!0&&(r={});let s=pw.validate(t,r);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}let n=new uw(this.options);n.addExternalEntities(this.externalEntities);let o=n.parseXml(t);return this.options.preserveOrder||o===void 0?o:hw(o,this.options)}addEntity(t,r){if(r.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(t.indexOf("&")!==-1||t.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(r==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[t]=r}};zm.exports=na});var Gm=B((yM,Km)=>{"use strict";var yw=`
`;function gw(e,t){let r="";return t.format&&t.indentBy.length>0&&(r=yw),jm(e,t,"",r)}function jm(e,t,r,n){let o="",s=!1;for(let i=0;i<e.length;i++){let a=e[i],c=Cw(a),d="";if(r.length===0?d=c:d=`${r}.${c}`,c===t.textNodeName){let C=a[c];xw(d,t)||(C=t.tagValueProcessor(c,C),C=qm(C,t)),s&&(o+=n),o+=C,s=!1;continue}else if(c===t.cdataPropName){s&&(o+=n),o+=`<![CDATA[${a[c][0][t.textNodeName]}]]>`,s=!1;continue}else if(c===t.commentPropName){o+=n+`<!--${a[c][0][t.textNodeName]}-->`,s=!0;continue}else if(c[0]==="?"){let C=Um(a[":@"],t),x=c==="?xml"?"":n,b=a[c][0][t.textNodeName];b=b.length!==0?" "+b:"",o+=x+`<${c}${b}${C}?>`,s=!0;continue}let l=n;l!==""&&(l+=t.indentBy);let f=Um(a[":@"],t),h=n+`<${c}${f}`,p=jm(a[c],t,d,l);t.unpairedTags.indexOf(c)!==-1?t.suppressUnpairedNode?o+=h+">":o+=h+"/>":(!p||p.length===0)&&t.suppressEmptyNode?o+=h+"/>":p&&p.endsWith(">")?o+=h+`>${p}${n}</${c}>`:(o+=h+">",p&&n!==""&&(p.includes("/>")||p.includes("</"))?o+=n+t.indentBy+p+n:o+=p,o+=`</${c}>`),s=!0}return o}function Cw(e){let t=Object.keys(e);for(let r=0;r<t.length;r++){let n=t[r];if(n!==":@")return n}}function Um(e,t){let r="";if(e&&!t.ignoreAttributes)for(let n in e){let o=t.attributeValueProcessor(n,e[n]);o=qm(o,t),o===!0&&t.suppressBooleanAttributes?r+=` ${n.substr(t.attributeNamePrefix.length)}`:r+=` ${n.substr(t.attributeNamePrefix.length)}="${o}"`}return r}function xw(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let r=e.substr(e.lastIndexOf(".")+1);for(let n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+r)return!0;return!1}function qm(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){let n=t.entities[r];e=e.replace(n.regex,n.val)}return e}Km.exports=gw});var Vm=B((gM,Hm)=>{"use strict";var Ew=Gm(),ww={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function dr(e){this.options=Object.assign({},ww,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Aw),this.processTextOrObjNode=bw,this.options.format?(this.indentate=Sw,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}dr.prototype.build=function(e){return this.options.preserveOrder?Ew(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};dr.prototype.j2x=function(e,t){let r="",n="";for(let o in e)if(!(typeof e[o]>"u"))if(e[o]===null)o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar;else if(e[o]instanceof Date)n+=this.buildTextValNode(e[o],o,"",t);else if(typeof e[o]!="object"){let s=this.isAttribute(o);if(s)r+=this.buildAttrPairStr(s,""+e[o]);else if(o===this.options.textNodeName){let i=this.options.tagValueProcessor(o,""+e[o]);n+=this.replaceEntitiesValue(i)}else n+=this.buildTextValNode(e[o],o,"",t)}else if(Array.isArray(e[o])){let s=e[o].length,i="";for(let a=0;a<s;a++){let c=e[o][a];typeof c>"u"||(c===null?o[0]==="?"?n+=this.indentate(t)+"<"+o+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+o+"/"+this.tagEndChar:typeof c=="object"?this.options.oneListGroup?i+=this.j2x(c,t+1).val:i+=this.processTextOrObjNode(c,o,t):i+=this.buildTextValNode(c,o,"",t))}this.options.oneListGroup&&(i=this.buildObjectNode(i,o,"",t)),n+=i}else if(this.options.attributesGroupName&&o===this.options.attributesGroupName){let s=Object.keys(e[o]),i=s.length;for(let a=0;a<i;a++)r+=this.buildAttrPairStr(s[a],""+e[o][s[a]])}else n+=this.processTextOrObjNode(e[o],o,t);return{attrStr:r,val:n}};dr.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function bw(e,t,r){let n=this.j2x(e,r+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}dr.prototype.buildObjectNode=function(e,t,r,n){if(e==="")return t[0]==="?"?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let o="</"+t+this.tagEndChar,s="";return t[0]==="?"&&(s="?",o=""),r&&e.indexOf("<")===-1?this.indentate(n)+"<"+t+r+s+">"+e+o:this.options.commentPropName!==!1&&t===this.options.commentPropName&&s.length===0?this.indentate(n)+`<!--${e}-->`+this.newLine:this.indentate(n)+"<"+t+r+s+this.tagEndChar+e+this.indentate(n)+o}};dr.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};dr.prototype.buildTextValNode=function(e,t,r,n){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(n)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(n)+"<"+t+r+"?"+this.tagEndChar;{let o=this.options.tagValueProcessor(t,e);return o=this.replaceEntitiesValue(o),o===""?this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(n)+"<"+t+r+">"+o+"</"+t+this.tagEndChar}};dr.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){let r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e};function Sw(e){return this.options.indentBy.repeat(e)}function Aw(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}Hm.exports=dr});var oa=B((CM,Wm)=>{"use strict";var _w=Qi(),kw=$m(),Rw=Vm();Wm.exports={XMLParser:kw,XMLValidator:_w,XMLBuilder:Rw}});var vy=B(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});zs.AwsCrc32c=void 0;var Ty=(fn(),tn(mn)),cc=un(),Iy=dc(),g0=function(){function e(){this.crc32c=new Iy.Crc32c}return e.prototype.update=function(t){(0,cc.isEmptyData)(t)||this.crc32c.update((0,cc.convertToBuffer)(t))},e.prototype.digest=function(){return Ty.__awaiter(this,void 0,void 0,function(){return Ty.__generator(this,function(t){return[2,(0,cc.numToUint8)(this.crc32c.digest())]})})},e.prototype.reset=function(){this.crc32c=new Iy.Crc32c},e}();zs.AwsCrc32c=g0});var dc=B(Er=>{"use strict";Object.defineProperty(Er,"__esModule",{value:!0});Er.AwsCrc32c=Er.Crc32c=Er.crc32c=void 0;var C0=(fn(),tn(mn)),x0=un();function E0(e){return new Py().update(e).digest()}Er.crc32c=E0;var Py=function(){function e(){this.checksum=4294967295}return e.prototype.update=function(t){var r,n;try{for(var o=C0.__values(t),s=o.next();!s.done;s=o.next()){var i=s.value;this.checksum=this.checksum>>>8^b0[(this.checksum^i)&255]}}catch(a){r={error:a}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}return this},e.prototype.digest=function(){return(this.checksum^4294967295)>>>0},e}();Er.Crc32c=Py;var w0=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],b0=(0,x0.uint32ArrayFrom)(w0),S0=vy();Object.defineProperty(Er,"AwsCrc32c",{enumerable:!0,get:function(){return S0.AwsCrc32c}})});(function(){yc().config(Object.assign({},Cc(),Ec()(process.argv)))})();var zc=require("os"),$c=Ot(Lc()),Uc=require("path"),jc=async()=>{let e=`${new Date().toISOString()}.jpeg`,t=(0,Uc.resolve)(__dirname,"../images",e),r=await(0,$c.capture)({location:t,type:(0,zc.platform)(),returnType:"buffer",options:{width:1920,height:1080,frames:60,output:"jpeg",saveShots:!1}});return{filename:e,location:t,result:r}};var ii;(function(e){e.HEADER="header",e.QUERY="query"})(ii||(ii={}));var wr;(function(e){e.HTTP="http",e.HTTPS="https"})(wr||(wr={}));var Pr;(function(e){e.MD5="md5",e.CRC32="crc32",e.CRC32C="crc32c",e.SHA1="sha1",e.SHA256="sha256"})(Pr||(Pr={}));var Jn;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(Jn||(Jn={}));var ai;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(ai||(ai={}));var U=class e{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let t=new e({...this,headers:{...this.headers}});return t.query&&(t.query=Hg(t.query)),t}};function Hg(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}var dn=class{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};function Vg(e){return t=>async r=>{let{request:n}=r;return U.isInstance(n)&&n.body&&e.runtime==="node"&&(n.headers={...n.headers,Expect:"100-continue"}),t({...r,request:n})}}var Wg={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},qc=e=>({applyToStack:t=>{t.add(Vg(e),Wg)}});var Yg=e=>t=>async r=>{if(!U.isInstance(r.request))return t(r);let{request:n}=r,{handlerProtocol:o=""}=e.requestHandler.metadata||{};if(o.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]="";else if(!n.headers.host){let s=n.hostname;n.port!=null&&(s+=`:${n.port}`),n.headers.host=s}return t(r)},Qg={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},zt=e=>({applyToStack:t=>{t.add(Yg(e),Qg)}});var Xg=()=>(e,t)=>async r=>{var n,o;try{let s=await e(r),{clientName:i,commandName:a,logger:c,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:l,overrideOutputFilterSensitiveLog:f}=d,h=l!=null?l:t.inputFilterSensitiveLog,p=f!=null?f:t.outputFilterSensitiveLog,{$metadata:C,...x}=s.output;return(n=c==null?void 0:c.info)==null||n.call(c,{clientName:i,commandName:a,input:h(r.input),output:p(x),metadata:C}),s}catch(s){let{clientName:i,commandName:a,logger:c,dynamoDbDocumentClientOptions:d={}}=t,{overrideInputFilterSensitiveLog:l}=d,f=l!=null?l:t.inputFilterSensitiveLog;throw(o=c==null?void 0:c.error)==null||o.call(c,{clientName:i,commandName:a,input:f(r.input),error:s,metadata:s.$metadata}),s}},Jg={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},$t=e=>({applyToStack:t=>{t.add(Xg(),Jg)}});var Kc="X-Amzn-Trace-Id",Zg="AWS_LAMBDA_FUNCTION_NAME",eC="_X_AMZN_TRACE_ID",tC=e=>t=>async r=>{let{request:n}=r;if(!U.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(Kc))return t(r);let o=process.env[Zg],s=process.env[eC],i=a=>typeof a=="string"&&a.length>0;return i(o)&&i(s)&&(n.headers[Kc]=s),t({...r,request:n})},rC={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},Ut=e=>({applyToStack:t=>{t.add(tC(e),rC)}});var nC="content-length";function oC(){return(e,t)=>async r=>{var o;let{request:n}=r;if(U.isInstance(n)&&!n.headers[nC]){let s="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof((o=t==null?void 0:t.logger)==null?void 0:o.warn)=="function"?t.logger.warn(s):console.warn(s)}return e({...r})}}var sC={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},Gc=e=>({applyToStack:t=>{t.add(oC(),sC)}});var Hc=e=>{var t,r,n;return{...e,forcePathStyle:(t=e.forcePathStyle)!=null?t:!1,useAccelerateEndpoint:(r=e.useAccelerateEndpoint)!=null?r:!1,disableMultiregionAccessPoints:(n=e.disableMultiregionAccessPoints)!=null?n:!1}};var ci=e=>typeof e=="string"&&e.indexOf("arn:")===0&&e.split(":").length>=6;function iC(){return e=>async t=>{let{input:{Bucket:r}}=t;if(typeof r=="string"&&!ci(r)&&r.indexOf("/")>=0){let n=new Error(`Bucket name shouldn't contain '/', received '${r}'`);throw n.name="InvalidBucketName",n}return e({...t})}}var aC={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},Vc=e=>({applyToStack:t=>{t.add(iC(),aC)}});var Pe=class e extends Error{constructor(t,r=!0){super(t),this.tryNextLink=r,this.name="ProviderError",Object.setPrototypeOf(this,e.prototype)}static from(t,r=!0){return Object.assign(new this(t.message,r),t)}};var N=class e extends Pe{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="CredentialsProviderError",Object.setPrototypeOf(this,e.prototype)}};var Oe=class e extends Pe{constructor(t,r=!0){super(t,r),this.tryNextLink=r,this.name="TokenProviderError",Object.setPrototypeOf(this,e.prototype)}};var Zn=(...e)=>async()=>{if(e.length===0)throw new Pe("No providers in chain");let t;for(let r of e)try{return await r()}catch(n){if(t=n,n!=null&&n.tryNextLink)continue;throw n}throw t};var Wc=e=>()=>Promise.resolve(e);var jt=(e,t,r)=>{let n,o,s,i=!1,a=async()=>{o||(o=e());try{n=await o,s=!0,i=!1}finally{o=void 0}return n};return t===void 0?async c=>((!s||c!=null&&c.forceRefresh)&&(n=await a()),n):async c=>((!s||c!=null&&c.forceRefresh)&&(n=await a()),i?n:r&&!r(n)?(i=!0,n):(t(n)&&await a(),n))};var Ed=Ot(hn());var fd={},ui={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),fd[e]=t,ui[t]=e}function ud(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");let t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){let n=e.slice(r,r+2).toLowerCase();if(n in ui)t[r/2]=ui[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function le(e){let t="";for(let r=0;r<e.byteLength;r++)t+=fd[e[r]];return t}var Or=class e{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);let r=new Uint8Array(8);for(let n=7,o=Math.abs(Math.round(t));n>-1&&o>0;n--,o/=256)r[n]=o;return t<0&&hd(r),new e(r)}valueOf(){let t=this.bytes.slice(0),r=t[0]&128;return r&&hd(t),parseInt(le(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}};function hd(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}var Dr=class{constructor(t,r){this.toUtf8=t,this.fromUtf8=r}format(t){let r=[];for(let s of Object.keys(t)){let i=this.fromUtf8(s);r.push(Uint8Array.from([i.byteLength]),i,this.formatHeaderValue(t[s]))}let n=new Uint8Array(r.reduce((s,i)=>s+i.byteLength,0)),o=0;for(let s of r)n.set(s,o),o+=s.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":let r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":let n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":let o=new Uint8Array(9);return o[0]=5,o.set(t.value.bytes,1),o;case"binary":let s=new DataView(new ArrayBuffer(3+t.value.byteLength));s.setUint8(0,6),s.setUint16(1,t.value.byteLength,!1);let i=new Uint8Array(s.buffer);return i.set(t.value,3),i;case"string":let a=this.fromUtf8(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);let d=new Uint8Array(c.buffer);return d.set(a,3),d;case"timestamp":let l=new Uint8Array(9);return l[0]=8,l.set(Or.fromNumber(t.value.valueOf()).bytes,1),l;case"uuid":if(!ex.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);let f=new Uint8Array(17);return f[0]=9,f.set(ud(t.value.replace(/\-/g,"")),1),f}}parse(t){let r={},n=0;for(;n<t.byteLength;){let o=t.getUint8(n++),s=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,o));switch(n+=o,t.getUint8(n++)){case 0:r[s]={type:yd,value:!0};break;case 1:r[s]={type:yd,value:!1};break;case 2:r[s]={type:HC,value:t.getInt8(n++)};break;case 3:r[s]={type:VC,value:t.getInt16(n,!1)},n+=2;break;case 4:r[s]={type:WC,value:t.getInt32(n,!1)},n+=4;break;case 5:r[s]={type:YC,value:new Or(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:let i=t.getUint16(n,!1);n+=2,r[s]={type:QC,value:new Uint8Array(t.buffer,t.byteOffset+n,i)},n+=i;break;case 7:let a=t.getUint16(n,!1);n+=2,r[s]={type:XC,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,a))},n+=a;break;case 8:r[s]={type:JC,value:new Date(new Or(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:let c=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[s]={type:ZC,value:`${le(c.subarray(0,4))}-${le(c.subarray(4,6))}-${le(c.subarray(6,8))}-${le(c.subarray(8,10))}-${le(c.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}},pd;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(pd||(pd={}));var yd="boolean",HC="byte",VC="short",WC="integer",YC="long",QC="binary",XC="string",JC="timestamp",ZC="uuid",ex=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/;var gd=Ot(hn()),Cd=4,Kt=Cd*2,br=4,tx=Kt+br*2;function xd({byteLength:e,byteOffset:t,buffer:r}){if(e<tx)throw new Error("Provided message too short to accommodate event stream message overhead");let n=new DataView(r,t,e),o=n.getUint32(0,!1);if(e!==o)throw new Error("Reported message length does not match received message length");let s=n.getUint32(Cd,!1),i=n.getUint32(Kt,!1),a=n.getUint32(e-br,!1),c=new gd.Crc32().update(new Uint8Array(r,t,Kt));if(i!==c.digest())throw new Error(`The prelude checksum specified in the message (${i}) does not match the calculated CRC32 checksum (${c.digest()})`);if(c.update(new Uint8Array(r,t+Kt,e-(Kt+br))),a!==c.digest())throw new Error(`The message checksum (${c.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,t+Kt+br,s),body:new Uint8Array(r,t+Kt+br+s,o-s-(Kt+br+br))}}var so=class{constructor(t,r){this.headerMarshaller=new Dr(t,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(t){this.messageBuffer.push(this.decode(t))}endOfStream(){this.isEndOfStream=!0}getMessage(){let t=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return t},isEndOfStream(){return r}}}getAvailableMessages(){let t=this.messageBuffer;this.messageBuffer=[];let r=this.isEndOfStream;return{getMessages(){return t},isEndOfStream(){return r}}}encode({headers:t,body:r}){let n=this.headerMarshaller.format(t),o=n.byteLength+r.byteLength+16,s=new Uint8Array(o),i=new DataView(s.buffer,s.byteOffset,s.byteLength),a=new Ed.Crc32;return i.setUint32(0,o,!1),i.setUint32(4,n.byteLength,!1),i.setUint32(8,a.update(s.subarray(0,8)).digest(),!1),s.set(n,12),s.set(r,n.byteLength+12),i.setUint32(o-4,a.update(s.subarray(8,o-4)).digest(),!1),s}decode(t){let{headers:r,body:n}=xd(t);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(t){return this.headerMarshaller.format(t)}};var io=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.decoder.decode(t)}};var ao=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream)yield this.options.encoder.encode(t);this.options.includeEndFrame&&(yield new Uint8Array(0))}};var co=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.messageStream){let r=await this.options.deserializer(t);r!==void 0&&(yield r)}}};var lo=class{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(let t of this.options.inputStream)yield this.options.serializer(t)}};var me=e=>{if(typeof e=="function")return e;let t=Promise.resolve(e);return()=>t};var Br=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]";var mo=require("buffer"),pt=(e,t=0,r=e.byteLength-t)=>{if(!Br(e))throw new TypeError(`The "input" argument must be ArrayBuffer. Received type ${typeof e} (${e})`);return mo.Buffer.from(e,t,r)},Mr=(e,t)=>{if(typeof e!="string")throw new TypeError(`The "input" argument must be of type string. Received type ${typeof e} (${e})`);return t?mo.Buffer.from(e,t):mo.Buffer.from(e)};var be=e=>{let t=Mr(e,"utf8");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength/Uint8Array.BYTES_PER_ELEMENT)};var Se=e=>typeof e=="string"?be(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e);var De=e=>pt(e.buffer,e.byteOffset,e.byteLength).toString("utf8");var wd="X-Amz-Algorithm",bd="X-Amz-Credential",hi="X-Amz-Date",Sd="X-Amz-SignedHeaders",Ad="X-Amz-Expires",pi="X-Amz-Signature",yi="X-Amz-Security-Token";var gi="authorization",Ci=hi.toLowerCase(),rx="date",_d=[gi,Ci,rx],kd=pi.toLowerCase(),pn="x-amz-content-sha256",Rd=yi.toLowerCase();var Nd={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},Td=/^proxy-/,Id=/^sec-/;var fo="AWS4-HMAC-SHA256";var vd="AWS4-HMAC-SHA256-PAYLOAD",Pd="UNSIGNED-PAYLOAD",Od=50,xi="aws4_request",Dd=60*60*24*7;var uo={},Ei=[],ho=(e,t,r)=>`${e}/${t}/${r}/${xi}`,Md=async(e,t,r,n,o)=>{let s=await Bd(e,t.secretAccessKey,t.accessKeyId),i=`${r}:${n}:${o}:${le(s)}:${t.sessionToken}`;if(i in uo)return uo[i];for(Ei.push(i);Ei.length>Od;)delete uo[Ei.shift()];let a=`AWS4${t.secretAccessKey}`;for(let c of[r,n,o,xi])a=await Bd(e,a,c);return uo[i]=a};var Bd=(e,t,r)=>{let n=new e(t);return n.update(Se(r)),n.digest()};var po=({headers:e},t,r)=>{let n={};for(let o of Object.keys(e).sort()){if(e[o]==null)continue;let s=o.toLowerCase();(s in Nd||t!=null&&t.has(s)||Td.test(s)||Id.test(s))&&(!r||r&&!r.has(s))||(n[s]=e[o].trim().replace(/\s+/g," "))}return n};var Xe=e=>encodeURIComponent(e).replace(/[!'()*]/g,nx),nx=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`;var wi=({query:e={}})=>{let t=[],r={};for(let n of Object.keys(e).sort()){if(n.toLowerCase()===kd)continue;t.push(n);let o=e[n];typeof o=="string"?r[n]=`${Xe(n)}=${Xe(o)}`:Array.isArray(o)&&(r[n]=o.slice(0).reduce((s,i)=>s.concat([`${Xe(n)}=${Xe(i)}`]),[]).sort().join("&"))}return t.map(n=>r[n]).filter(n=>n).join("&")};var yn=async({headers:e,body:t},r)=>{for(let n of Object.keys(e))if(n.toLowerCase()===pn)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||Br(t)){let n=new r;return n.update(Se(t)),le(await n.digest())}return Pd};var Fd=(e,t)=>{e=e.toLowerCase();for(let r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1};var yo=({headers:e,query:t,...r})=>({...r,headers:{...e},query:t?ox(t):void 0}),ox=e=>Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{});var bi=(e,t={})=>{var o;let{headers:r,query:n={}}=typeof e.clone=="function"?e.clone():yo(e);for(let s of Object.keys(r)){let i=s.toLowerCase();i.slice(0,6)==="x-amz-"&&!((o=t.unhoistableHeaders)!=null&&o.has(i))&&(n[s]=r[s],delete r[s])}return{...e,headers:r,query:n}};var go=e=>{e=typeof e.clone=="function"?e.clone():yo(e);for(let t of Object.keys(e.headers))_d.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e};var Ld=e=>sx(e).toISOString().replace(/\.\d{3}Z$/,"Z"),sx=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;var Sr=class{constructor({applyChecksum:t,credentials:r,region:n,service:o,sha256:s,uriEscapePath:i=!0}){this.headerMarshaller=new Dr(De,be),this.service=o,this.sha256=s,this.uriEscapePath=i,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=me(n),this.credentialProvider=me(r)}async presign(t,r={}){let{signingDate:n=new Date,expiresIn:o=3600,unsignableHeaders:s,unhoistableHeaders:i,signableHeaders:a,signingRegion:c,signingService:d}=r,l=await this.credentialProvider();this.validateResolvedCredentials(l);let f=c!=null?c:await this.regionProvider(),{longDate:h,shortDate:p}=Co(n);if(o>Dd)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");let C=ho(p,f,d!=null?d:this.service),x=bi(go(t),{unhoistableHeaders:i});l.sessionToken&&(x.query[yi]=l.sessionToken),x.query[wd]=fo,x.query[bd]=`${l.accessKeyId}/${C}`,x.query[hi]=h,x.query[Ad]=o.toString(10);let b=po(x,s,a);return x.query[Sd]=zd(b),x.query[pi]=await this.getSignature(h,C,this.getSigningKey(l,f,p,d),this.createCanonicalRequest(x,b,await yn(t,this.sha256))),x}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:o,signingRegion:s,signingService:i}){let a=s!=null?s:await this.regionProvider(),{shortDate:c,longDate:d}=Co(n),l=ho(c,a,i!=null?i:this.service),f=await yn({headers:{},body:r},this.sha256),h=new this.sha256;h.update(t);let p=le(await h.digest()),C=[vd,d,l,o,p,f].join(`
`);return this.signString(C,{signingDate:n,signingRegion:a,signingService:i})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:o}){return this.signEvent({headers:this.headerMarshaller.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:o,priorSignature:t.priorSignature}).then(i=>({message:t.message,signature:i}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:o}={}){let s=await this.credentialProvider();this.validateResolvedCredentials(s);let i=n!=null?n:await this.regionProvider(),{shortDate:a}=Co(r),c=new this.sha256(await this.getSigningKey(s,i,a,o));return c.update(Se(t)),le(await c.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:o,signingRegion:s,signingService:i}={}){let a=await this.credentialProvider();this.validateResolvedCredentials(a);let c=s!=null?s:await this.regionProvider(),d=go(t),{longDate:l,shortDate:f}=Co(r),h=ho(f,c,i!=null?i:this.service);d.headers[Ci]=l,a.sessionToken&&(d.headers[Rd]=a.sessionToken);let p=await yn(d,this.sha256);!Fd(pn,d.headers)&&this.applyChecksum&&(d.headers[pn]=p);let C=po(d,o,n),x=await this.getSignature(l,h,this.getSigningKey(a,c,f,i),this.createCanonicalRequest(d,C,p));return d.headers[gi]=`${fo} Credential=${a.accessKeyId}/${h}, SignedHeaders=${zd(C)}, Signature=${x}`,d}createCanonicalRequest(t,r,n){let o=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${wi(t)}
${o.map(s=>`${s}:${r[s]}`).join(`
`)}

${o.join(";")}
${n}`}async createStringToSign(t,r,n){let o=new this.sha256;o.update(Se(n));let s=await o.digest();return`${fo}
${t}
${r}
${le(s)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){let r=[];for(let s of t.split("/"))(s==null?void 0:s.length)!==0&&s!=="."&&(s===".."?r.pop():r.push(s));let n=`${t!=null&&t.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&(t!=null&&t.endsWith("/"))?"/":""}`;return encodeURIComponent(n).replace(/%2F/g,"/")}return t}async getSignature(t,r,n,o){let s=await this.createStringToSign(t,r,o),i=new this.sha256(await n);return i.update(Se(s)),le(await i.digest())}getSigningKey(t,r,n,o){return Md(this.sha256,t,n,r,o||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}},Co=e=>{let t=Ld(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},zd=e=>Object.keys(e).sort().join(";");var ix=3e5,xo=e=>{let t=e.credentials?ax(e.credentials):e.credentialDefaultProvider(e),{signingEscapePath:r=!0,systemClockOffset:n=e.systemClockOffset||0,sha256:o}=e,s;return e.signer?s=me(e.signer):e.regionInfoProvider?s=()=>me(e.region)().then(async i=>[await e.regionInfoProvider(i,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},i]).then(([i,a])=>{let{signingRegion:c,signingService:d}=i;e.signingRegion=e.signingRegion||c||a,e.signingName=e.signingName||d||e.serviceId;let l={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:r},f=e.signerConstructor||Sr;return new f(l)}):s=async i=>{i=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await me(e.region)(),properties:{}},i);let a=i.signingRegion,c=i.signingName;e.signingRegion=e.signingRegion||a,e.signingName=e.signingName||c||e.serviceId;let d={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:o,uriEscapePath:r},l=e.signerConstructor||Sr;return new l(d)},{...e,systemClockOffset:n,signingEscapePath:r,credentials:t,signer:s}};var ax=e=>typeof e=="function"?jt(e,t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<ix,t=>t.expiration!==void 0):me(e);var Eo=e=>new Date(Date.now()+e);var $d=(e,t)=>Math.abs(Eo(t).getTime()-e)>=3e5;var Si=(e,t)=>{let r=Date.parse(e);return $d(r,t)?r-Date.now():t};var cx=e=>(t,r)=>async function(n){var d,l,f,h;if(!U.isInstance(n.request))return t(n);let o=(f=(l=(d=r.endpointV2)==null?void 0:d.properties)==null?void 0:l.authSchemes)==null?void 0:f[0],s=(o==null?void 0:o.name)==="sigv4a"?(h=o==null?void 0:o.signingRegionSet)==null?void 0:h.join(","):void 0,i=await e.signer(o),a=await t({...n,request:await i.sign(n.request,{signingDate:Eo(e.systemClockOffset),signingRegion:s||r.signing_region,signingService:r.signing_service})}).catch(p=>{var x;let C=(x=p.ServerTime)!=null?x:Ud(p.$response);throw C&&(e.systemClockOffset=Si(C,e.systemClockOffset)),p}),c=Ud(a.response);return c&&(e.systemClockOffset=Si(c,e.systemClockOffset)),a},Ud=e=>{var t,r,n;return dn.isInstance(e)?(n=(t=e.headers)==null?void 0:t.date)!=null?n:(r=e.headers)==null?void 0:r.Date:void 0},dx={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},wo=e=>({applyToStack:t=>{t.addRelativeTo(cx(e),dx)}});function Gt(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}var Ai={partitions:[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"il-central-1":{description:"Israel (Tel Aviv)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],version:"1.1"};var jd=Ai,qd="",mx=e=>{let{partitions:t}=jd;for(let n of t){let{regions:o,outputs:s}=n;for(let[i,a]of Object.entries(o))if(i===e)return{...s,...a}}for(let n of t){let{regionRegex:o,outputs:s}=n;if(new RegExp(o).test(e))return{...s}}let r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},Kd=(e,t="")=>{jd=e,qd=t},fx=()=>{Kd(Ai,"")},_i=()=>qd;var ux=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),bo=e=>ux.test(e)||e.startsWith("[")&&e.endsWith("]");var yt="endpoints";function Be(e){return typeof e!="object"||e==null?e:"ref"in e?`$${Be(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(Be).join(", ")})`:JSON.stringify(e,null,2)}var G=class extends Error{constructor(t){super(t),this.name="EndpointError"}};var Ni={};Hn(Ni,{aws:()=>Ao,booleanEquals:()=>yx,getAttr:()=>ki,isSet:()=>gx,isValidHostLabel:()=>So,not:()=>Cx,parseURL:()=>xx,stringEquals:()=>Ex,substring:()=>wx,uriEncode:()=>bx});var Ao={};Hn(Ao,{getUserAgentPrefix:()=>_i,isVirtualHostableS3Bucket:()=>Gd,parseArn:()=>px,partition:()=>mx,setPartitionInfo:()=>Kd,useDefaultPartitionInfo:()=>fx});var hx=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),So=(e,t=!1)=>{if(!t)return hx.test(e);let r=e.split(".");for(let n of r)if(!So(n))return!1;return!0};var Gd=(e,t=!1)=>{if(t){for(let r of e.split("."))if(!Gd(r))return!1;return!0}return!(!So(e)||e.length<3||e.length>63||e!==e.toLowerCase()||bo(e))};var px=e=>{let t=e.split(":");if(t.length<6)return null;let[r,n,o,s,i,...a]=t;return r!=="arn"||n===""||o===""||a[0]===""?null:{partition:n,service:o,region:s,accountId:i,resourceId:a[0].includes("/")?a[0].split("/"):a}};var yx=(e,t)=>e===t;var Hd=e=>{let t=e.split("."),r=[];for(let n of t){let o=n.indexOf("[");if(o!==-1){if(n.indexOf("]")!==n.length-1)throw new G(`Path: '${e}' does not end with ']'`);let s=n.slice(o+1,-1);if(Number.isNaN(parseInt(s)))throw new G(`Invalid array index: '${s}' in path: '${e}'`);o!==0&&r.push(n.slice(0,o)),r.push(s)}else r.push(n)}return r};var ki=(e,t)=>Hd(t).reduce((r,n)=>{if(typeof r!="object")throw new G(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e);var gx=e=>e!=null;var Cx=e=>!e;var Vd;(function(e){e.AAAA="AAAA",e.A="A"})(Vd||(Vd={}));var Ri={[wr.HTTP]:80,[wr.HTTPS]:443},xx=e=>{let t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){let{hostname:h,port:p,protocol:C="",path:x="",query:b={}}=e,ee=new URL(`${C}//${h}${p?`:${p}`:""}${x}`);return ee.search=Object.entries(b).map(([$,Ge])=>`${$}=${Ge}`).join("&"),ee}return new URL(e)}catch{return null}})();if(!t)return console.error(`Unable to parse ${JSON.stringify(e)} as a whatwg URL.`),null;let r=t.href,{host:n,hostname:o,pathname:s,protocol:i,search:a}=t;if(a)return null;let c=i.slice(0,-1);if(!Object.values(wr).includes(c))return null;let d=bo(o),l=r.includes(`${n}:${Ri[c]}`)||typeof e=="string"&&e.includes(`${n}:${Ri[c]}`),f=`${n}${l?`:${Ri[c]}`:""}`;return{scheme:c,authority:f,path:s,normalizedPath:s.endsWith("/")?s:`${s}/`,isIp:d}};var Ex=(e,t)=>e===t;var wx=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r);var bx=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`);var _o=(e,t)=>{let r=[],n={...t.endpointParams,...t.referenceRecord},o=0;for(;o<e.length;){let s=e.indexOf("{",o);if(s===-1){r.push(e.slice(o));break}r.push(e.slice(o,s));let i=e.indexOf("}",s);if(i===-1){r.push(e.slice(s));break}e[s+1]==="{"&&e[i+1]==="}"&&(r.push(e.slice(s+1,i)),o=i+2);let a=e.substring(s+1,i);if(a.includes("#")){let[c,d]=a.split("#");r.push(ki(n[c],d))}else r.push(n[a]);o=i+1}return r.join("")};var Wd=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e];var Ht=(e,t,r)=>{if(typeof e=="string")return _o(e,r);if(e.fn)return ko(e,r);if(e.ref)return Wd(e,r);throw new G(`'${t}': ${String(e)} is not a string, function or reference.`)};var ko=({fn:e,argv:t},r)=>{let n=t.map(o=>["boolean","number"].includes(typeof o)?o:Ht(o,"arg",r));return e.split(".").reduce((o,s)=>o[s],Ni)(...n)};var Yd=({assign:e,...t},r)=>{var o,s;if(e&&e in r.referenceRecord)throw new G(`'${e}' is already defined in Reference Record.`);let n=ko(t,r);return(s=(o=r.logger)==null?void 0:o.debug)==null||s.call(o,yt,`evaluateCondition: ${Be(t)} = ${Be(n)}`),{result:n===""?!0:!!n,...e!=null&&{toAssign:{name:e,value:n}}}};var Fr=(e=[],t)=>{var n,o;let r={};for(let s of e){let{result:i,toAssign:a}=Yd(s,{...t,referenceRecord:{...t.referenceRecord,...r}});if(!i)return{result:i};a&&(r[a.name]=a.value,(o=(n=t.logger)==null?void 0:n.debug)==null||o.call(n,yt,`assign: ${a.name} := ${Be(a.value)}`))}return{result:!0,referenceRecord:r}};var Qd=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:o.map(s=>{let i=Ht(s,"Header value entry",t);if(typeof i!="string")throw new G(`Header '${n}' value '${i}' is not a string`);return i})}),{});var Ti=(e,t)=>{if(Array.isArray(e))return e.map(r=>Ti(r,t));switch(typeof e){case"string":return _o(e,t);case"object":if(e===null)throw new G(`Unexpected endpoint property: ${e}`);return Ro(e,t);case"boolean":return e;default:throw new G(`Unexpected endpoint property type: ${typeof e}`)}};var Ro=(e,t)=>Object.entries(e).reduce((r,[n,o])=>({...r,[n]:Ti(o,t)}),{});var Xd=(e,t)=>{let r=Ht(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw console.error(`Failed to construct URL with ${r}`,n),n}throw new G(`Endpoint URL must be a string, got ${typeof r}`)};var Jd=(e,t)=>{var l,f;let{conditions:r,endpoint:n}=e,{result:o,referenceRecord:s}=Fr(r,t);if(!o)return;let i={...t,referenceRecord:{...t.referenceRecord,...s}},{url:a,properties:c,headers:d}=n;return(f=(l=t.logger)==null?void 0:l.debug)==null||f.call(l,yt,`Resolving endpoint from template: ${Be(n)}`),{...d!=null&&{headers:Qd(d,i)},...c!=null&&{properties:Ro(c,i)},url:Xd(a,i)}};var Zd=(e,t)=>{let{conditions:r,error:n}=e,{result:o,referenceRecord:s}=Fr(r,t);if(o)throw new G(Ht(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...s}}))};var el=(e,t)=>{let{conditions:r,rules:n}=e,{result:o,referenceRecord:s}=Fr(r,t);if(o)return No(n,{...t,referenceRecord:{...t.referenceRecord,...s}})};var No=(e,t)=>{for(let r of e)if(r.type==="endpoint"){let n=Jd(r,t);if(n)return n}else if(r.type==="error")Zd(r,t);else if(r.type==="tree"){let n=el(r,t);if(n)return n}else throw new G(`Unknown endpoint rule: ${r}`);throw new G("Rules evaluation failed")};var Vt=(e,t)=>{var d,l,f,h,p,C;let{endpointParams:r,logger:n}=t,{parameters:o,rules:s}=e;(l=(d=t.logger)==null?void 0:d.debug)==null||l.call(d,`${yt} Initial EndpointParams: ${Be(r)}`);let i=Object.entries(o).filter(([,x])=>x.default!=null).map(([x,b])=>[x,b.default]);if(i.length>0)for(let[x,b]of i)r[x]=(f=r[x])!=null?f:b;let a=Object.entries(o).filter(([,x])=>x.required).map(([x])=>x);for(let x of a)if(r[x]==null)throw new G(`Missing required parameter: '${x}'`);let c=No(s,{endpointParams:r,logger:n,referenceRecord:{}});if((h=t.endpointParams)!=null&&h.Endpoint)try{let x=new URL(t.endpointParams.Endpoint),{protocol:b,port:ee}=x;c.url.protocol=b,c.url.port=ee}catch{}return(C=(p=t.logger)==null?void 0:p.debug)==null||C.call(p,`${yt} Resolved endpoint: ${Be(c)}`),c};var Ii="user-agent",To="x-amz-user-agent",vi=" ",Io="/",tl=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,rl=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,Pi="-";var Sx=e=>(t,r)=>async n=>{var h,p;let{request:o}=n;if(!U.isInstance(o))return t(n);let{headers:s}=o,i=((h=r==null?void 0:r.userAgent)==null?void 0:h.map(Oi))||[],a=(await e.defaultUserAgentProvider()).map(Oi),c=((p=e==null?void 0:e.customUserAgent)==null?void 0:p.map(Oi))||[],d=_i(),l=(d?[d]:[]).concat([...a,...i,...c]).join(vi),f=[...a.filter(C=>C.startsWith("aws-sdk-")),...c].join(vi);return e.runtime!=="browser"?(f&&(s[To]=s[To]?`${s[Ii]} ${f}`:f),s[Ii]=l):s[To]=l,t({...n,request:o})},Oi=e=>{var i;let t=e[0].split(Io).map(a=>a.replace(tl,Pi)).join(Io),r=(i=e[1])==null?void 0:i.replace(rl,Pi),n=t.indexOf(Io),o=t.substring(0,n),s=t.substring(n+1);return o==="api"&&(s=s.toLowerCase()),[o,s,r].filter(a=>a&&a.length>0).reduce((a,c,d)=>{switch(d){case 0:return c;case 1:return`${a}/${c}`;default:return`${a}#${c}`}},"")},Ax={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Wt=e=>({applyToStack:t=>{t.add(Sx(e),Ax)}});var Me;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(Me||(Me={}));var Je=(e,t,r)=>{if(t in e){if(e[t]==="true")return!0;if(e[t]==="false")return!1;throw new Error(`Cannot load ${r} "${t}". Expected "true" or "false", got ${e[t]}.`)}};var _x="AWS_USE_DUALSTACK_ENDPOINT",kx="use_dualstack_endpoint";var Yt={environmentVariableSelector:e=>Je(e,_x,Me.ENV),configFileSelector:e=>Je(e,kx,Me.CONFIG),default:!1};var Rx="AWS_USE_FIPS_ENDPOINT",Nx="use_fips_endpoint";var Qt={environmentVariableSelector:e=>Je(e,Rx,Me.ENV),configFileSelector:e=>Je(e,Nx,Me.CONFIG),default:!1};var Tx="AWS_REGION",Ix="region",Ze={environmentVariableSelector:e=>e[Tx],configFileSelector:e=>e[Ix],default:()=>{throw new Error("Region is missing")}},Xt={preferredFile:"credentials"};var vo=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips"));var Di=e=>vo(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e;var Jt=e=>{let{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return Di(t);let n=await t();return Di(n)},useFipsEndpoint:async()=>{let n=typeof t=="string"?t:await t();return vo(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}};var nl=e=>({...e,eventStreamMarshaller:e.eventStreamSerdeProvider(e)});var gt=class e{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static isInstance(t){if(!t)return!1;let r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){let t=new e({...this,headers:{...this.headers}});return t.query&&(t.query=vx(t.query)),t}};function vx(e){return Object.keys(e).reduce((t,r)=>{let n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}var Zt=class{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;let r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}};var ol="content-length";function Px(e){return t=>async r=>{let n=r.request;if(gt.isInstance(n)){let{body:o,headers:s}=n;if(o&&Object.keys(s).map(i=>i.toLowerCase()).indexOf(ol)===-1)try{let i=e(o);n.headers={...n.headers,[ol]:String(i)}}catch{}}return t({...r,request:n})}}var Ox={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},er=e=>({applyToStack:t=>{t.add(Px(e.bodyLengthChecker),Ox)}});var sl=async e=>{let t=(e==null?void 0:e.Bucket)||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Lx(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Fx(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},Dx=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Bx=/(\d+\.){3}\d+/,Mx=/\.\./;var Fx=e=>Dx.test(e)&&!Bx.test(e)&&!Mx.test(e),Lx=e=>{let[t,r,n,o,s,i]=e.split(":"),a=t==="arn"&&e.split(":").length>=6,c=[t,r,n,s,i].filter(Boolean).length===5;if(a&&!c)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return t==="arn"&&!!r&&!!n&&!!s&&!!i};var il=(e,t,r)=>{let n=async()=>{var s;let o=(s=r[e])!=null?s:r[t];return typeof o=="function"?o():o};return e==="endpoint"||t==="endpoint"?async()=>{let o=await n();if(o&&typeof o=="object"){if("url"in o)return o.url.href;if("hostname"in o){let{protocol:s,hostname:i,port:a,path:c}=o;return`${s}//${i}${a?":"+a:""}${c}`}}return o}:n};var al=async(e,t,r,n)=>{let o=await zx(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(o,n)},zx=async(e,t,r)=>{var s;let n={},o=((s=t==null?void 0:t.getEndpointParameterInstructions)==null?void 0:s.call(t))||{};for(let[i,a]of Object.entries(o))switch(a.type){case"staticContextParams":n[i]=a.value;break;case"contextParams":n[i]=e[a.name];break;case"clientContextParams":case"builtInParams":n[i]=await il(a.name,i,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(o).length===0&&Object.assign(n,r),String(r.serviceId).toLowerCase()==="s3"&&await sl(n),n};function cl(e){let t={};if(e=e.replace(/^\?/,""),e)for(let r of e.split("&")){let[n,o=null]=r.split("=");n=decodeURIComponent(n),o&&(o=decodeURIComponent(o)),n in t?Array.isArray(t[n])?t[n].push(o):t[n]=[t[n],o]:t[n]=o}return t}var Ae=e=>{if(typeof e=="string")return Ae(new URL(e));let{hostname:t,pathname:r,port:n,protocol:o,search:s}=e,i;return s&&(i=cl(s)),{hostname:t,port:n?parseInt(n):void 0,protocol:o,path:r,query:i}};var dl=e=>typeof e=="object"?"url"in e?Ae(e.url):e:Ae(e);var ll=({config:e,instructions:t})=>(r,n)=>async o=>{var a,c;let s=await al(o.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=s,n.authSchemes=(a=s.properties)==null?void 0:a.authSchemes;let i=(c=n.authSchemes)==null?void 0:c[0];return i&&(n.signing_region=i.signingRegion,n.signing_service=i.signingName),r({...o})};var ml=(e,t)=>(r,n)=>async o=>{let{response:s}=await r(o);try{let i=await t(s,e);return{response:s,output:i}}catch(i){if(Object.defineProperty(i,"$response",{value:s}),!("$metadata"in i)){let a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";i.message+=`
  `+a}throw i}};var fl=(e,t)=>(r,n)=>async o=>{var a;let s=(a=n.endpointV2)!=null&&a.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!s)throw new Error("No valid endpoint provider available.");let i=await t(o.input,{...e,endpoint:s});return r({...o,request:i})};var $x={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Bi={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function _e(e,t,r){return{applyToStack:n=>{n.add(ml(e,r),$x),n.add(fl(e,t),Bi)}}}var Ux={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Bi.name},ke=(e,t)=>({applyToStack:r=>{r.addRelativeTo(ll({config:e,instructions:t}),Ux)}});var tr=e=>{var s,i,a;let t=(s=e.tls)!=null?s:!0,{endpoint:r}=e,n=r!=null?async()=>dl(await me(r)()):void 0;return{...e,endpoint:n,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:me((i=e.useDualstackEndpoint)!=null?i:!1),useFipsEndpoint:me((a=e.useFipsEndpoint)!=null?a:!1)}};var Ue;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(Ue||(Ue={}));var Ar=3,et=Ue.STANDARD;var ul=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],hl=["TimeoutError","RequestTimeout","RequestTimeoutException"],pl=[500,502,503,504],yl=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"];var Lr=e=>{var t,r;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||ul.includes(e.name)||((r=e.$retryable)==null?void 0:r.throttling)==!0},Po=e=>{var t;return hl.includes(e.name)||yl.includes((e==null?void 0:e.code)||"")||pl.includes(((t=e.$metadata)==null?void 0:t.httpStatusCode)||0)},gl=e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){let r=e.$metadata.httpStatusCode;return 500<=r&&r<=599&&!Po(e)}return!1};var gn=class{constructor(t){var n,o,s,i,a;this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(n=t==null?void 0:t.beta)!=null?n:.7,this.minCapacity=(o=t==null?void 0:t.minCapacity)!=null?o:1,this.minFillRate=(s=t==null?void 0:t.minFillRate)!=null?s:.5,this.scaleConstant=(i=t==null?void 0:t.scaleConstant)!=null?i:.4,this.smooth=(a=t==null?void 0:t.smooth)!=null?a:.8;let r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){let r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){let t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}let r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),Lr(t)){let o=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=o,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(o),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());let n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){let t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){let n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}};var Oo="amz-sdk-invocation-id",Do="amz-sdk-request";var Cl=()=>{let e=100;return{computeNextBackoffDelay:n=>Math.floor(Math.min(2e4,Math.random()*2**n*e)),setDelayBase:n=>{e=n}}};var Mi=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(2e4,e),getRetryCost:()=>r});var _r=class{constructor(t){this.maxAttempts=t,this.mode=Ue.STANDARD,this.capacity=500,this.retryBackoffStrategy=Cl(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return Mi({retryDelay:100,retryCount:0})}async refreshRetryTokenForRetry(t,r){let n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){let o=r.errorType;this.retryBackoffStrategy.setDelayBase(o==="THROTTLING"?500:100);let s=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),i=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,s):s,a=this.getCapacityCost(o);return this.capacity-=a,Mi({retryDelay:i,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){var r;this.capacity=Math.max(500,this.capacity+((r=t.getRetryCost())!=null?r:1))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return console.warn(`Max attempts provider could not resolve. Using default of ${Ar}`),Ar}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?10:5}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}};var Mo=class{constructor(t,r){this.maxAttemptsProvider=t,this.mode=Ue.ADAPTIVE;let{rateLimiter:n}=r!=null?r:{};this.rateLimiter=n!=null?n:new gn,this.standardRetryStrategy=new _r(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}};var Sl=Ot(require("crypto")),Lo=new Uint8Array(256),Fo=Lo.length;function Li(){return Fo>Lo.length-16&&(Sl.default.randomFillSync(Lo),Fo=0),Lo.slice(Fo,Fo+=16)}var Al=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function jx(e){return typeof e=="string"&&Al.test(e)}var _l=jx;var fe=[];for(let e=0;e<256;++e)fe.push((e+256).toString(16).substr(1));function qx(e,t=0){let r=(fe[e[t+0]]+fe[e[t+1]]+fe[e[t+2]]+fe[e[t+3]]+"-"+fe[e[t+4]]+fe[e[t+5]]+"-"+fe[e[t+6]]+fe[e[t+7]]+"-"+fe[e[t+8]]+fe[e[t+9]]+"-"+fe[e[t+10]]+fe[e[t+11]]+fe[e[t+12]]+fe[e[t+13]]+fe[e[t+14]]+fe[e[t+15]]).toLowerCase();if(!_l(r))throw TypeError("Stringified UUID is invalid");return r}var kl=qx;function Kx(e,t,r){e=e||{};let n=e.random||(e.rng||Li)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(let o=0;o<16;++o)t[r+o]=n[o];return t}return kl(n)}var zi=Kx;var $i=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`);var Rl="AWS_MAX_ATTEMPTS",Nl="max_attempts",rr={environmentVariableSelector:e=>{let t=e[Rl];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Environment variable ${Rl} mast be a number, got "${t}"`);return r},configFileSelector:e=>{let t=e[Nl];if(!t)return;let r=parseInt(t);if(Number.isNaN(r))throw new Error(`Shared config file entry ${Nl} mast be a number, got "${t}"`);return r},default:Ar},nr=e=>{var n;let{retryStrategy:t}=e,r=me((n=e.maxAttempts)!=null?n:Ar);return{...e,maxAttempts:r,retryStrategy:async()=>t||(await me(e.retryMode)()===Ue.ADAPTIVE?new Mo(r):new _r(r))}},Gx="AWS_RETRY_MODE",Hx="retry_mode",or={environmentVariableSelector:e=>e[Gx],configFileSelector:e=>e[Hx],default:et};var Vx=e=>(t,r)=>async n=>{let o=await e.retryStrategy(),s=await e.maxAttempts();if(Wx(o)){o=o;let i=await o.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,d=0,{request:l}=n;for(gt.isInstance(l)&&(l.headers[Oo]=zi());;)try{gt.isInstance(l)&&(l.headers[Do]=`attempt=${c+1}; max=${s}`);let{response:f,output:h}=await t(n);return o.recordSuccess(i),h.$metadata.attempts=c+1,h.$metadata.totalRetryDelay=d,{response:f,output:h}}catch(f){let h=Yx(f);a=$i(f);try{i=await o.refreshRetryTokenForRetry(i,h)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=d,a}c=i.getRetryCount();let p=i.getRetryDelay();d+=p,await new Promise(C=>setTimeout(C,p))}}else return o=o,o!=null&&o.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",o.mode]]),o.retry(t,n)},Wx=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",Yx=e=>{let t={errorType:Qx(e)},r=Jx(e.$response);return r&&(t.retryAfterHint=r),t},Qx=e=>Lr(e)?"THROTTLING":Po(e)?"TRANSIENT":gl(e)?"SERVER_ERROR":"CLIENT_ERROR",Xx={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},sr=e=>({applyToStack:t=>{t.add(Vx(e),Xx)}}),Jx=e=>{if(!Zt.isInstance(e))return;let t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;let r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};var tt=class{trace(){}debug(){}info(){}warn(){}error(){}};var $r=()=>{let e=[],t=[],r=new Set,n=l=>l.sort((f,h)=>Tl[h.step]-Tl[f.step]||Il[h.priority||"normal"]-Il[f.priority||"normal"]),o=l=>{let f=!1,h=p=>p.name&&p.name===l?(f=!0,r.delete(l),!1):!0;return e=e.filter(h),t=t.filter(h),f},s=l=>{let f=!1,h=p=>p.middleware===l?(f=!0,p.name&&r.delete(p.name),!1):!0;return e=e.filter(h),t=t.filter(h),f},i=l=>(e.forEach(f=>{l.add(f.middleware,{...f})}),t.forEach(f=>{l.addRelativeTo(f.middleware,{...f})}),l),a=l=>{let f=[];return l.before.forEach(h=>{h.before.length===0&&h.after.length===0?f.push(h):f.push(...a(h))}),f.push(l),l.after.reverse().forEach(h=>{h.before.length===0&&h.after.length===0?f.push(h):f.push(...a(h))}),f},c=(l=!1)=>{let f=[],h=[],p={};return e.forEach(x=>{let b={...x,before:[],after:[]};b.name&&(p[b.name]=b),f.push(b)}),t.forEach(x=>{let b={...x,before:[],after:[]};b.name&&(p[b.name]=b),h.push(b)}),h.forEach(x=>{if(x.toMiddleware){let b=p[x.toMiddleware];if(b===void 0){if(l)return;throw new Error(`${x.toMiddleware} is not found when adding ${x.name||"anonymous"} middleware ${x.relation} ${x.toMiddleware}`)}x.relation==="after"&&b.after.push(x),x.relation==="before"&&b.before.push(x)}}),n(f).map(a).reduce((x,b)=>(x.push(...b),x),[])},d={add:(l,f={})=>{let{name:h,override:p}=f,C={step:"initialize",priority:"normal",middleware:l,...f};if(h){if(r.has(h)){if(!p)throw new Error(`Duplicate middleware name '${h}'`);let x=e.findIndex(ee=>ee.name===h),b=e[x];if(b.step!==C.step||b.priority!==C.priority)throw new Error(`"${h}" middleware with ${b.priority} priority in ${b.step} step cannot be overridden by same-name middleware with ${C.priority} priority in ${C.step} step.`);e.splice(x,1)}r.add(h)}e.push(C)},addRelativeTo:(l,f)=>{let{name:h,override:p}=f,C={middleware:l,...f};if(h){if(r.has(h)){if(!p)throw new Error(`Duplicate middleware name '${h}'`);let x=t.findIndex(ee=>ee.name===h),b=t[x];if(b.toMiddleware!==C.toMiddleware||b.relation!==C.relation)throw new Error(`"${h}" middleware ${b.relation} "${b.toMiddleware}" middleware cannot be overridden by same-name middleware ${C.relation} "${C.toMiddleware}" middleware.`);t.splice(x,1)}r.add(h)}t.push(C)},clone:()=>i($r()),use:l=>{l.applyToStack(d)},remove:l=>typeof l=="string"?o(l):s(l),removeByTag:l=>{let f=!1,h=p=>{let{tags:C,name:x}=p;return C&&C.includes(l)?(x&&r.delete(x),f=!0,!1):!0};return e=e.filter(h),t=t.filter(h),f},concat:l=>{let f=i($r());return f.use(l),f},applyToStack:i,identify:()=>c(!0).map(l=>l.name+": "+(l.tags||[]).join(",")),resolve:(l,f)=>{for(let h of c().map(p=>p.middleware).reverse())l=h(l,f);return l}};return d},Tl={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Il={high:3,normal:2,low:1};var rt=class{constructor(t){this.middlewareStack=$r(),this.config=t}send(t,r,n){let o=typeof r!="function"?r:void 0,s=typeof r=="function"?r:n,i=t.resolveMiddleware(this.middlewareStack,this.config,o);if(s)i(t).then(a=>s(null,a.output),a=>s(a)).catch(()=>{});else return i(t).then(a=>a.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}};var Zx=/^[A-Za-z0-9+/]*={0,2}$/,nt=e=>{if(e.length*3%4!==0)throw new TypeError("Incorrect padding on base64 string.");if(!Zx.exec(e))throw new TypeError("Invalid base64 string.");let t=Mr(e,"base64");return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)};var ot=e=>pt(e.buffer,e.byteOffset,e.byteLength).toString("base64");function vl(e,t="utf-8"){return t==="base64"?ot(e):De(e)}function Pl(e,t){return t==="base64"?Ct.mutate(nt(e)):Ct.mutate(be(e))}var Ct=class e extends Uint8Array{static fromString(t,r="utf-8"){switch(typeof t){case"string":return Pl(t,r);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,e.prototype),t}transformToString(t="utf-8"){return vl(this,t)}};var Ol=require("stream"),Dl=(e,t)=>{let{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:o,checksumLocationName:s,streamHasher:i}=t,a=r!==void 0&&o!==void 0&&s!==void 0&&i!==void 0,c=a?i(o,e):void 0,d=new Ol.Readable({read:()=>{}});return e.on("data",l=>{let f=n(l)||0;d.push(`${f.toString(16)}\r
`),d.push(l),d.push(`\r
`)}),e.on("end",async()=>{if(d.push(`0\r
`),a){let l=r(await c);d.push(`${s}:${l}\r
`),d.push(`\r
`)}d.push(null)}),d};function Ui(e){let t=[];for(let r of Object.keys(e).sort()){let n=e[r];if(r=Xe(r),Array.isArray(n))for(let o=0,s=n.length;o<s;o++)t.push(`${r}=${Xe(n[o])}`);else{let o=r;(n||typeof n=="string")&&(o+=`=${Xe(n)}`),t.push(o)}}return t.join("&")}var zo=require("http"),$o=require("https");var Bl=["ECONNRESET","EPIPE","ETIMEDOUT"];var ji=e=>{let t={};for(let r of Object.keys(e)){let n=e[r];t[r]=Array.isArray(n)?n.join(","):n}return t};var Ml=(e,t,r=0)=>{if(!r)return;let n=setTimeout(()=>{e.destroy(),t(Object.assign(new Error(`Socket timed out without establishing a connection within ${r} ms`),{name:"TimeoutError"}))},r);e.on("socket",o=>{o.connecting?o.on("connect",()=>{clearTimeout(n)}):clearTimeout(n)})};var Fl=(e,{keepAlive:t,keepAliveMsecs:r})=>{t===!0&&e.on("socket",n=>{n.setKeepAlive(t,r||0)})};var Ll=(e,t,r=0)=>{e.setTimeout(r,()=>{e.destroy(),t(Object.assign(new Error(`Connection timed out after ${r} ms`),{name:"TimeoutError"}))})};var $l=require("stream"),zl=1e3;async function qi(e,t,r=zl){var a;let n=(a=t.headers)!=null?a:{},o=n.Expect||n.expect,s=-1,i=!1;o==="100-continue"&&await Promise.race([new Promise(c=>{s=Number(setTimeout(c,Math.max(zl,r)))}),new Promise(c=>{e.on("continue",()=>{clearTimeout(s),c()}),e.on("error",()=>{i=!0,clearTimeout(s),c()})})]),i||eE(e,t.body)}function eE(e,t){t instanceof $l.Readable?t.pipe(e):t?e.end(Buffer.from(t)):e.end()}var st=class{constructor(t){this.metadata={handlerProtocol:"http/1.1"},this.configProvider=new Promise((r,n)=>{typeof t=="function"?t().then(o=>{r(this.resolveDefaultConfig(o))}).catch(n):r(this.resolveDefaultConfig(t))})}resolveDefaultConfig(t){let{requestTimeout:r,connectionTimeout:n,socketTimeout:o,httpAgent:s,httpsAgent:i}=t||{},a=!0,c=50;return{connectionTimeout:n,requestTimeout:r!=null?r:o,httpAgent:s||new zo.Agent({keepAlive:a,maxSockets:c}),httpsAgent:i||new $o.Agent({keepAlive:a,maxSockets:c})}}destroy(){var t,r,n,o;(r=(t=this.config)==null?void 0:t.httpAgent)==null||r.destroy(),(o=(n=this.config)==null?void 0:n.httpsAgent)==null||o.destroy()}async handle(t,{abortSignal:r}={}){return this.config||(this.config=await this.configProvider),new Promise((n,o)=>{var b,ee;let s,i=async $=>{await s,n($)},a=async $=>{await s,o($)};if(!this.config)throw new Error("Node HTTP request handler config is not resolved");if(r!=null&&r.aborted){let $=new Error("Request aborted");$.name="AbortError",a($);return}let c=t.protocol==="https:",d=Ui(t.query||{}),l;if(t.username!=null||t.password!=null){let $=(b=t.username)!=null?b:"",Ge=(ee=t.password)!=null?ee:"";l=`${$}:${Ge}`}let f=t.path;d&&(f+=`?${d}`),t.fragment&&(f+=`#${t.fragment}`);let h={headers:t.headers,host:t.hostname,method:t.method,path:f,port:t.port,agent:c?this.config.httpsAgent:this.config.httpAgent,auth:l},C=(c?$o.request:zo.request)(h,$=>{let Ge=new Zt({statusCode:$.statusCode||-1,reason:$.statusMessage,headers:ji($.headers),body:$});i({response:Ge})});C.on("error",$=>{Bl.includes($.code)?a(Object.assign($,{name:"TimeoutError"})):a($)}),Ml(C,a,this.config.connectionTimeout),Ll(C,a,this.config.requestTimeout),r&&(r.onabort=()=>{C.abort();let $=new Error("Request aborted");$.name="AbortError",a($)});let x=h.agent;typeof x=="object"&&"keepAlive"in x&&Fl(C,{keepAlive:x.keepAlive,keepAliveMsecs:x.keepAliveMsecs}),s=qi(C,t,this.config.requestTimeout).catch(o)})}updateHttpClientConfig(t,r){this.config=void 0,this.configProvider=this.configProvider.then(n=>({...n,[t]:r}))}httpHandlerConfigs(){var t;return(t=this.config)!=null?t:{}}};var Ki=class{constructor(t){this.sessions=[],this.sessions=t!=null?t:[]}poll(){if(this.sessions.length>0)return this.sessions.shift()}offerLast(t){this.sessions.push(t)}contains(t){return this.sessions.includes(t)}remove(t){this.sessions=this.sessions.filter(r=>r!==t)}[Symbol.iterator](){return this.sessions[Symbol.iterator]()}destroy(t){for(let r of this.sessions)r===t&&(r.destroyed||r.destroy())}};var Ul=require("stream"),Uo=class extends Ul.Writable{constructor(){super(...arguments),this.bufferedBytes=[]}_write(t,r,n){this.bufferedBytes.push(t),n()}};var it=e=>new Promise((t,r)=>{let n=new Uo;e.pipe(n),e.on("error",o=>{n.end(),r(o)}),n.on("error",r),n.on("finish",function(){let o=new Uint8Array(Buffer.concat(this.bufferedBytes));t(o)})});var jo=require("stream"),ql=require("util"),jl="The stream has already been transformed.",Kl=e=>{var n,o;if(!(e instanceof jo.Readable)){let s=((o=(n=e==null?void 0:e.__proto__)==null?void 0:n.constructor)==null?void 0:o.name)||e;throw new Error(`Unexpected stream implementation, expect Stream.Readable instance, got ${s}`)}let t=!1,r=async()=>{if(t)throw new Error(jl);return t=!0,await it(e)};return Object.assign(e,{transformToByteArray:r,transformToString:async s=>{let i=await r();return s===void 0||Buffer.isEncoding(s)?pt(i.buffer,i.byteOffset,i.byteLength).toString(s):new ql.TextDecoder(s).decode(i)},transformToWebStream:()=>{if(t)throw new Error(jl);if(e.readableFlowing!==null)throw new Error("The stream has been consumed by other callbacks.");if(typeof jo.Readable.toWeb!="function")throw new Error("Readable.toWeb() is not supported. Please make sure you are using Node.js >= 17.0.0, or polyfill is available.");return t=!0,jo.Readable.toWeb(e)}})};var xt=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return Ct.mutate(e);if(!e)return Ct.mutate(new Uint8Array);let r=t.streamCollector(e);return Ct.mutate(await r)};var ge=class{constructor(){this.middlewareStack=$r()}};var Te="***SensitiveInformation***";var Gl=(e,t)=>{for(let r of Object.keys(e)){let n=e[r],o=async function(i,a,c){let d=new n(i);if(typeof a=="function")this.send(d,a);else if(typeof c=="function"){if(typeof a!="object")throw new Error(`Expected http options but got ${typeof a}`);this.send(d,a||{},c)}else return this.send(d,a)},s=(r[0].toLowerCase()+r.slice(1)).replace(/Command$/,"");t.prototype[s]=o}};var Yl=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}};var tE=e=>{if(e!=null){if(typeof e=="string"){let t=parseFloat(e);if(!Number.isNaN(t))return String(t)!==String(e)&&em.warn(Zl(`Expected number but observed string: ${e}`)),t}if(typeof e=="number")return e;throw new TypeError(`Expected number, got ${typeof e}: ${e}`)}},rE=Math.ceil(34028234663852886e22),Hl=e=>{let t=tE(e);if(t!==void 0&&!Number.isNaN(t)&&t!==1/0&&t!==-1/0&&Math.abs(t)>rE)throw new TypeError(`Expected 32-bit float, got ${e}`);return t},qo=e=>{if(e!=null){if(Number.isInteger(e)&&!Number.isNaN(e))return e;throw new TypeError(`Expected integer, got ${typeof e}: ${e}`)}};var Ur=e=>Gi(e,32),Vl=e=>Gi(e,16),Wl=e=>Gi(e,8),Gi=(e,t)=>{let r=qo(e);if(r!==void 0&&nE(r,t)!==r)throw new TypeError(`Expected ${t}-bit integer, got ${e}`);return r},nE=(e,t)=>{switch(t){case 32:return Int32Array.of(e)[0];case 16:return Int16Array.of(e)[0];case 8:return Int8Array.of(e)[0]}},je=(e,t)=>{if(e==null)throw t?new TypeError(`Expected a non-null value for ${t}`):new TypeError("Expected a non-null value");return e},kr=e=>{if(e==null)return;if(typeof e=="object"&&!Array.isArray(e))return e;let t=Array.isArray(e)?"array":typeof e;throw new TypeError(`Expected object, got ${t}: ${e}`)},S=e=>{if(e!=null){if(typeof e=="string")return e;if(["boolean","number","bigint"].includes(typeof e))return em.warn(Zl(`Expected string, got ${typeof e}: ${e}`)),String(e);throw new TypeError(`Expected string, got ${typeof e}: ${e}`)}};var Ql=e=>Hl(typeof e=="string"?Ko(e):e),oE=/(-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?)|(-?Infinity)|(NaN)/g,Ko=e=>{let t=e.match(oE);if(t===null||t[0].length!==e.length)throw new TypeError("Expected real number, got implicit NaN");return parseFloat(e)};var Go=e=>Ur(typeof e=="string"?Ko(e):e),Xl=e=>Vl(typeof e=="string"?Ko(e):e),Jl=e=>Wl(typeof e=="string"?Ko(e):e),Zl=e=>String(new TypeError(e).stack||e).split(`
`).slice(0,5).filter(t=>!t.includes("stackTraceWarning")).join(`
`),em={warn:console.warn};var sE=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],tm=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function rm(e){let t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),o=e.getUTCDate(),s=e.getUTCHours(),i=e.getUTCMinutes(),a=e.getUTCSeconds(),c=o<10?`0${o}`:`${o}`,d=s<10?`0${s}`:`${s}`,l=i<10?`0${i}`:`${i}`,f=a<10?`0${a}`:`${a}`;return`${sE[n]}, ${c} ${tm[r]} ${t} ${d}:${l}:${f} GMT`}var XB=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?[zZ]$/);var iE=new RegExp(/^(\d{4})-(\d{2})-(\d{2})[tT](\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(([-+]\d{2}\:\d{2})|[zZ])$/),Hi=e=>{if(e==null)return;if(typeof e!="string")throw new TypeError("RFC-3339 date-times must be expressed as strings");let t=iE.exec(e);if(!t)throw new TypeError("Invalid RFC-3339 date-time value");let[r,n,o,s,i,a,c,d,l]=t,f=Xl(nm(n)),h=Cn(o,"month",1,12),p=Cn(s,"day",1,31),C=aE(f,h,p,{hours:i,minutes:a,seconds:c,fractionalMilliseconds:d});return l.toUpperCase()!="Z"&&C.setTime(C.getTime()-fE(l)),C},JB=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d{2}) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),ZB=new RegExp(/^(?:Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d{2})-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? GMT$/),e1=new RegExp(/^(?:Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( [1-9]|\d{2}) (\d{1,2}):(\d{2}):(\d{2})(?:\.(\d+))? (\d{4})$/);var aE=(e,t,r,n)=>{let o=t-1;return dE(e,o,r),new Date(Date.UTC(e,o,r,Cn(n.hours,"hour",0,23),Cn(n.minutes,"minute",0,59),Cn(n.seconds,"seconds",0,60),mE(n.fractionalMilliseconds)))};var t1=50*365*24*60*60*1e3;var cE=[31,28,31,30,31,30,31,31,30,31,30,31],dE=(e,t,r)=>{let n=cE[t];if(t===1&&lE(e)&&(n=29),r>n)throw new TypeError(`Invalid day for ${tm[t]} in ${e}: ${r}`)},lE=e=>e%4===0&&(e%100!==0||e%400===0),Cn=(e,t,r,n)=>{let o=Jl(nm(e));if(o<r||o>n)throw new TypeError(`${t} must be between ${r} and ${n}, inclusive`);return o},mE=e=>e==null?0:Ql("0."+e)*1e3,fE=e=>{let t=e[0],r=1;if(t=="+")r=1;else if(t=="-")r=-1;else throw new TypeError(`Offset direction, ${t}, must be "+" or "-"`);let n=Number(e.substring(1,3)),o=Number(e.substring(4,6));return r*(n*60+o)*60*1e3},nm=e=>{let t=0;for(;t<e.length-1&&e.charAt(t)==="0";)t++;return t===0?e:e.slice(t)};var at=class e extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,e.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}},j=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,o])=>{(e[n]==null||e[n]==="")&&(e[n]=o)});let r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e};var uE=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{let o=hE(e),s=o.httpStatusCode?o.httpStatusCode+"":void 0,i=new r({name:(t==null?void 0:t.code)||(t==null?void 0:t.Code)||n||s||"UnknownError",$fault:"client",$metadata:o});throw j(i,t)},ir=e=>({output:t,parsedBody:r,errorCode:n})=>{uE({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},hE=e=>{var t,r;return{httpStatusCode:e.statusCode,requestId:(r=(t=e.headers["x-amzn-requestid"])!=null?t:e.headers["x-amzn-request-id"])!=null?r:e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}};var ar=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};var om=!1,cr=e=>{e&&!om&&parseInt(e.substring(1,e.indexOf(".")))<14&&(om=!0)};var sm=e=>{let t=[];for(let r in Pr){let n=Pr[r];e[n]!==void 0&&t.push({algorithmId:()=>n,checksumConstructor:()=>e[n]})}return{_checksumAlgorithms:t,addChecksumAlgorithm(r){this._checksumAlgorithms.push(r)},checksumAlgorithms(){return this._checksumAlgorithms}}},im=e=>{let t={};return e.checksumAlgorithms().forEach(r=>{t[r.algorithmId()]=r.checksumConstructor()}),t};var am=e=>{let t=e.retryStrategy;return{setRetryStrategy(r){t=r},retryStrategy(){return t}}},cm=e=>{let t={};return t.retryStrategy=e.retryStrategy(),t};var jr=e=>({...sm(e),...am(e)});var qr=e=>({...im(e),...cm(e)});function Kr(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}var xn=e=>{let t="#text";for(let r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=xn(e[r]));return e};var Vi=function(){let e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),r=new t;return Object.setPrototypeOf(r,e.prototype),r};Vi.prototype=Object.create(String.prototype,{constructor:{value:Vi,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(Vi,String);function q(e,t,r){let n,o,s;if(typeof t>"u"&&typeof r>"u")n={},s=e;else{if(n=e,typeof t=="function")return o=t,s=r,pE(n,o,s);s=t}for(let i of Object.keys(s)){if(!Array.isArray(s[i])){n[i]=s[i];continue}dm(n,null,s,i)}return n}var H=(e,t)=>{let r={};for(let n in t)dm(r,e,t,n);return r},pE=(e,t,r)=>q(e,Object.entries(r).reduce((n,[o,s])=>(Array.isArray(s)?n[o]=s:typeof s=="function"?n[o]=[t,s()]:n[o]=[t,s],n),{})),dm=(e,t,r,n)=>{if(t!==null){let i=r[n];typeof i=="function"&&(i=[,i]);let[a=yE,c=gE,d=n]=i;(typeof a=="function"&&a(t[d])||typeof a!="function"&&a)&&(e[n]=c(t[d]));return}let[o,s]=r[n];if(typeof s=="function"){let i,a=o===void 0&&(i=s())!=null,c=typeof o=="function"&&!!o(void 0)||typeof o!="function"&&!!o;a?e[n]=i:c&&(e[n]=s())}else{let i=o===void 0&&s!=null,a=typeof o=="function"&&!!o(s)||typeof o!="function"&&!!o;(i||a)&&(e[n]=s)}},yE=e=>e!=null,gE=e=>e;var Wi=(e,t,r,n,o,s)=>{if(t!=null&&t[r]!==void 0){let i=n();if(i.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(o,s?i.split("/").map(a=>Kr(a)).join("/"):Kr(i))}else throw new Error("No value provided for input HTTP label: "+r+".");return e};var Gr=e=>{if(e==null)return{};if(Array.isArray(e))return e.filter(t=>t!=null);if(typeof e=="object"){let t={};for(let r of Object.keys(e))e[r]!=null&&(t[r]=Gr(e[r]));return t}return e};var lm=e=>{var t,r,n,o,s,i;return{...e,useFipsEndpoint:(t=e.useFipsEndpoint)!=null?t:!1,useDualstackEndpoint:(r=e.useDualstackEndpoint)!=null?r:!1,forcePathStyle:(n=e.forcePathStyle)!=null?n:!1,useAccelerateEndpoint:(o=e.useAccelerateEndpoint)!=null?o:!1,useGlobalEndpoint:(s=e.useGlobalEndpoint)!=null?s:!1,disableMultiregionAccessPoints:(i=e.disableMultiregionAccessPoints)!=null?i:!1,defaultSigningName:"s3"}};var mm={name:"@aws-sdk/client-s3",description:"AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",version:"3.409.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo s3",test:"yarn test:unit","test:e2e":"ts-mocha test/**/*.ispec.ts && karma start karma.conf.js","test:unit":"ts-mocha test/**/*.spec.ts"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha1-browser":"3.0.0","@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.409.0","@aws-sdk/credential-provider-node":"3.409.0","@aws-sdk/middleware-bucket-endpoint":"3.409.0","@aws-sdk/middleware-expect-continue":"3.408.0","@aws-sdk/middleware-flexible-checksums":"3.408.0","@aws-sdk/middleware-host-header":"3.408.0","@aws-sdk/middleware-location-constraint":"3.408.0","@aws-sdk/middleware-logger":"3.408.0","@aws-sdk/middleware-recursion-detection":"3.408.0","@aws-sdk/middleware-sdk-s3":"3.408.0","@aws-sdk/middleware-signing":"3.408.0","@aws-sdk/middleware-ssec":"3.408.0","@aws-sdk/middleware-user-agent":"3.408.0","@aws-sdk/signature-v4-multi-region":"3.408.0","@aws-sdk/types":"3.408.0","@aws-sdk/util-endpoints":"3.408.0","@aws-sdk/util-user-agent-browser":"3.408.0","@aws-sdk/util-user-agent-node":"3.408.0","@aws-sdk/xml-builder":"3.310.0","@smithy/config-resolver":"^2.0.5","@smithy/eventstream-serde-browser":"^2.0.5","@smithy/eventstream-serde-config-resolver":"^2.0.5","@smithy/eventstream-serde-node":"^2.0.5","@smithy/fetch-http-handler":"^2.0.5","@smithy/hash-blob-browser":"^2.0.5","@smithy/hash-node":"^2.0.5","@smithy/hash-stream-node":"^2.0.5","@smithy/invalid-dependency":"^2.0.5","@smithy/md5-js":"^2.0.5","@smithy/middleware-content-length":"^2.0.5","@smithy/middleware-endpoint":"^2.0.5","@smithy/middleware-retry":"^2.0.5","@smithy/middleware-serde":"^2.0.5","@smithy/middleware-stack":"^2.0.0","@smithy/node-config-provider":"^2.0.6","@smithy/node-http-handler":"^2.0.5","@smithy/protocol-http":"^2.0.5","@smithy/smithy-client":"^2.0.5","@smithy/types":"^2.2.2","@smithy/url-parser":"^2.0.5","@smithy/util-base64":"^2.0.0","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.6","@smithy/util-defaults-mode-node":"^2.0.6","@smithy/util-retry":"^2.0.0","@smithy/util-stream":"^2.0.5","@smithy/util-utf8":"^2.0.0","@smithy/util-waiter":"^2.0.5","fast-xml-parser":"4.2.5",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"}};var fm=(e,{stsClientCtor:t})=>xo({...e,stsClientCtor:t});var um=e=>{var t,r,n;return{...e,useDualstackEndpoint:(t=e.useDualstackEndpoint)!=null?t:!1,useFipsEndpoint:(r=e.useFipsEndpoint)!=null?r:!1,useGlobalEndpoint:(n=e.useGlobalEndpoint)!=null?n:!1,defaultSigningName:"sts"}};var hm={name:"@aws-sdk/client-sts",description:"AWS SDK for JavaScript Sts Client for Node.js, Browser and React Native",version:"3.409.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sts",test:"yarn test:unit","test:unit":"jest"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/credential-provider-node":"3.409.0","@aws-sdk/middleware-host-header":"3.408.0","@aws-sdk/middleware-logger":"3.408.0","@aws-sdk/middleware-recursion-detection":"3.408.0","@aws-sdk/middleware-sdk-sts":"3.408.0","@aws-sdk/middleware-signing":"3.408.0","@aws-sdk/middleware-user-agent":"3.408.0","@aws-sdk/types":"3.408.0","@aws-sdk/util-endpoints":"3.408.0","@aws-sdk/util-user-agent-browser":"3.408.0","@aws-sdk/util-user-agent-node":"3.408.0","@smithy/config-resolver":"^2.0.5","@smithy/fetch-http-handler":"^2.0.5","@smithy/hash-node":"^2.0.5","@smithy/invalid-dependency":"^2.0.5","@smithy/middleware-content-length":"^2.0.5","@smithy/middleware-endpoint":"^2.0.5","@smithy/middleware-retry":"^2.0.5","@smithy/middleware-serde":"^2.0.5","@smithy/middleware-stack":"^2.0.0","@smithy/node-config-provider":"^2.0.6","@smithy/node-http-handler":"^2.0.5","@smithy/protocol-http":"^2.0.5","@smithy/smithy-client":"^2.0.5","@smithy/types":"^2.2.2","@smithy/url-parser":"^2.0.5","@smithy/util-base64":"^2.0.0","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.6","@smithy/util-defaults-mode-node":"^2.0.6","@smithy/util-retry":"^2.0.0","@smithy/util-utf8":"^2.0.0","fast-xml-parser":"4.2.5",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sts",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sts"}};var Fe=class e extends at{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var Ho=class e extends Fe{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Vo=class e extends Fe{constructor(t){super({name:"MalformedPolicyDocumentException",$fault:"client",...t}),this.name="MalformedPolicyDocumentException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Wo=class e extends Fe{constructor(t){super({name:"PackedPolicyTooLargeException",$fault:"client",...t}),this.name="PackedPolicyTooLargeException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Yo=class e extends Fe{constructor(t){super({name:"RegionDisabledException",$fault:"client",...t}),this.name="RegionDisabledException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Qo=class e extends Fe{constructor(t){super({name:"IDPRejectedClaimException",$fault:"client",...t}),this.name="IDPRejectedClaimException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Xo=class e extends Fe{constructor(t){super({name:"InvalidIdentityTokenException",$fault:"client",...t}),this.name="InvalidIdentityTokenException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Jo=class e extends Fe{constructor(t){super({name:"IDPCommunicationErrorException",$fault:"client",...t}),this.name="IDPCommunicationErrorException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}};var pm=e=>({...e,...e.SecretAccessKey&&{SecretAccessKey:Te}}),ym=e=>({...e,...e.Credentials&&{Credentials:pm(e.Credentials)}});var gm=e=>({...e,...e.WebIdentityToken&&{WebIdentityToken:Te}}),Cm=e=>({...e,...e.Credentials&&{Credentials:pm(e.Credentials)}});var Ym=Ot(oa());var Qm=async(e,t)=>{let r=lf,n;return n=ff({...Ow(e,t),Action:"AssumeRole",Version:"2011-06-15"}),df(t,r,"/",void 0,n)};var Xm=async(e,t)=>{let r=lf,n;return n=ff({...Dw(e,t),Action:"AssumeRoleWithWebIdentity",Version:"2011-06-15"}),df(t,r,"/",void 0,n)};var Jm=async(e,t)=>{if(e.statusCode>=300)return Nw(e,t);let r=await sa(e.body,t),n={};return n=Uw(r.AssumeRoleResult,t),{$metadata:wt(e),...n}},Nw=async(e,t)=>{let r={...e,body:await mf(e.body,t)},n=uf(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await ef(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await tf(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await rf(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await nf(r,t);default:let o=r.body;return cf({output:e,parsedBody:o.Error,errorCode:n})}};var Zm=async(e,t)=>{if(e.statusCode>=300)return Tw(e,t);let r=await sa(e.body,t),n={};return n=jw(r.AssumeRoleWithWebIdentityResult,t),{$metadata:wt(e),...n}},Tw=async(e,t)=>{let r={...e,body:await mf(e.body,t)},n=uf(e,r.body);switch(n){case"ExpiredTokenException":case"com.amazonaws.sts#ExpiredTokenException":throw await ef(r,t);case"IDPCommunicationError":case"com.amazonaws.sts#IDPCommunicationErrorException":throw await Iw(r,t);case"IDPRejectedClaim":case"com.amazonaws.sts#IDPRejectedClaimException":throw await vw(r,t);case"InvalidIdentityToken":case"com.amazonaws.sts#InvalidIdentityTokenException":throw await Pw(r,t);case"MalformedPolicyDocument":case"com.amazonaws.sts#MalformedPolicyDocumentException":throw await tf(r,t);case"PackedPolicyTooLarge":case"com.amazonaws.sts#PackedPolicyTooLargeException":throw await rf(r,t);case"RegionDisabledException":case"com.amazonaws.sts#RegionDisabledException":throw await nf(r,t);default:let o=r.body;return cf({output:e,parsedBody:o.Error,errorCode:n})}};var ef=async(e,t)=>{let r=e.body,n=qw(r.Error,t),o=new Ho({$metadata:wt(e),...n});return j(o,r)},Iw=async(e,t)=>{let r=e.body,n=Kw(r.Error,t),o=new Jo({$metadata:wt(e),...n});return j(o,r)},vw=async(e,t)=>{let r=e.body,n=Gw(r.Error,t),o=new Qo({$metadata:wt(e),...n});return j(o,r)};var Pw=async(e,t)=>{let r=e.body,n=Hw(r.Error,t),o=new Xo({$metadata:wt(e),...n});return j(o,r)},tf=async(e,t)=>{let r=e.body,n=Vw(r.Error,t),o=new Vo({$metadata:wt(e),...n});return j(o,r)},rf=async(e,t)=>{let r=e.body,n=Ww(r.Error,t),o=new Wo({$metadata:wt(e),...n});return j(o,r)},nf=async(e,t)=>{let r=e.body,n=Yw(r.Error,t),o=new Yo({$metadata:wt(e),...n});return j(o,r)},Ow=(e,t)=>{var n,o,s,i;let r={};if(e.RoleArn!=null&&(r.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(r.RoleSessionName=e.RoleSessionName),e.PolicyArns!=null){let a=of(e.PolicyArns,t);((n=e.PolicyArns)==null?void 0:n.length)===0&&(r.PolicyArns=[]),Object.entries(a).forEach(([c,d])=>{let l=`PolicyArns.${c}`;r[l]=d})}if(e.Policy!=null&&(r.Policy=e.Policy),e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),e.Tags!=null){let a=$w(e.Tags,t);((o=e.Tags)==null?void 0:o.length)===0&&(r.Tags=[]),Object.entries(a).forEach(([c,d])=>{let l=`Tags.${c}`;r[l]=d})}if(e.TransitiveTagKeys!=null){let a=zw(e.TransitiveTagKeys,t);((s=e.TransitiveTagKeys)==null?void 0:s.length)===0&&(r.TransitiveTagKeys=[]),Object.entries(a).forEach(([c,d])=>{let l=`TransitiveTagKeys.${c}`;r[l]=d})}if(e.ExternalId!=null&&(r.ExternalId=e.ExternalId),e.SerialNumber!=null&&(r.SerialNumber=e.SerialNumber),e.TokenCode!=null&&(r.TokenCode=e.TokenCode),e.SourceIdentity!=null&&(r.SourceIdentity=e.SourceIdentity),e.ProvidedContexts!=null){let a=Fw(e.ProvidedContexts,t);((i=e.ProvidedContexts)==null?void 0:i.length)===0&&(r.ProvidedContexts=[]),Object.entries(a).forEach(([c,d])=>{let l=`ProvidedContexts.${c}`;r[l]=d})}return r};var Dw=(e,t)=>{var n;let r={};if(e.RoleArn!=null&&(r.RoleArn=e.RoleArn),e.RoleSessionName!=null&&(r.RoleSessionName=e.RoleSessionName),e.WebIdentityToken!=null&&(r.WebIdentityToken=e.WebIdentityToken),e.ProviderId!=null&&(r.ProviderId=e.ProviderId),e.PolicyArns!=null){let o=of(e.PolicyArns,t);((n=e.PolicyArns)==null?void 0:n.length)===0&&(r.PolicyArns=[]),Object.entries(o).forEach(([s,i])=>{let a=`PolicyArns.${s}`;r[a]=i})}return e.Policy!=null&&(r.Policy=e.Policy),e.DurationSeconds!=null&&(r.DurationSeconds=e.DurationSeconds),r};var of=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=Bw(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},Bw=(e,t)=>{let r={};return e.arn!=null&&(r.arn=e.arn),r},Mw=(e,t)=>{let r={};return e.ProviderArn!=null&&(r.ProviderArn=e.ProviderArn),e.ContextAssertion!=null&&(r.ContextAssertion=e.ContextAssertion),r},Fw=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=Mw(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},Lw=(e,t)=>{let r={};return e.Key!=null&&(r.Key=e.Key),e.Value!=null&&(r.Value=e.Value),r},zw=(e,t)=>{let r={},n=1;for(let o of e)o!==null&&(r[`member.${n}`]=o,n++);return r},$w=(e,t)=>{let r={},n=1;for(let o of e){if(o===null)continue;let s=Lw(o,t);Object.entries(s).forEach(([i,a])=>{r[`member.${n}.${i}`]=a}),n++}return r},sf=(e,t)=>{let r={};return e.AssumedRoleId!==void 0&&(r.AssumedRoleId=S(e.AssumedRoleId)),e.Arn!==void 0&&(r.Arn=S(e.Arn)),r},Uw=(e,t)=>{let r={};return e.Credentials!==void 0&&(r.Credentials=af(e.Credentials,t)),e.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=sf(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=Go(e.PackedPolicySize)),e.SourceIdentity!==void 0&&(r.SourceIdentity=S(e.SourceIdentity)),r};var jw=(e,t)=>{let r={};return e.Credentials!==void 0&&(r.Credentials=af(e.Credentials,t)),e.SubjectFromWebIdentityToken!==void 0&&(r.SubjectFromWebIdentityToken=S(e.SubjectFromWebIdentityToken)),e.AssumedRoleUser!==void 0&&(r.AssumedRoleUser=sf(e.AssumedRoleUser,t)),e.PackedPolicySize!==void 0&&(r.PackedPolicySize=Go(e.PackedPolicySize)),e.Provider!==void 0&&(r.Provider=S(e.Provider)),e.Audience!==void 0&&(r.Audience=S(e.Audience)),e.SourceIdentity!==void 0&&(r.SourceIdentity=S(e.SourceIdentity)),r},af=(e,t)=>{let r={};return e.AccessKeyId!==void 0&&(r.AccessKeyId=S(e.AccessKeyId)),e.SecretAccessKey!==void 0&&(r.SecretAccessKey=S(e.SecretAccessKey)),e.SessionToken!==void 0&&(r.SessionToken=S(e.SessionToken)),e.Expiration!==void 0&&(r.Expiration=je(Hi(e.Expiration))),r};var qw=(e,t)=>{let r={};return e.message!==void 0&&(r.message=S(e.message)),r};var Kw=(e,t)=>{let r={};return e.message!==void 0&&(r.message=S(e.message)),r},Gw=(e,t)=>{let r={};return e.message!==void 0&&(r.message=S(e.message)),r};var Hw=(e,t)=>{let r={};return e.message!==void 0&&(r.message=S(e.message)),r},Vw=(e,t)=>{let r={};return e.message!==void 0&&(r.message=S(e.message)),r},Ww=(e,t)=>{let r={};return e.message!==void 0&&(r.message=S(e.message)),r},Yw=(e,t)=>{let r={};return e.message!==void 0&&(r.message=S(e.message)),r},wt=e=>{var t,r;return{httpStatusCode:e.statusCode,requestId:(r=(t=e.headers["x-amzn-requestid"])!=null?t:e.headers["x-amzn-request-id"])!=null?r:e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},Qw=(e,t)=>xt(e,t).then(r=>t.utf8Encoder(r)),cf=ir(Fe),df=async(e,t,r,n,o)=>{let{hostname:s,protocol:i="https",port:a,path:c}=await e.endpoint(),d={protocol:i,hostname:s,port:a,method:"POST",path:c.endsWith("/")?c.slice(0,-1)+r:c+r,headers:t};return n!==void 0&&(d.hostname=n),o!==void 0&&(d.body=o),new U(d)},lf={"content-type":"application/x-www-form-urlencoded"},sa=(e,t)=>Qw(e,t).then(r=>{if(r.length){let n=new Ym.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o=n.parse(r),s="#text",i=Object.keys(o)[0],a=o[i];return a[s]&&(a[i]=a[s],delete a[s]),xn(a)}return{}}),mf=async(e,t)=>{var n;let r=await sa(e,t);return r.Error&&(r.Error.message=(n=r.Error.message)!=null?n:r.Error.Message),r},ff=e=>Object.entries(e).map(([t,r])=>Kr(t)+"="+Kr(r)).join("&"),uf=(e,t)=>{var r;if(((r=t.Error)==null?void 0:r.Code)!==void 0)return t.Error.Code;if(e.statusCode==404)return"NotFound"};var es=class e extends ge{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(_e(r,this.serialize,this.deserialize)),this.middlewareStack.use(ke(r,e.getEndpointParameterInstructions())),this.middlewareStack.use(wo(r));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"STSClient",commandName:"AssumeRoleCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:ym},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Qm(t,r)}deserialize(t,r){return Jm(t,r)}};var ts=class e extends ge{static getEndpointParameterInstructions(){return{UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(_e(r,this.serialize,this.deserialize)),this.middlewareStack.use(ke(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"STSClient",commandName:"AssumeRoleWithWebIdentityCommand",inputFilterSensitiveLog:gm,outputFilterSensitiveLog:Cm},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Xm(t,r)}deserialize(t,r){return Zm(t,r)}};var hf="us-east-1",pf=e=>typeof e!="function"?e===void 0?hf:e:async()=>{try{return await e()}catch{return hf}},ia=(e,t)=>{let r,n;return async(o,s)=>{if(n=o,!r){let{logger:a,region:c,requestHandler:d}=e;r=new t({logger:a,credentialDefaultProvider:()=>async()=>n,region:pf(c||e.region),...d?{requestHandler:d}:{}})}let{Credentials:i}=await r.send(new es(s));if(!i||!i.AccessKeyId||!i.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRole call with role ${s.RoleArn}`);return{accessKeyId:i.AccessKeyId,secretAccessKey:i.SecretAccessKey,sessionToken:i.SessionToken,expiration:i.Expiration}}},aa=(e,t)=>{let r;return async n=>{if(!r){let{logger:s,region:i,requestHandler:a}=e;r=new t({logger:s,region:pf(i||e.region),...a?{requestHandler:a}:{}})}let{Credentials:o}=await r.send(new ts(n));if(!o||!o.AccessKeyId||!o.SecretAccessKey)throw new Error(`Invalid response from STS.assumeRoleWithWebIdentity call with role ${n.RoleArn}`);return{accessKeyId:o.AccessKeyId,secretAccessKey:o.SecretAccessKey,sessionToken:o.SessionToken,expiration:o.Expiration}}},yf=e=>t=>e({roleAssumer:ia(t,t.stsClientCtor),roleAssumerWithWebIdentity:aa(t,t.stsClientCtor),...t});var Xw="AWS_ACCESS_KEY_ID",Jw="AWS_SECRET_ACCESS_KEY",Zw="AWS_SESSION_TOKEN",eb="AWS_CREDENTIAL_EXPIRATION",rs=()=>async()=>{let e=process.env[Xw],t=process.env[Jw],r=process.env[Zw],n=process.env[eb];if(e&&t)return{accessKeyId:e,secretAccessKey:t,...r&&{sessionToken:r},...n&&{expiration:new Date(n)}};throw new N("Unable to find environment variable credentials.")};var gf=require("os"),Cf=require("path"),ca={},tb=()=>process&&process.geteuid?`${process.geteuid()}`:"DEFAULT",Hr=()=>{let{HOME:e,USERPROFILE:t,HOMEPATH:r,HOMEDRIVE:n=`C:${Cf.sep}`}=process.env;if(e)return e;if(t)return t;if(r)return`${n}${r}`;let o=tb();return ca[o]||(ca[o]=(0,gf.homedir)()),ca[o]};var da="AWS_PROFILE",rb="default",Le=e=>e.profile||process.env[da]||rb;var xf=require("crypto"),Ef=require("path");var ns=e=>{let r=(0,xf.createHash)("sha1").update(e).digest("hex");return(0,Ef.join)(Hr(),".aws","sso","cache",`${r}.json`)};var wf=require("fs");var{readFile:nb}=wf.promises,os=async e=>{let t=ns(e),r=await nb(t,"utf8");return JSON.parse(r)};var bf=require("path");var ob="AWS_CONFIG_FILE",ss=()=>process.env[ob]||(0,bf.join)(Hr(),".aws","config");var Sf=require("path");var sb="AWS_SHARED_CREDENTIALS_FILE",Af=()=>process.env[sb]||(0,Sf.join)(Hr(),".aws","credentials");var _f=/^profile\s(["'])?([^\1]+)\1$/,kf=e=>Object.entries(e).filter(([t])=>_f.test(t)).reduce((t,[r,n])=>({...t,[_f.exec(r)[2]]:n}),{...e.default&&{default:e.default}});var ib=["__proto__","profile __proto__"],bn=e=>{let t={},r;for(let n of e.split(/\r?\n/))if(n=n.split(/(^|\s)[;#]/)[0].trim(),n[0]==="["&&n[n.length-1]==="]"){if(r=n.substring(1,n.length-1),ib.includes(r))throw new Error(`Found invalid profile name "${r}"`)}else if(r){let s=n.indexOf("="),i=0,a=n.length-1;if(s!==-1&&s!==i&&s!==a){let[d,l]=[n.substring(0,s).trim(),n.substring(s+1).trim()];t[r]=t[r]||{},t[r][d]=l}}return t};var Rf=require("fs"),{readFile:ab}=Rf.promises,la={},Sn=(e,t)=>((!la[e]||t!=null&&t.ignoreCache)&&(la[e]=ab(e,"utf8")),la[e]);var Nf=()=>({}),is=async(e={})=>{let{filepath:t=Af(),configFilepath:r=ss()}=e,n=await Promise.all([Sn(r,{ignoreCache:e.ignoreCache}).then(bn).then(kf).catch(Nf),Sn(t,{ignoreCache:e.ignoreCache}).then(bn).catch(Nf)]);return{configFile:n[0],credentialsFile:n[1]}};var Tf=/^sso-session\s(["'])?([^\1]+)\1$/,If=e=>Object.entries(e).filter(([t])=>Tf.test(t)).reduce((t,[r,n])=>({...t,[Tf.exec(r)[2]]:n}),{});var cb=()=>({}),as=async(e={})=>{var t;return Sn((t=e.configFilepath)!=null?t:ss()).then(bn).then(If).catch(cb)};var vf=(...e)=>{let t={};for(let r of e)for(let[n,o]of Object.entries(r))t[n]!==void 0?Object.assign(t[n],o):t[n]=o;return t};var lr=async e=>{let t=await is(e);return vf(t.configFile,t.credentialsFile)};var Bf=require("url");var Pf=require("buffer"),Of=require("http");function bt(e){return new Promise((t,r)=>{var o;let n=(0,Of.request)({method:"GET",...e,hostname:(o=e.hostname)==null?void 0:o.replace(/^\[(.+)\]$/,"$1")});n.on("error",s=>{r(Object.assign(new Pe("Unable to connect to instance metadata service"),s)),n.destroy()}),n.on("timeout",()=>{r(new Pe("TimeoutError from instance metadata service")),n.destroy()}),n.on("response",s=>{let{statusCode:i=400}=s;(i<200||300<=i)&&(r(Object.assign(new Pe("Error response received from instance metadata service"),{statusCode:i})),n.destroy());let a=[];s.on("data",c=>{a.push(c)}),s.on("end",()=>{t(Pf.Buffer.concat(a)),n.destroy()})}),n.end()})}var cs=e=>!!e&&typeof e=="object"&&typeof e.AccessKeyId=="string"&&typeof e.SecretAccessKey=="string"&&typeof e.Token=="string"&&typeof e.Expiration=="string",ds=e=>({accessKeyId:e.AccessKeyId,secretAccessKey:e.SecretAccessKey,sessionToken:e.Token,expiration:new Date(e.Expiration)});var ls=({maxRetries:e=0,timeout:t=1e3})=>({maxRetries:e,timeout:t});var An=(e,t)=>{let r=e();for(let n=0;n<t;n++)r=r.catch(e);return r};var _n="AWS_CONTAINER_CREDENTIALS_FULL_URI",kn="AWS_CONTAINER_CREDENTIALS_RELATIVE_URI",Df="AWS_CONTAINER_AUTHORIZATION_TOKEN",ms=(e={})=>{let{timeout:t,maxRetries:r}=ls(e);return()=>An(async()=>{let n=await ub(),o=JSON.parse(await db(t,n));if(!cs(o))throw new N("Invalid response received from instance metadata service.");return ds(o)},r)},db=async(e,t)=>(process.env[Df]&&(t.headers={...t.headers,Authorization:process.env[Df]}),(await bt({...t,timeout:e})).toString()),lb="169.254.170.2",mb={localhost:!0,"127.0.0.1":!0},fb={"http:":!0,"https:":!0},ub=async()=>{if(process.env[kn])return{hostname:lb,path:process.env[kn]};if(process.env[_n]){let e=(0,Bf.parse)(process.env[_n]);if(!e.hostname||!(e.hostname in mb))throw new N(`${e.hostname} is not a valid container metadata service hostname`,!1);if(!e.protocol||!(e.protocol in fb))throw new N(`${e.protocol} is not a valid container metadata service protocol`,!1);return{...e,port:e.port?parseInt(e.port,10):void 0}}throw new N(`The container metadata credential provider cannot be used unless the ${kn} or ${_n} environment variable is set`,!1)};var Mf=e=>async()=>{try{let t=e(process.env);if(t===void 0)throw new Error;return t}catch(t){throw new N(t.message||`Cannot load config from environment variables with getter: ${e}`)}};var Ff=(e,{preferredFile:t="config",...r}={})=>async()=>{let n=Le(r),{configFile:o,credentialsFile:s}=await is(r),i=s[n]||{},a=o[n]||{},c=t==="config"?{...i,...a}:{...a,...i};try{let d=e(c);if(d===void 0)throw new Error;return d}catch(d){throw new N(d.message||`Cannot load config for profile ${n} in SDK configuration files with getter: ${e}`)}};var hb=e=>typeof e=="function",Lf=e=>hb(e)?async()=>await e():Wc(e);var F=({environmentVariableSelector:e,configFileSelector:t,default:r},n={})=>jt(Zn(Mf(e),Ff(t,n),Lf(r)));var Rn;(function(e){e.IPv4="http://169.254.169.254",e.IPv6="http://[fd00:ec2::254]"})(Rn||(Rn={}));var pb="AWS_EC2_METADATA_SERVICE_ENDPOINT",yb="ec2_metadata_service_endpoint",zf={environmentVariableSelector:e=>e[pb],configFileSelector:e=>e[yb],default:void 0};var mr;(function(e){e.IPv4="IPv4",e.IPv6="IPv6"})(mr||(mr={}));var gb="AWS_EC2_METADATA_SERVICE_ENDPOINT_MODE",Cb="ec2_metadata_service_endpoint_mode",$f={environmentVariableSelector:e=>e[gb],configFileSelector:e=>e[Cb],default:mr.IPv4};var Nn=async()=>Ae(await xb()||await Eb()),xb=async()=>F(zf)(),Eb=async()=>{let e=await F($f)();switch(e){case mr.IPv4:return Rn.IPv4;case mr.IPv6:return Rn.IPv6;default:throw new Error(`Unsupported endpoint mode: ${e}. Select from ${Object.values(mr)}`)}};var wb="https://docs.aws.amazon.com/sdkref/latest/guide/feature-static-credentials.html",ma=(e,t)=>{var s;let r=300+Math.floor(Math.random()*300),n=new Date(Date.now()+r*1e3);t.warn("Attempting credential expiration extension due to a credential service availability issue. A refresh of these credentials will be attempted after ${new Date(newExpiration)}.\nFor more information, please visit: "+wb);let o=(s=e.originalExpiration)!=null?s:e.expiration;return{...e,...o?{originalExpiration:o}:{},expiration:n}};var Uf=(e,t={})=>{let r=(t==null?void 0:t.logger)||console,n;return async()=>{let o;try{o=await e(),o.expiration&&o.expiration.getTime()<Date.now()&&(o=ma(o,r))}catch(s){if(n)r.warn("Credential renew failed: ",s),o=ma(n,r);else throw s}return n=o,o}};var jf="/latest/meta-data/iam/security-credentials/",bb="/latest/api/token",fs=(e={})=>Uf(Sb(e),{logger:e.logger}),Sb=e=>{let t=!1,{timeout:r,maxRetries:n}=ls(e),o=async(s,i)=>{let a=(await An(async()=>{let c;try{c=await _b(i)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},s)).trim();return An(async()=>{let c;try{c=await kb(a,i)}catch(d){throw d.statusCode===401&&(t=!1),d}return c},s)};return async()=>{let s=await Nn();if(t)return o(n,{...s,timeout:r});{let i;try{i=(await Ab({...s,timeout:r})).toString()}catch(a){if((a==null?void 0:a.statusCode)===400)throw Object.assign(a,{message:"EC2 Metadata token request returned error"});return(a.message==="TimeoutError"||[403,404,405].includes(a.statusCode))&&(t=!0),o(n,{...s,timeout:r})}return o(n,{...s,headers:{"x-aws-ec2-metadata-token":i},timeout:r})}}},Ab=async e=>bt({...e,path:bb,method:"PUT",headers:{"x-aws-ec2-metadata-token-ttl-seconds":"21600"}}),_b=async e=>(await bt({...e,path:jf})).toString(),kb=async(e,t)=>{let r=JSON.parse((await bt({...t,path:jf+e})).toString());if(!cs(r))throw new N("Invalid response received from instance metadata service.");return ds(r)};var qf=(e,t)=>{let r={EcsContainer:ms,Ec2InstanceMetadata:fs,Environment:rs};if(e in r)return r[e]();throw new N(`Unsupported credential source in profile ${t}. Got ${e}, expected EcsContainer or Ec2InstanceMetadata or Environment.`)};var Kf=e=>!!e&&typeof e=="object"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1&&["undefined","string"].indexOf(typeof e.external_id)>-1&&["undefined","string"].indexOf(typeof e.mfa_serial)>-1&&(Rb(e)||Nb(e)),Rb=e=>typeof e.source_profile=="string"&&typeof e.credential_source>"u",Nb=e=>typeof e.credential_source=="string"&&typeof e.source_profile>"u",Gf=async(e,t,r,n={})=>{let o=t[e];if(!r.roleAssumer)throw new N(`Profile ${e} requires a role to be assumed, but no role assumption callback was provided.`,!1);let{source_profile:s}=o;if(s&&s in n)throw new N(`Detected a cycle attempting to resolve credentials for profile ${Le(r)}. Profiles visited: `+Object.keys(n).join(", "),!1);let i=s?us(s,t,r,{...n,[s]:!0}):qf(o.credential_source,e)(),a={RoleArn:o.role_arn,RoleSessionName:o.role_session_name||`aws-sdk-js-${Date.now()}`,ExternalId:o.external_id},{mfa_serial:c}=o;if(c){if(!r.mfaCodeProvider)throw new N(`Profile ${e} requires multi-factor authentication, but no MFA code callback was provided.`,!1);a.SerialNumber=c,a.TokenCode=await r.mfaCodeProvider(c)}let d=await i;return r.roleAssumer(d,a)};var Vf=require("child_process"),Wf=require("util");var Hf=(e,t)=>{if(t.Version!==1)throw Error(`Profile ${e} credential_process did not return Version 1.`);if(t.AccessKeyId===void 0||t.SecretAccessKey===void 0)throw Error(`Profile ${e} credential_process returned invalid credentials.`);if(t.Expiration){let r=new Date;if(new Date(t.Expiration)<r)throw Error(`Profile ${e} credential_process returned expired credentials.`)}return{accessKeyId:t.AccessKeyId,secretAccessKey:t.SecretAccessKey,...t.SessionToken&&{sessionToken:t.SessionToken},...t.Expiration&&{expiration:new Date(t.Expiration)}}};var Yf=async(e,t)=>{let r=t[e];if(t[e]){let n=r.credential_process;if(n!==void 0){let o=(0,Wf.promisify)(Vf.exec);try{let{stdout:s}=await o(n),i;try{i=JSON.parse(s.trim())}catch{throw Error(`Profile ${e} credential_process returned invalid JSON.`)}return Hf(e,i)}catch(s){throw new N(s.message)}}else throw new N(`Profile ${e} did not contain credential_process.`)}else throw new N(`Profile ${e} could not be found in shared credentials file.`)};var hs=(e={})=>async()=>{let t=await lr(e);return Yf(Le(e),t)};var Qf=e=>!!e&&typeof e=="object"&&typeof e.credential_process=="string",Xf=async(e,t)=>hs({...e,profile:t})();var Tn=e=>e&&(typeof e.sso_start_url=="string"||typeof e.sso_account_id=="string"||typeof e.sso_session=="string"||typeof e.sso_region=="string"||typeof e.sso_role_name=="string");var Jf=e=>{var t,r;return{...e,useDualstackEndpoint:(t=e.useDualstackEndpoint)!=null?t:!1,useFipsEndpoint:(r=e.useFipsEndpoint)!=null?r:!1,defaultSigningName:"awsssoportal"}};var Zf={name:"@aws-sdk/client-sso",description:"AWS SDK for JavaScript Sso Client for Node.js, Browser and React Native",version:"3.409.0",scripts:{build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo sso"},main:"./dist-cjs/index.js",types:"./dist-types/index.d.ts",module:"./dist-es/index.js",sideEffects:!1,dependencies:{"@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/middleware-host-header":"3.408.0","@aws-sdk/middleware-logger":"3.408.0","@aws-sdk/middleware-recursion-detection":"3.408.0","@aws-sdk/middleware-user-agent":"3.408.0","@aws-sdk/types":"3.408.0","@aws-sdk/util-endpoints":"3.408.0","@aws-sdk/util-user-agent-browser":"3.408.0","@aws-sdk/util-user-agent-node":"3.408.0","@smithy/config-resolver":"^2.0.5","@smithy/fetch-http-handler":"^2.0.5","@smithy/hash-node":"^2.0.5","@smithy/invalid-dependency":"^2.0.5","@smithy/middleware-content-length":"^2.0.5","@smithy/middleware-endpoint":"^2.0.5","@smithy/middleware-retry":"^2.0.5","@smithy/middleware-serde":"^2.0.5","@smithy/middleware-stack":"^2.0.0","@smithy/node-config-provider":"^2.0.6","@smithy/node-http-handler":"^2.0.5","@smithy/protocol-http":"^2.0.5","@smithy/smithy-client":"^2.0.5","@smithy/types":"^2.2.2","@smithy/url-parser":"^2.0.5","@smithy/util-base64":"^2.0.0","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.1.0","@smithy/util-defaults-mode-browser":"^2.0.6","@smithy/util-defaults-mode-node":"^2.0.6","@smithy/util-retry":"^2.0.0","@smithy/util-utf8":"^2.0.0",tslib:"^2.5.0"},devDependencies:{"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},engines:{node:">=14.0.0"},typesVersions:{"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},files:["dist-*/**"],author:{name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},license:"Apache-2.0",browser:{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:"https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-sso",repository:{type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-sso"}};var ps=require("os"),In=require("process");var eu=()=>{try{return typeof require=="function"&&typeof module<"u"&&require("aws-crt")?["md/crt-avail"]:null}catch{return null}};var Ib="AWS_SDK_UA_APP_ID",vb="sdk-ua-app-id",fr=({serviceId:e,clientVersion:t})=>{let r=[["aws-sdk-js",t],["ua","2.0"],[`os/${(0,ps.platform)()}`,(0,ps.release)()],["lang/js"],["md/nodejs",`${In.versions.node}`]],n=eu();n&&r.push(n),e&&r.push([`api/${e}`,t]),In.env.AWS_EXECUTION_ENV&&r.push([`exec-env/${In.env.AWS_EXECUTION_ENV}`]);let o=F({environmentVariableSelector:i=>i[Ib],configFileSelector:i=>i[vb],default:void 0})(),s;return async()=>{if(!s){let i=await o;s=i?[...r,[`app/${i}`]]:[...r]}return s}};var ru=require("buffer"),ys=require("crypto"),ze=class{constructor(t,r){this.algorithmIdentifier=t,this.secret=r,this.reset()}update(t,r){this.hash.update(Se(tu(t,r)))}digest(){return Promise.resolve(this.hash.digest())}reset(){this.hash=this.secret?(0,ys.createHmac)(this.algorithmIdentifier,tu(this.secret)):(0,ys.createHash)(this.algorithmIdentifier)}};function tu(e,t){return ru.Buffer.isBuffer(e)?e:typeof e=="string"?Mr(e,t):ArrayBuffer.isView(e)?pt(e.buffer,e.byteOffset,e.byteLength):pt(e)}var gs=require("fs"),ur=e=>{if(!e)return 0;if(typeof e=="string")return Buffer.from(e).length;if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size;if(typeof e.start=="number"&&typeof e.end=="number")return e.end+1-e.start;if(typeof e.path=="string"||Buffer.isBuffer(e.path))return(0,gs.lstatSync)(e.path).size;if(typeof e.fd=="number")return(0,gs.fstatSync)(e.fd).size;throw new Error(`Body Length computation failed for ${e}`)};var fu="required",At="fn",_t="argv",Wr="ref",nu="isSet",St="tree",Vr="error",vn="endpoint",fa="PartitionResult",ou={[fu]:!1,type:"String"},su={[fu]:!0,default:!1,type:"Boolean"},iu={[Wr]:"Endpoint"},uu={[At]:"booleanEquals",[_t]:[{[Wr]:"UseFIPS"},!0]},hu={[At]:"booleanEquals",[_t]:[{[Wr]:"UseDualStack"},!0]},ct={},au={[At]:"booleanEquals",[_t]:[!0,{[At]:"getAttr",[_t]:[{[Wr]:fa},"supportsFIPS"]}]},cu={[At]:"booleanEquals",[_t]:[!0,{[At]:"getAttr",[_t]:[{[Wr]:fa},"supportsDualStack"]}]},du=[uu],lu=[hu],mu=[{[Wr]:"Region"}],Pb={version:"1.0",parameters:{Region:ou,UseDualStack:su,UseFIPS:su,Endpoint:ou},rules:[{conditions:[{[At]:nu,[_t]:[iu]}],type:St,rules:[{conditions:du,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:Vr},{conditions:lu,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:Vr},{endpoint:{url:iu,properties:ct,headers:ct},type:vn}]},{conditions:[{[At]:nu,[_t]:mu}],type:St,rules:[{conditions:[{[At]:"aws.partition",[_t]:mu,assign:fa}],type:St,rules:[{conditions:[uu,hu],type:St,rules:[{conditions:[au,cu],type:St,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ct,headers:ct},type:vn}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:Vr}]},{conditions:du,type:St,rules:[{conditions:[au],type:St,rules:[{endpoint:{url:"https://portal.sso-fips.{Region}.{PartitionResult#dnsSuffix}",properties:ct,headers:ct},type:vn}]},{error:"FIPS is enabled but this partition does not support FIPS",type:Vr}]},{conditions:lu,type:St,rules:[{conditions:[cu],type:St,rules:[{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ct,headers:ct},type:vn}]},{error:"DualStack is enabled but this partition does not support DualStack",type:Vr}]},{endpoint:{url:"https://portal.sso.{Region}.{PartitionResult#dnsSuffix}",properties:ct,headers:ct},type:vn}]}]},{error:"Invalid Configuration: Missing Region",type:Vr}]},pu=Pb;var yu=(e,t={})=>Vt(pu,{endpointParams:e,logger:t.logger});var gu=e=>{var t,r,n,o,s,i,a,c,d,l;return{apiVersion:"2019-06-10",base64Decoder:(t=e==null?void 0:e.base64Decoder)!=null?t:nt,base64Encoder:(r=e==null?void 0:e.base64Encoder)!=null?r:ot,disableHostPrefix:(n=e==null?void 0:e.disableHostPrefix)!=null?n:!1,endpointProvider:(o=e==null?void 0:e.endpointProvider)!=null?o:yu,extensions:(s=e==null?void 0:e.extensions)!=null?s:[],logger:(i=e==null?void 0:e.logger)!=null?i:new tt,serviceId:(a=e==null?void 0:e.serviceId)!=null?a:"SSO",urlParser:(c=e==null?void 0:e.urlParser)!=null?c:Ae,utf8Decoder:(d=e==null?void 0:e.utf8Decoder)!=null?d:be,utf8Encoder:(l=e==null?void 0:e.utf8Encoder)!=null?l:De}};var Cu="AWS_EXECUTION_ENV",ua="AWS_REGION",ha="AWS_DEFAULT_REGION",xu="AWS_EC2_METADATA_DISABLED",Eu=["in-region","cross-region","mobile","standard","legacy"],wu="/latest/meta-data/placement/region";var Ob="AWS_DEFAULTS_MODE",Db="defaults_mode",bu={environmentVariableSelector:e=>e[Ob],configFileSelector:e=>e[Db],default:"legacy"};var hr=({region:e=F(Ze),defaultsMode:t=F(bu)}={})=>jt(async()=>{let r=typeof t=="function"?await t():t;switch(r==null?void 0:r.toLowerCase()){case"auto":return Bb(e);case"in-region":case"cross-region":case"mobile":case"standard":case"legacy":return Promise.resolve(r==null?void 0:r.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${Eu.join(", ")}, got ${r}`)}}),Bb=async e=>{if(e){let t=typeof e=="function"?await e():e,r=await Mb();return r?t===r?"in-region":"cross-region":"standard"}return"standard"},Mb=async()=>{var e;if(process.env[Cu]&&(process.env[ua]||process.env[ha]))return(e=process.env[ua])!=null?e:process.env[ha];if(!process.env[xu])try{let t=await Nn();return(await bt({...t,path:wu})).toString()}catch{}};var Su=e=>{var o,s,i,a,c,d,l,f,h,p;cr(process.version);let t=hr(e),r=()=>t().then(ar),n=gu(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(o=e==null?void 0:e.bodyLengthChecker)!=null?o:ur,defaultUserAgentProvider:(s=e==null?void 0:e.defaultUserAgentProvider)!=null?s:fr({serviceId:n.serviceId,clientVersion:Zf.version}),maxAttempts:(i=e==null?void 0:e.maxAttempts)!=null?i:F(rr),region:(a=e==null?void 0:e.region)!=null?a:F(Ze,Xt),requestHandler:(c=e==null?void 0:e.requestHandler)!=null?c:new st(r),retryMode:(d=e==null?void 0:e.retryMode)!=null?d:F({...or,default:async()=>(await r()).retryMode||et}),sha256:(l=e==null?void 0:e.sha256)!=null?l:ze.bind(null,"sha256"),streamCollector:(f=e==null?void 0:e.streamCollector)!=null?f:it,useDualstackEndpoint:(h=e==null?void 0:e.useDualstackEndpoint)!=null?h:F(Yt),useFipsEndpoint:(p=e==null?void 0:e.useFipsEndpoint)!=null?p:F(Qt)}};var Fb=e=>e,Au=(e,t)=>{let r={...Fb(jr(e))};return t.forEach(n=>n.configure(r)),{...e,...qr(r)}};var Cs=class extends rt{constructor(...[t]){let r=Su(t||{}),n=Jf(r),o=Jt(n),s=tr(o),i=nr(s),a=i,c=Gt(a),d=Au(c,(t==null?void 0:t.extensions)||[]);super(d),this.config=d,this.middlewareStack.use(sr(this.config)),this.middlewareStack.use(er(this.config)),this.middlewareStack.use(zt(this.config)),this.middlewareStack.use($t(this.config)),this.middlewareStack.use(Ut(this.config)),this.middlewareStack.use(Wt(this.config))}destroy(){super.destroy()}};var kt=class e extends at{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var xs=class e extends kt{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},Es=class e extends kt{constructor(t){super({name:"ResourceNotFoundException",$fault:"client",...t}),this.name="ResourceNotFoundException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},ws=class e extends kt{constructor(t){super({name:"TooManyRequestsException",$fault:"client",...t}),this.name="TooManyRequestsException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},bs=class e extends kt{constructor(t){super({name:"UnauthorizedException",$fault:"client",...t}),this.name="UnauthorizedException",this.$fault="client",Object.setPrototypeOf(this,e.prototype)}},_u=e=>({...e,...e.accessToken&&{accessToken:Te}}),Lb=e=>({...e,...e.secretAccessKey&&{secretAccessKey:Te},...e.sessionToken&&{sessionToken:Te}}),ku=e=>({...e,...e.roleCredentials&&{roleCredentials:Lb(e.roleCredentials)}});var Ru=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i=q({},Hb,{"x-amz-sso_bearer_token":e.accessToken}),a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/federation/credentials`,c=q({role_name:[,je(e.roleName,"roleName")],account_id:[,je(e.accountId,"accountId")]}),d;return new U({protocol:n,hostname:r,port:o,method:"GET",headers:i,path:a,query:c,body:d})};var Nu=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return zb(e,t);let r=q({$metadata:Pn(e)}),n=je(kr(await Tu(e.body,t)),"body"),o=H(n,{roleCredentials:Gr});return Object.assign(r,o),r},zb=async(e,t)=>{let r={...e,body:await Vb(e.body,t)},n=Wb(e,r.body);switch(n){case"InvalidRequestException":case"com.amazonaws.sso#InvalidRequestException":throw await Ub(r,t);case"ResourceNotFoundException":case"com.amazonaws.sso#ResourceNotFoundException":throw await jb(r,t);case"TooManyRequestsException":case"com.amazonaws.sso#TooManyRequestsException":throw await qb(r,t);case"UnauthorizedException":case"com.amazonaws.sso#UnauthorizedException":throw await Kb(r,t);default:let o=r.body;return $b({output:e,parsedBody:o,errorCode:n})}};var $b=ir(kt),Ub=async(e,t)=>{let r=q({}),n=e.body,o=H(n,{message:S});Object.assign(r,o);let s=new xs({$metadata:Pn(e),...r});return j(s,e.body)},jb=async(e,t)=>{let r=q({}),n=e.body,o=H(n,{message:S});Object.assign(r,o);let s=new Es({$metadata:Pn(e),...r});return j(s,e.body)},qb=async(e,t)=>{let r=q({}),n=e.body,o=H(n,{message:S});Object.assign(r,o);let s=new ws({$metadata:Pn(e),...r});return j(s,e.body)},Kb=async(e,t)=>{let r=q({}),n=e.body,o=H(n,{message:S});Object.assign(r,o);let s=new bs({$metadata:Pn(e),...r});return j(s,e.body)},Pn=e=>{var t,r;return{httpStatusCode:e.statusCode,requestId:(r=(t=e.headers["x-amzn-requestid"])!=null?t:e.headers["x-amzn-request-id"])!=null?r:e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},Gb=(e,t)=>xt(e,t).then(r=>t.utf8Encoder(r)),Hb=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),Tu=(e,t)=>Gb(e,t).then(r=>r.length?JSON.parse(r):{}),Vb=async(e,t)=>{var n;let r=await Tu(e,t);return r.message=(n=r.message)!=null?n:r.Message,r},Wb=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)};var Ss=class e extends ge{static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(_e(r,this.serialize,this.deserialize)),this.middlewareStack.use(ke(r,e.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOClient",commandName:"GetRoleCredentialsCommand",inputFilterSensitiveLog:_u,outputFilterSensitiveLog:ku},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return Ru(t,r)}deserialize(t,r){return Nu(t,r)}};var Yb=e=>{var t,r;return{...e,useDualstackEndpoint:(t=e.useDualstackEndpoint)!=null?t:!1,useFipsEndpoint:(r=e.useFipsEndpoint)!=null?r:!1,defaultSigningName:"awsssooidc"}},Qb={version:"3.387.0"},Fu="required",Rt="fn",Nt="argv",Yr="ref",ya="PartitionResult",dt="tree",On="error",Dn="endpoint",Iu={[Fu]:!1,type:"String"},vu={[Fu]:!0,default:!1,type:"Boolean"},Lu={[Yr]:"Endpoint"},zu={[Rt]:"booleanEquals",[Nt]:[{[Yr]:"UseFIPS"},!0]},$u={[Rt]:"booleanEquals",[Nt]:[{[Yr]:"UseDualStack"},!0]},lt={},Pu={[Rt]:"booleanEquals",[Nt]:[!0,{[Rt]:"getAttr",[Nt]:[{[Yr]:ya},"supportsFIPS"]}]},Ou={[Rt]:"booleanEquals",[Nt]:[!0,{[Rt]:"getAttr",[Nt]:[{[Yr]:ya},"supportsDualStack"]}]},Du=[Lu],Bu=[zu],Mu=[$u],Xb={version:"1.0",parameters:{Region:Iu,UseDualStack:vu,UseFIPS:vu,Endpoint:Iu},rules:[{conditions:[{[Rt]:"aws.partition",[Nt]:[{[Yr]:"Region"}],assign:ya}],type:dt,rules:[{conditions:[{[Rt]:"isSet",[Nt]:Du},{[Rt]:"parseURL",[Nt]:Du,assign:"url"}],type:dt,rules:[{conditions:Bu,error:"Invalid Configuration: FIPS and custom endpoint are not supported",type:On},{type:dt,rules:[{conditions:Mu,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",type:On},{endpoint:{url:Lu,properties:lt,headers:lt},type:Dn}]}]},{conditions:[zu,$u],type:dt,rules:[{conditions:[Pu,Ou],type:dt,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:lt,headers:lt},type:Dn}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",type:On}]},{conditions:Bu,type:dt,rules:[{conditions:[Pu],type:dt,rules:[{type:dt,rules:[{endpoint:{url:"https://oidc-fips.{Region}.{PartitionResult#dnsSuffix}",properties:lt,headers:lt},type:Dn}]}]},{error:"FIPS is enabled but this partition does not support FIPS",type:On}]},{conditions:Mu,type:dt,rules:[{conditions:[Ou],type:dt,rules:[{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:lt,headers:lt},type:Dn}]},{error:"DualStack is enabled but this partition does not support DualStack",type:On}]},{endpoint:{url:"https://oidc.{Region}.{PartitionResult#dnsSuffix}",properties:lt,headers:lt},type:Dn}]}]},Jb=Xb,Zb=(e,t={})=>Vt(Jb,{endpointParams:e,logger:t.logger}),eS=e=>{var t,r,n,o,s,i,a,c,d;return{apiVersion:"2019-06-10",base64Decoder:(t=e==null?void 0:e.base64Decoder)!=null?t:nt,base64Encoder:(r=e==null?void 0:e.base64Encoder)!=null?r:ot,disableHostPrefix:(n=e==null?void 0:e.disableHostPrefix)!=null?n:!1,endpointProvider:(o=e==null?void 0:e.endpointProvider)!=null?o:Zb,logger:(s=e==null?void 0:e.logger)!=null?s:new tt,serviceId:(i=e==null?void 0:e.serviceId)!=null?i:"SSO OIDC",urlParser:(a=e==null?void 0:e.urlParser)!=null?a:Ae,utf8Decoder:(c=e==null?void 0:e.utf8Decoder)!=null?c:be,utf8Encoder:(d=e==null?void 0:e.utf8Encoder)!=null?d:De}},tS=e=>{var o,s,i,a,c,d,l,f,h,p;cr(process.version);let t=hr(e),r=()=>t().then(ar),n=eS(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(o=e==null?void 0:e.bodyLengthChecker)!=null?o:ur,defaultUserAgentProvider:(s=e==null?void 0:e.defaultUserAgentProvider)!=null?s:fr({serviceId:n.serviceId,clientVersion:Qb.version}),maxAttempts:(i=e==null?void 0:e.maxAttempts)!=null?i:F(rr),region:(a=e==null?void 0:e.region)!=null?a:F(Ze,Xt),requestHandler:(c=e==null?void 0:e.requestHandler)!=null?c:new st(r),retryMode:(d=e==null?void 0:e.retryMode)!=null?d:F({...or,default:async()=>(await r()).retryMode||et}),sha256:(l=e==null?void 0:e.sha256)!=null?l:ze.bind(null,"sha256"),streamCollector:(f=e==null?void 0:e.streamCollector)!=null?f:it,useDualstackEndpoint:(h=e==null?void 0:e.useDualstackEndpoint)!=null?h:F(Yt),useFipsEndpoint:(p=e==null?void 0:e.useFipsEndpoint)!=null?p:F(Qt)}},ga=class extends rt{constructor(...[e]){let t=tS(e||{}),r=Yb(t),n=Jt(r),o=tr(n),s=nr(o),i=s,a=Gt(i);super(a),this.config=a,this.middlewareStack.use(sr(this.config)),this.middlewareStack.use(er(this.config)),this.middlewareStack.use(zt(this.config)),this.middlewareStack.use($t(this.config)),this.middlewareStack.use(Ut(this.config)),this.middlewareStack.use(Wt(this.config))}destroy(){super.destroy()}},Ie=class Uu extends at{constructor(t){super(t),Object.setPrototypeOf(this,Uu.prototype)}},rS=class ju extends Ie{constructor(t){super({name:"AccessDeniedException",$fault:"client",...t}),this.name="AccessDeniedException",this.$fault="client",Object.setPrototypeOf(this,ju.prototype),this.error=t.error,this.error_description=t.error_description}},nS=class qu extends Ie{constructor(t){super({name:"AuthorizationPendingException",$fault:"client",...t}),this.name="AuthorizationPendingException",this.$fault="client",Object.setPrototypeOf(this,qu.prototype),this.error=t.error,this.error_description=t.error_description}},oS=class Ku extends Ie{constructor(t){super({name:"ExpiredTokenException",$fault:"client",...t}),this.name="ExpiredTokenException",this.$fault="client",Object.setPrototypeOf(this,Ku.prototype),this.error=t.error,this.error_description=t.error_description}},sS=class Gu extends Ie{constructor(t){super({name:"InternalServerException",$fault:"server",...t}),this.name="InternalServerException",this.$fault="server",Object.setPrototypeOf(this,Gu.prototype),this.error=t.error,this.error_description=t.error_description}},iS=class Hu extends Ie{constructor(t){super({name:"InvalidClientException",$fault:"client",...t}),this.name="InvalidClientException",this.$fault="client",Object.setPrototypeOf(this,Hu.prototype),this.error=t.error,this.error_description=t.error_description}},aS=class Vu extends Ie{constructor(t){super({name:"InvalidGrantException",$fault:"client",...t}),this.name="InvalidGrantException",this.$fault="client",Object.setPrototypeOf(this,Vu.prototype),this.error=t.error,this.error_description=t.error_description}},cS=class Wu extends Ie{constructor(t){super({name:"InvalidRequestException",$fault:"client",...t}),this.name="InvalidRequestException",this.$fault="client",Object.setPrototypeOf(this,Wu.prototype),this.error=t.error,this.error_description=t.error_description}},dS=class Yu extends Ie{constructor(t){super({name:"InvalidScopeException",$fault:"client",...t}),this.name="InvalidScopeException",this.$fault="client",Object.setPrototypeOf(this,Yu.prototype),this.error=t.error,this.error_description=t.error_description}},lS=class Qu extends Ie{constructor(t){super({name:"SlowDownException",$fault:"client",...t}),this.name="SlowDownException",this.$fault="client",Object.setPrototypeOf(this,Qu.prototype),this.error=t.error,this.error_description=t.error_description}},mS=class Xu extends Ie{constructor(t){super({name:"UnauthorizedClientException",$fault:"client",...t}),this.name="UnauthorizedClientException",this.$fault="client",Object.setPrototypeOf(this,Xu.prototype),this.error=t.error,this.error_description=t.error_description}},fS=class Ju extends Ie{constructor(t){super({name:"UnsupportedGrantTypeException",$fault:"client",...t}),this.name="UnsupportedGrantTypeException",this.$fault="client",Object.setPrototypeOf(this,Ju.prototype),this.error=t.error,this.error_description=t.error_description}},uS=class Zu extends Ie{constructor(t){super({name:"InvalidClientMetadataException",$fault:"client",...t}),this.name="InvalidClientMetadataException",this.$fault="client",Object.setPrototypeOf(this,Zu.prototype),this.error=t.error,this.error_description=t.error_description}},hS=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/token`,c;return c=JSON.stringify(H(e,{clientId:[],clientSecret:[],code:[],deviceCode:[],grantType:[],redirectUri:[],refreshToken:[],scope:d=>Gr(d)})),new U({protocol:n,hostname:r,port:o,method:"POST",headers:i,path:a,body:c})},pS=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/client/register`,c;return c=JSON.stringify(H(e,{clientName:[],clientType:[],scopes:d=>Gr(d)})),new U({protocol:n,hostname:r,port:o,method:"POST",headers:i,path:a,body:c})},yS=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i={"content-type":"application/json"},a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/device_authorization`,c;return c=JSON.stringify(H(e,{clientId:[],clientSecret:[],startUrl:[]})),new U({protocol:n,hostname:r,port:o,method:"POST",headers:i,path:a,body:c})},gS=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return CS(e,t);let r=q({$metadata:Ee(e)}),n=je(kr(await As(e.body,t)),"body"),o=H(n,{accessToken:S,expiresIn:Ur,idToken:S,refreshToken:S,tokenType:S});return Object.assign(r,o),r},CS=async(e,t)=>{let r={...e,body:await wa(e.body,t)},n=ba(e,r.body);switch(n){case"AccessDeniedException":case"com.amazonaws.ssooidc#AccessDeniedException":throw await SS(r,t);case"AuthorizationPendingException":case"com.amazonaws.ssooidc#AuthorizationPendingException":throw await AS(r,t);case"ExpiredTokenException":case"com.amazonaws.ssooidc#ExpiredTokenException":throw await _S(r,t);case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await xa(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await eh(r,t);case"InvalidGrantException":case"com.amazonaws.ssooidc#InvalidGrantException":throw await RS(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await Ea(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await th(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await rh(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await nh(r,t);case"UnsupportedGrantTypeException":case"com.amazonaws.ssooidc#UnsupportedGrantTypeException":throw await NS(r,t);default:let o=r.body;return Ca({output:e,parsedBody:o,errorCode:n})}},xS=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return ES(e,t);let r=q({$metadata:Ee(e)}),n=je(kr(await As(e.body,t)),"body"),o=H(n,{authorizationEndpoint:S,clientId:S,clientIdIssuedAt:qo,clientSecret:S,clientSecretExpiresAt:qo,tokenEndpoint:S});return Object.assign(r,o),r},ES=async(e,t)=>{let r={...e,body:await wa(e.body,t)},n=ba(e,r.body);switch(n){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await xa(r,t);case"InvalidClientMetadataException":case"com.amazonaws.ssooidc#InvalidClientMetadataException":throw await kS(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await Ea(r,t);case"InvalidScopeException":case"com.amazonaws.ssooidc#InvalidScopeException":throw await th(r,t);default:let o=r.body;return Ca({output:e,parsedBody:o,errorCode:n})}},wS=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return bS(e,t);let r=q({$metadata:Ee(e)}),n=je(kr(await As(e.body,t)),"body"),o=H(n,{deviceCode:S,expiresIn:Ur,interval:Ur,userCode:S,verificationUri:S,verificationUriComplete:S});return Object.assign(r,o),r},bS=async(e,t)=>{let r={...e,body:await wa(e.body,t)},n=ba(e,r.body);switch(n){case"InternalServerException":case"com.amazonaws.ssooidc#InternalServerException":throw await xa(r,t);case"InvalidClientException":case"com.amazonaws.ssooidc#InvalidClientException":throw await eh(r,t);case"InvalidRequestException":case"com.amazonaws.ssooidc#InvalidRequestException":throw await Ea(r,t);case"SlowDownException":case"com.amazonaws.ssooidc#SlowDownException":throw await rh(r,t);case"UnauthorizedClientException":case"com.amazonaws.ssooidc#UnauthorizedClientException":throw await nh(r,t);default:let o=r.body;return Ca({output:e,parsedBody:o,errorCode:n})}},Ca=ir(Ie),SS=async(e,t)=>{let r=q({}),n=e.body,o=H(n,{error:S,error_description:S});Object.assign(r,o);let s=new rS({$metadata:Ee(e),...r});return j(s,e.body)},AS=async(e,t)=>{let r=q({}),n=e.body,o=H(n,{error:S,error_description:S});Object.assign(r,o);let s=new nS({$metadata:Ee(e),...r});return j(s,e.body)},_S=async(e,t)=>{let r=q({}),n=e.body,o=H(n,{error:S,error_description:S});Object.assign(r,o);let s=new oS({$metadata:Ee(e),...r});return j(s,e.body)},xa=async(e,t)=>{let r=q({}),n=e.body,o=H(n,{error:S,error_description:S});Object.assign(r,o);let s=new sS({$metadata:Ee(e),...r});return j(s,e.body)},eh=async(e,t)=>{let r=q({}),n=e.body,o=H(n,{error:S,error_description:S});Object.assign(r,o);let s=new iS({$metadata:Ee(e),...r});return j(s,e.body)},kS=async(e,t)=>{let r=q({}),n=e.body,o=H(n,{error:S,error_description:S});Object.assign(r,o);let s=new uS({$metadata:Ee(e),...r});return j(s,e.body)},RS=async(e,t)=>{let r=q({}),n=e.body,o=H(n,{error:S,error_description:S});Object.assign(r,o);let s=new aS({$metadata:Ee(e),...r});return j(s,e.body)},Ea=async(e,t)=>{let r=q({}),n=e.body,o=H(n,{error:S,error_description:S});Object.assign(r,o);let s=new cS({$metadata:Ee(e),...r});return j(s,e.body)},th=async(e,t)=>{let r=q({}),n=e.body,o=H(n,{error:S,error_description:S});Object.assign(r,o);let s=new dS({$metadata:Ee(e),...r});return j(s,e.body)},rh=async(e,t)=>{let r=q({}),n=e.body,o=H(n,{error:S,error_description:S});Object.assign(r,o);let s=new lS({$metadata:Ee(e),...r});return j(s,e.body)},nh=async(e,t)=>{let r=q({}),n=e.body,o=H(n,{error:S,error_description:S});Object.assign(r,o);let s=new mS({$metadata:Ee(e),...r});return j(s,e.body)},NS=async(e,t)=>{let r=q({}),n=e.body,o=H(n,{error:S,error_description:S});Object.assign(r,o);let s=new fS({$metadata:Ee(e),...r});return j(s,e.body)},Ee=e=>{var t,r;return{httpStatusCode:e.statusCode,requestId:(r=(t=e.headers["x-amzn-requestid"])!=null?t:e.headers["x-amzn-request-id"])!=null?r:e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},TS=(e,t)=>xt(e,t).then(r=>t.utf8Encoder(r)),As=(e,t)=>TS(e,t).then(r=>r.length?JSON.parse(r):{}),wa=async(e,t)=>{var n;let r=await As(e,t);return r.message=(n=r.message)!=null?n:r.Message,r},ba=(e,t)=>{let r=(s,i)=>Object.keys(s).find(a=>a.toLowerCase()===i.toLowerCase()),n=s=>{let i=s;return typeof i=="number"&&(i=i.toString()),i.indexOf(",")>=0&&(i=i.split(",")[0]),i.indexOf(":")>=0&&(i=i.split(":")[0]),i.indexOf("#")>=0&&(i=i.split("#")[1]),i},o=r(e.headers,"x-amzn-errortype");if(o!==void 0)return n(e.headers[o]);if(t.code!==void 0)return n(t.code);if(t.__type!==void 0)return n(t.__type)},Sa=class oh extends ge{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(_e(r,this.serialize,this.deserialize)),this.middlewareStack.use(ke(r,oh.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"CreateTokenCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return hS(t,r)}deserialize(t,r){return gS(t,r)}},IS=class sh extends ge{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(_e(r,this.serialize,this.deserialize)),this.middlewareStack.use(ke(r,sh.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"RegisterClientCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return pS(t,r)}deserialize(t,r){return xS(t,r)}},vS=class ih extends ge{constructor(t){super(),this.input=t}static getEndpointParameterInstructions(){return{UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}resolveMiddleware(t,r,n){this.middlewareStack.use(_e(r,this.serialize,this.deserialize)),this.middlewareStack.use(ke(r,ih.getEndpointParameterInstructions()));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"SSOOIDCClient",commandName:"StartDeviceAuthorizationCommand",inputFilterSensitiveLog:l=>l,outputFilterSensitiveLog:l=>l},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return yS(t,r)}deserialize(t,r){return wS(t,r)}},PS={CreateTokenCommand:Sa,RegisterClientCommand:IS,StartDeviceAuthorizationCommand:vS},OS=class extends ga{};Gl(PS,OS);var Qr="To refresh this SSO session run 'aws sso login' with the corresponding profile.";var Aa={},ah=e=>{if(Aa[e])return Aa[e];let t=new ga({region:e});return Aa[e]=t,t};var ch=(e,t)=>ah(t).send(new Sa({clientId:e.clientId,clientSecret:e.clientSecret,refreshToken:e.refreshToken,grantType:"refresh_token"}));var _a=e=>{if(e.expiration&&e.expiration.getTime()<Date.now())throw new Oe(`Token is expired. ${Qr}`,!1)};var pr=(e,t,r=!1)=>{if(typeof t>"u")throw new Oe(`Value not present for '${e}' in SSO Token${r?". Cannot refresh":""}. ${Qr}`,!1)};var dh=require("fs"),{writeFile:DS}=dh.promises,lh=(e,t)=>{let r=ns(e),n=JSON.stringify(t,null,2);return DS(r,n)};var mh=new Date(0),fh=(e={})=>async()=>{let t=await lr(e),r=Le(e),n=t[r];if(n){if(!n.sso_session)throw new Oe(`Profile '${r}' is missing required property 'sso_session'.`)}else throw new Oe(`Profile '${r}' could not be found in shared credentials file.`,!1);let o=n.sso_session,i=(await as(e))[o];if(!i)throw new Oe(`Sso session '${o}' could not be found in shared credentials file.`,!1);for(let p of["sso_start_url","sso_region"])if(!i[p])throw new Oe(`Sso session '${o}' is missing required property '${p}'.`,!1);let a=i.sso_start_url,c=i.sso_region,d;try{d=await os(o)}catch{throw new Oe(`The SSO session token associated with profile=${r} was not found or is invalid. ${Qr}`,!1)}pr("accessToken",d.accessToken),pr("expiresAt",d.expiresAt);let{accessToken:l,expiresAt:f}=d,h={token:l,expiration:new Date(f)};if(h.expiration.getTime()-Date.now()>3e5)return h;if(Date.now()-mh.getTime()<30*1e3)return _a(h),h;pr("clientId",d.clientId,!0),pr("clientSecret",d.clientSecret,!0),pr("refreshToken",d.refreshToken,!0);try{mh.setTime(Date.now());let p=await ch(d,c);pr("accessToken",p.accessToken),pr("expiresIn",p.expiresIn);let C=new Date(Date.now()+p.expiresIn*1e3);try{await lh(o,{...d,accessToken:p.accessToken,expiresAt:C.toISOString(),refreshToken:p.refreshToken})}catch{}return{token:p.accessToken,expiration:C}}catch{return _a(h),h}};var Bn=!1,ka=async({ssoStartUrl:e,ssoSession:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,profile:i})=>{let a,c="To refresh this SSO session run aws sso login with the corresponding profile.";if(t)try{let b=await fh({profile:i})();a={accessToken:b.token,expiresAt:new Date(b.expiration).toISOString()}}catch(b){throw new N(b.message,Bn)}else try{a=await os(e)}catch{throw new N(`The SSO session associated with this profile is invalid. ${c}`,Bn)}if(new Date(a.expiresAt).getTime()-Date.now()<=0)throw new N(`The SSO session associated with this profile has expired. ${c}`,Bn);let{accessToken:d}=a,l=s||new Cs({region:n}),f;try{f=await l.send(new Ss({accountId:r,roleName:o,accessToken:d}))}catch(b){throw N.from(b,Bn)}let{roleCredentials:{accessKeyId:h,secretAccessKey:p,sessionToken:C,expiration:x}={}}=f;if(!h||!p||!C||!x)throw new N("SSO returns an invalid temporary credential.",Bn);return{accessKeyId:h,secretAccessKey:p,sessionToken:C,expiration:new Date(x)}};var _s=e=>{let{sso_start_url:t,sso_account_id:r,sso_region:n,sso_role_name:o}=e;if(!t||!r||!n||!o)throw new N(`Profile is configured with invalid SSO credentials. Required parameters "sso_account_id", "sso_region", "sso_role_name", "sso_start_url". Got ${Object.keys(e).join(", ")}
Reference: https://docs.aws.amazon.com/cli/latest/userguide/cli-configure-sso.html`,!1);return e};var ks=(e={})=>async()=>{let{ssoStartUrl:t,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,ssoSession:i}=e,a=Le(e);if(!t&&!r&&!n&&!o&&!i){let d=(await lr(e))[a];if(!d)throw new N(`Profile ${a} was not found.`);if(!Tn(d))throw new N(`Profile ${a} is not configured with SSO credentials.`);if(d!=null&&d.sso_session){let b=(await as(e))[d.sso_session],ee=` configurations in profile ${a} and sso-session ${d.sso_session}`;if(n&&n!==b.sso_region)throw new N("Conflicting SSO region"+ee,!1);if(t&&t!==b.sso_start_url)throw new N("Conflicting SSO start_url"+ee,!1);d.sso_region=b.sso_region,d.sso_start_url=b.sso_start_url}let{sso_start_url:l,sso_account_id:f,sso_region:h,sso_role_name:p,sso_session:C}=_s(d);return ka({ssoStartUrl:l,ssoSession:C,ssoAccountId:f,ssoRegion:h,ssoRoleName:p,ssoClient:s,profile:a})}else{if(!t||!r||!n||!o)throw new N('Incomplete configuration. The fromSSO() argument hash must include "ssoStartUrl", "ssoAccountId", "ssoRegion", "ssoRoleName"');return ka({ssoStartUrl:t,ssoSession:i,ssoAccountId:r,ssoRegion:n,ssoRoleName:o,ssoClient:s,profile:a})}};var uh=e=>{let{sso_start_url:t,sso_account_id:r,sso_session:n,sso_region:o,sso_role_name:s}=_s(e);return ks({ssoStartUrl:t,ssoAccountId:r,ssoSession:n,ssoRegion:o,ssoRoleName:s})()};var Ra=e=>!!e&&typeof e=="object"&&typeof e.aws_access_key_id=="string"&&typeof e.aws_secret_access_key=="string"&&["undefined","string"].indexOf(typeof e.aws_session_token)>-1,Na=e=>Promise.resolve({accessKeyId:e.aws_access_key_id,secretAccessKey:e.aws_secret_access_key,sessionToken:e.aws_session_token});var ph=require("fs");var hh=e=>()=>{let{roleArn:t,roleSessionName:r,webIdentityToken:n,providerId:o,policyArns:s,policy:i,durationSeconds:a,roleAssumerWithWebIdentity:c}=e;if(!c)throw new N(`Role Arn '${t}' needs to be assumed with web identity, but no role assumption callback was provided.`,!1);return c({RoleArn:t,RoleSessionName:r!=null?r:`aws-sdk-js-session-${Date.now()}`,WebIdentityToken:n,ProviderId:o,PolicyArns:s,Policy:i,DurationSeconds:a})};var MS="AWS_WEB_IDENTITY_TOKEN_FILE",FS="AWS_ROLE_ARN",LS="AWS_ROLE_SESSION_NAME",Rs=(e={})=>async()=>{var o,s,i;let t=(o=e==null?void 0:e.webIdentityTokenFile)!=null?o:process.env[MS],r=(s=e==null?void 0:e.roleArn)!=null?s:process.env[FS],n=(i=e==null?void 0:e.roleSessionName)!=null?i:process.env[LS];if(!t||!r)throw new N("Web identity configuration not specified");return hh({...e,webIdentityToken:(0,ph.readFileSync)(t,{encoding:"ascii"}),roleArn:r,roleSessionName:n})()};var yh=e=>!!e&&typeof e=="object"&&typeof e.web_identity_token_file=="string"&&typeof e.role_arn=="string"&&["undefined","string"].indexOf(typeof e.role_session_name)>-1,gh=async(e,t)=>Rs({webIdentityTokenFile:e.web_identity_token_file,roleArn:e.role_arn,roleSessionName:e.role_session_name,roleAssumerWithWebIdentity:t.roleAssumerWithWebIdentity})();var us=async(e,t,r,n={})=>{let o=t[e];if(Object.keys(n).length>0&&Ra(o))return Na(o);if(Kf(o))return Gf(e,t,r,n);if(Ra(o))return Na(o);if(yh(o))return gh(o,r);if(Qf(o))return Xf(r,e);if(Tn(o))return uh(o);throw new N(`Profile ${e} could not be found or parsed in shared credentials file.`)};var Ch=(e={})=>async()=>{let t=await lr(e);return us(Le(e),t,e)};var zS="AWS_EC2_METADATA_DISABLED",xh=e=>process.env[kn]||process.env[_n]?ms(e):process.env[zS]?async()=>{throw new N("EC2 Instance Metadata Service access disabled")}:fs(e);var Ns=(e={})=>jt(Zn(...e.profile||process.env[da]?[]:[rs()],ks(e),Ch(e),hs(e),Rs(e),xh(e),async()=>{throw new N("Could not load credentials from any providers",!1)}),t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<3e5,t=>t.expiration!==void 0);var Ih="required",v="type",L="fn",z="argv",yr="ref";var Nr="booleanEquals",mt="tree",ue="stringEquals",vh="sigv4",Ph="sts",Oh="us-east-1",V="endpoint",Eh="https://sts.{Region}.{PartitionResult#dnsSuffix}",Xr="error",Ia="getAttr",wh={[Ih]:!1,[v]:"String"},Ta={[Ih]:!0,default:!1,[v]:"Boolean"},Dh={[yr]:"Endpoint"},bh={[L]:"isSet",[z]:[{[yr]:"Region"}]},he={[yr]:"Region"},Sh={[L]:"aws.partition",[z]:[he],assign:"PartitionResult"},Bh={[yr]:"UseFIPS"},Mh={[yr]:"UseDualStack"},Ce={url:"https://sts.amazonaws.com",properties:{authSchemes:[{name:vh,signingName:Ph,signingRegion:Oh}]},headers:{}},ve={},Ah={conditions:[{[L]:ue,[z]:[he,"aws-global"]}],[V]:Ce,[v]:V},Fh={[L]:Nr,[z]:[Bh,!0]},Lh={[L]:Nr,[z]:[Mh,!0]},_h={[L]:Nr,[z]:[!0,{[L]:Ia,[z]:[{[yr]:"PartitionResult"},"supportsFIPS"]}]},zh={[yr]:"PartitionResult"},kh={[L]:Nr,[z]:[!0,{[L]:Ia,[z]:[zh,"supportsDualStack"]}]},Rh=[{[L]:"isSet",[z]:[Dh]}],Nh=[Fh],Th=[Lh],$S={version:"1.0",parameters:{Region:wh,UseDualStack:Ta,UseFIPS:Ta,Endpoint:wh,UseGlobalEndpoint:Ta},rules:[{conditions:[{[L]:Nr,[z]:[{[yr]:"UseGlobalEndpoint"},!0]},{[L]:"not",[z]:Rh},bh,Sh,{[L]:Nr,[z]:[Bh,!1]},{[L]:Nr,[z]:[Mh,!1]}],[v]:mt,rules:[{conditions:[{[L]:ue,[z]:[he,"ap-northeast-1"]}],endpoint:Ce,[v]:V},{conditions:[{[L]:ue,[z]:[he,"ap-south-1"]}],endpoint:Ce,[v]:V},{conditions:[{[L]:ue,[z]:[he,"ap-southeast-1"]}],endpoint:Ce,[v]:V},{conditions:[{[L]:ue,[z]:[he,"ap-southeast-2"]}],endpoint:Ce,[v]:V},Ah,{conditions:[{[L]:ue,[z]:[he,"ca-central-1"]}],endpoint:Ce,[v]:V},{conditions:[{[L]:ue,[z]:[he,"eu-central-1"]}],endpoint:Ce,[v]:V},{conditions:[{[L]:ue,[z]:[he,"eu-north-1"]}],endpoint:Ce,[v]:V},{conditions:[{[L]:ue,[z]:[he,"eu-west-1"]}],endpoint:Ce,[v]:V},{conditions:[{[L]:ue,[z]:[he,"eu-west-2"]}],endpoint:Ce,[v]:V},{conditions:[{[L]:ue,[z]:[he,"eu-west-3"]}],endpoint:Ce,[v]:V},{conditions:[{[L]:ue,[z]:[he,"sa-east-1"]}],endpoint:Ce,[v]:V},{conditions:[{[L]:ue,[z]:[he,Oh]}],endpoint:Ce,[v]:V},{conditions:[{[L]:ue,[z]:[he,"us-east-2"]}],endpoint:Ce,[v]:V},{conditions:[{[L]:ue,[z]:[he,"us-west-1"]}],endpoint:Ce,[v]:V},{conditions:[{[L]:ue,[z]:[he,"us-west-2"]}],endpoint:Ce,[v]:V},{endpoint:{url:Eh,properties:{authSchemes:[{name:vh,signingName:Ph,signingRegion:"{Region}"}]},headers:ve},[v]:V}]},{conditions:Rh,[v]:mt,rules:[{conditions:Nh,error:"Invalid Configuration: FIPS and custom endpoint are not supported",[v]:Xr},{conditions:Th,error:"Invalid Configuration: Dualstack and custom endpoint are not supported",[v]:Xr},{endpoint:{url:Dh,properties:ve,headers:ve},[v]:V}]},{conditions:[bh],[v]:mt,rules:[{conditions:[Sh],[v]:mt,rules:[{conditions:[Fh,Lh],[v]:mt,rules:[{conditions:[_h,kh],[v]:mt,rules:[{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ve,headers:ve},[v]:V}]},{error:"FIPS and DualStack are enabled, but this partition does not support one or both",[v]:Xr}]},{conditions:Nh,[v]:mt,rules:[{conditions:[_h],[v]:mt,rules:[{conditions:[{[L]:ue,[z]:["aws-us-gov",{[L]:Ia,[z]:[zh,"name"]}]}],endpoint:{url:"https://sts.{Region}.amazonaws.com",properties:ve,headers:ve},[v]:V},{endpoint:{url:"https://sts-fips.{Region}.{PartitionResult#dnsSuffix}",properties:ve,headers:ve},[v]:V}]},{error:"FIPS is enabled but this partition does not support FIPS",[v]:Xr}]},{conditions:Th,[v]:mt,rules:[{conditions:[kh],[v]:mt,rules:[{endpoint:{url:"https://sts.{Region}.{PartitionResult#dualStackDnsSuffix}",properties:ve,headers:ve},[v]:V}]},{error:"DualStack is enabled but this partition does not support DualStack",[v]:Xr}]},Ah,{endpoint:{url:Eh,properties:ve,headers:ve},[v]:V}]}]},{error:"Invalid Configuration: Missing Region",[v]:Xr}]},$h=$S;var Uh=(e,t={})=>Vt($h,{endpointParams:e,logger:t.logger});var jh=e=>{var t,r,n,o,s,i,a,c,d,l;return{apiVersion:"2011-06-15",base64Decoder:(t=e==null?void 0:e.base64Decoder)!=null?t:nt,base64Encoder:(r=e==null?void 0:e.base64Encoder)!=null?r:ot,disableHostPrefix:(n=e==null?void 0:e.disableHostPrefix)!=null?n:!1,endpointProvider:(o=e==null?void 0:e.endpointProvider)!=null?o:Uh,extensions:(s=e==null?void 0:e.extensions)!=null?s:[],logger:(i=e==null?void 0:e.logger)!=null?i:new tt,serviceId:(a=e==null?void 0:e.serviceId)!=null?a:"STS",urlParser:(c=e==null?void 0:e.urlParser)!=null?c:Ae,utf8Decoder:(d=e==null?void 0:e.utf8Decoder)!=null?d:be,utf8Encoder:(l=e==null?void 0:e.utf8Encoder)!=null?l:De}};var qh=e=>{var o,s,i,a,c,d,l,f,h,p,C;cr(process.version);let t=hr(e),r=()=>t().then(ar),n=jh(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(o=e==null?void 0:e.bodyLengthChecker)!=null?o:ur,credentialDefaultProvider:(s=e==null?void 0:e.credentialDefaultProvider)!=null?s:yf(Ns),defaultUserAgentProvider:(i=e==null?void 0:e.defaultUserAgentProvider)!=null?i:fr({serviceId:n.serviceId,clientVersion:hm.version}),maxAttempts:(a=e==null?void 0:e.maxAttempts)!=null?a:F(rr),region:(c=e==null?void 0:e.region)!=null?c:F(Ze,Xt),requestHandler:(d=e==null?void 0:e.requestHandler)!=null?d:new st(r),retryMode:(l=e==null?void 0:e.retryMode)!=null?l:F({...or,default:async()=>(await r()).retryMode||et}),sha256:(f=e==null?void 0:e.sha256)!=null?f:ze.bind(null,"sha256"),streamCollector:(h=e==null?void 0:e.streamCollector)!=null?h:it,useDualstackEndpoint:(p=e==null?void 0:e.useDualstackEndpoint)!=null?p:F(Yt),useFipsEndpoint:(C=e==null?void 0:e.useFipsEndpoint)!=null?C:F(Qt)}};var US=e=>e,Kh=(e,t)=>{let r={...US(jr(e))};return t.forEach(n=>n.configure(r)),{...e,...qr(r)}};var Mn=class e extends rt{constructor(...[t]){let r=qh(t||{}),n=um(r),o=Jt(n),s=tr(o),i=nr(s),a=i,c=fm(a,{stsClientCtor:e}),d=Gt(c),l=Kh(d,(t==null?void 0:t.extensions)||[]);super(l),this.config=l,this.middlewareStack.use(sr(this.config)),this.middlewareStack.use(er(this.config)),this.middlewareStack.use(zt(this.config)),this.middlewareStack.use($t(this.config)),this.middlewareStack.use(Ut(this.config)),this.middlewareStack.use(Wt(this.config))}destroy(){super.destroy()}};var Gh=(e,t)=>t?class extends e{constructor(n){super(n);for(let o of t)this.middlewareStack.use(o)}}:e,jS=(e={},t)=>ia(e,Gh(Mn,t)),qS=(e={},t)=>aa(e,Gh(Mn,t)),Hh=e=>t=>e({roleAssumer:jS(t),roleAssumerWithWebIdentity:qS(t),...t});var KS="AWS_S3_USE_ARN_REGION",GS="s3_use_arn_region",Vh={environmentVariableSelector:e=>Je(e,KS,Me.ENV),configFileSelector:e=>Je(e,GS,Me.CONFIG),default:!1};function Wh(e){let t=0,r=0,n=null,o=null,s=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);t=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},i=async function*(){let a=e[Symbol.asyncIterator]();for(;;){let{value:c,done:d}=await a.next();if(d){if(t)if(t===r)yield n;else throw new Error("Truncated event message received.");else return;return}let l=c.length,f=0;for(;f<l;){if(!n){let p=l-f;o||(o=new Uint8Array(4));let C=Math.min(4-r,p);if(o.set(c.slice(f,f+C),r),r+=C,f+=C,r<4)break;s(new DataView(o.buffer).getUint32(0,!1)),o=null}let h=Math.min(t-r,l-f);n.set(c.slice(f,f+h),r),r+=h,f+=h,t&&t===r&&(yield n,n=null,t=0,r=0)}}};return{[Symbol.asyncIterator]:i}}function Yh(e,t){return async function(r){let{value:n}=r.headers[":message-type"];if(n==="error"){let o=new Error(r.headers[":error-message"].value||"UnknownError");throw o.name=r.headers[":error-code"].value,o}else if(n==="exception"){let o=r.headers[":exception-type"].value,s={[o]:r},i=await e(s);if(i.$unknown){let a=new Error(t(r.body));throw a.name=o,a}throw i[o]}else if(n==="event"){let o={[r.headers[":event-type"].value]:r},s=await e(o);return s.$unknown?void 0:s}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}var Fn=class{constructor({utf8Encoder:t,utf8Decoder:r}){this.eventStreamCodec=new so(t,r),this.utfEncoder=t}deserialize(t,r){let n=Wh(t);return new co({messageStream:new io({inputStream:n,decoder:this.eventStreamCodec}),deserializer:Yh(r,this.utfEncoder)})}serialize(t,r){return new ao({messageStream:new lo({inputStream:t,serializer:r}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};var Xh=require("stream");async function*Qh(e){let t=!1,r=!1,n=new Array;for(e.on("error",o=>{if(t||(t=!0),o)throw o}),e.on("data",o=>{n.push(o)}),e.on("end",()=>{t=!0});!r;){let o=await new Promise(s=>setTimeout(()=>s(n.shift()),0));o&&(yield o),r=t&&n.length===0}}var Ts=class{constructor({utf8Encoder:t,utf8Decoder:r}){this.universalMarshaller=new Fn({utf8Decoder:r,utf8Encoder:t})}deserialize(t,r){let n=typeof t[Symbol.asyncIterator]=="function"?t:Qh(t);return this.universalMarshaller.deserialize(n,r)}serialize(t,r){return Xh.Readable.from(this.universalMarshaller.serialize(t,r))}};var Jh=e=>new Ts(e);var Zh=require("stream"),Ln=class extends Zh.Writable{constructor(t,r){super(r),this.hash=t}_write(t,r,n){try{this.hash.update(Se(t))}catch(o){return n(o)}n()}};var ep=(e,t)=>{if(t.readableFlowing!==null)throw new Error("Unable to calculate hash for flowing readable stream");let r=new e,n=new Ln(r);return t.pipe(n),new Promise((o,s)=>{t.on("error",i=>{n.end(),s(i)}),n.on("error",s),n.on("finish",()=>{r.digest().then(o).catch(s)})})};var Is=class{constructor(t){this.sigv4Signer=new Sr(t),this.signerOptions=t}async sign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().sign(t,r)}return this.sigv4Signer.sign(t,r)}async presign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().presign(t,r)}return this.sigv4Signer.presign(t,r)}getSigv4aSigner(){if(!this.sigv4aSigner){let t;try{if(t=typeof require=="function"&&require("@aws-sdk/signature-v4-crt").CrtSignerV4,typeof t!="function")throw new Error}catch(r){throw r.message=`${r.message}
Please check if you have installed "@aws-sdk/signature-v4-crt" package explicitly. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`,r}this.sigv4aSigner=new t({...this.signerOptions,signingAlgorithm:1})}return this.sigv4aSigner}};var nc="required",m="type",u="conditions",y="fn",g="argv",I="ref",pe="assign",_="url",k="properties",It="authSchemes",vt="disableDoubleEncoding",Pt="signingName",xr="signingRegion",R="headers";var ft="isSet",E="tree",xe="booleanEquals",A="error",Ds="aws.partition",Q="stringEquals",J="getAttr",$e="name",zn="substring",Vp="hardwareType",Wp="regionPrefix",tp="bucketAliasSuffix",ec="outpostId",Tr="isValidHostLabel",Ke="not",Yp="parseURL",oc="s3-outposts",w="endpoint",rp="aws.isVirtualHostableS3Bucket",Zr="s3",Qp="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",Xp="{url#scheme}://{Bucket}.{url#authority}{url#path}",Jp="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",np="https://{Bucket}.s3.{partitionResult#dnsSuffix}",Zp="aws.parseArn",ey="bucketArn",ty="arnType",Bs="",sc="s3-object-lambda",ry="accesspoint",ic="accessPointName",op="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",sp="mrapPartition",ip="outpostType",ap="arnPrefix",ny="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",cp="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",tc="{url#scheme}://{url#authority}{url#path}",dp="https://s3.{partitionResult#dnsSuffix}",va={[nc]:!1,[m]:"String"},Jr={[nc]:!0,default:!1,[m]:"Boolean"},Pa={[nc]:!1,[m]:"Boolean"},qe={[y]:xe,[g]:[{[I]:"Accelerate"},!0]},W={[y]:xe,[g]:[{[I]:"UseFIPS"},!0]},K={[y]:xe,[g]:[{[I]:"UseDualStack"},!0]},X={[y]:ft,[g]:[{[I]:"Endpoint"}]},oy={[y]:Ds,[g]:[{[I]:"Region"}],[pe]:"partitionResult"},lp={[y]:Q,[g]:[{[y]:J,[g]:[{[I]:"partitionResult"},$e]},"aws-cn"]},sy={[y]:ft,[g]:[{[I]:"Bucket"}]},Tt={[I]:"Bucket"},mp={[I]:Vp},fp={[u]:[{[y]:Ke,[g]:[X]}],[A]:"Expected a endpoint to be specified but no endpoint was found",[m]:A},T={[y]:Ke,[g]:[X]},we={[y]:Yp,[g]:[{[I]:"Endpoint"}],[pe]:"url"},vs={[It]:[{[vt]:!0,[$e]:"sigv4",[Pt]:oc,[xr]:"{Region}"}]},O={},Oa={[y]:xe,[g]:[{[I]:"ForcePathStyle"},!1]},t0={[I]:"ForcePathStyle"},re={[y]:xe,[g]:[{[I]:"Accelerate"},!1]},oe={[y]:Q,[g]:[{[I]:"Region"},"aws-global"]},ie={[It]:[{[vt]:!0,[$e]:"sigv4",[Pt]:Zr,[xr]:"us-east-1"}]},M={[y]:Ke,[g]:[oe]},ae={[y]:xe,[g]:[{[I]:"UseGlobalEndpoint"},!0]},up={[_]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:{[It]:[{[vt]:!0,[$e]:"sigv4",[Pt]:Zr,[xr]:"{Region}"}]},[R]:{}},ne={[It]:[{[vt]:!0,[$e]:"sigv4",[Pt]:Zr,[xr]:"{Region}"}]},ce={[y]:xe,[g]:[{[I]:"UseGlobalEndpoint"},!1]},D={[y]:xe,[g]:[{[I]:"UseDualStack"},!1]},hp={[_]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[k]:ne,[R]:{}},P={[y]:xe,[g]:[{[I]:"UseFIPS"},!1]},pp={[_]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[k]:ne,[R]:{}},yp={[_]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:ne,[R]:{}},Da={[y]:xe,[g]:[{[y]:J,[g]:[{[I]:"url"},"isIp"]},!0]},iy={[I]:"url"},Ba={[y]:xe,[g]:[{[y]:J,[g]:[iy,"isIp"]},!1]},Ma={[_]:Qp,[k]:ne,[R]:{}},rc={[_]:Xp,[k]:ne,[R]:{}},gp={[w]:rc,[m]:w},Fa={[_]:Jp,[k]:ne,[R]:{}},Cp={[_]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[k]:ne,[R]:{}},Ps={[A]:"Invalid region: region was not a valid DNS name.",[m]:A},Ne={[I]:ey},ay={[I]:ty},La={[y]:J,[g]:[Ne,"service"]},ac={[I]:ic},xp={[u]:[K],[A]:"S3 Object Lambda does not support Dual-stack",[m]:A},Ep={[u]:[qe],[A]:"S3 Object Lambda does not support S3 Accelerate",[m]:A},wp={[u]:[{[y]:ft,[g]:[{[I]:"DisableAccessPoints"}]},{[y]:xe,[g]:[{[I]:"DisableAccessPoints"},!0]}],[A]:"Access points are not supported for this operation",[m]:A},za={[u]:[{[y]:ft,[g]:[{[I]:"UseArnRegion"}]},{[y]:xe,[g]:[{[I]:"UseArnRegion"},!1]},{[y]:Ke,[g]:[{[y]:Q,[g]:[{[y]:J,[g]:[Ne,"region"]},"{Region}"]}]}],[A]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[m]:A},cy={[y]:J,[g]:[{[I]:"bucketPartition"},$e]},dy={[y]:J,[g]:[Ne,"accountId"]},$a={[It]:[{[vt]:!0,[$e]:"sigv4",[Pt]:sc,[xr]:"{bucketArn#region}"}]},bp={[A]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[m]:A},Ua={[A]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[m]:A},ja={[A]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[m]:A},qa={[A]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[m]:A},Sp={[A]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[m]:A},Ap={[A]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[m]:A},$n={[It]:[{[vt]:!0,[$e]:"sigv4",[Pt]:Zr,[xr]:"{bucketArn#region}"}]},_p={[It]:[{[vt]:!0,[$e]:"sigv4",[Pt]:oc,[xr]:"{bucketArn#region}"}]},kp={[y]:Zp,[g]:[Tt]},Rp={[_]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:ne,[R]:{}},Np={[_]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:ne,[R]:{}},Tp={[_]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:ne,[R]:{}},Ka={[_]:ny,[k]:ne,[R]:{}},Ip={[_]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:ne,[R]:{}},vp={[I]:"UseObjectLambdaEndpoint"},Ga={[It]:[{[vt]:!0,[$e]:"sigv4",[Pt]:sc,[xr]:"{Region}"}]},Pp={[_]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:ne,[R]:{}},Op={[_]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[k]:ne,[R]:{}},Dp={[_]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:ne,[R]:{}},Ha={[_]:tc,[k]:ne,[R]:{}},Bp={[_]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[k]:ne,[R]:{}},Va=[{[I]:"Region"}],r0=[{[I]:"Endpoint"}],Mp=[Tt],Fp=[{[y]:Tr,[g]:[{[I]:ec},!1]}],Lp=[{[y]:Q,[g]:[{[I]:Wp},"beta"]}],Un=[X,we],zp=[sy],gr=[oy],$p=[{[y]:Tr,[g]:[{[I]:"Region"},!1]}],Cr=[{[y]:Q,[g]:[{[I]:"Region"},"us-east-1"]}],Wa=[{[y]:Q,[g]:[ay,ry]}],Up=[{[y]:J,[g]:[Ne,"resourceId[1]"],[pe]:ic},{[y]:Ke,[g]:[{[y]:Q,[g]:[ac,Bs]}]}],n0=[Ne,"resourceId[1]"],jp=[K],Ya=[qe],Qa=[{[y]:Ke,[g]:[{[y]:Q,[g]:[{[y]:J,[g]:[Ne,"region"]},Bs]}]}],qp=[{[y]:Ke,[g]:[{[y]:ft,[g]:[{[y]:J,[g]:[Ne,"resourceId[2]"]}]}]}],o0=[Ne,"resourceId[2]"],Xa=[{[y]:Ds,[g]:[{[y]:J,[g]:[Ne,"region"]}],[pe]:"bucketPartition"}],Kp=[{[y]:Q,[g]:[cy,{[y]:J,[g]:[{[I]:"partitionResult"},$e]}]}],Ja=[{[y]:Tr,[g]:[{[y]:J,[g]:[Ne,"region"]},!0]}],Za=[{[y]:Tr,[g]:[dy,!1]}],Gp=[{[y]:Tr,[g]:[ac,!1]}],Os=[W],Hp=[{[y]:Tr,[g]:[{[I]:"Region"},!0]}],s0={version:"1.0",parameters:{Bucket:va,Region:va,UseFIPS:Jr,UseDualStack:Jr,Endpoint:va,ForcePathStyle:Jr,Accelerate:Jr,UseGlobalEndpoint:Jr,UseObjectLambdaEndpoint:Pa,DisableAccessPoints:Pa,DisableMultiRegionAccessPoints:Jr,UseArnRegion:Pa},rules:[{[u]:[{[y]:ft,[g]:Va}],[m]:E,rules:[{[u]:[qe,W],error:"Accelerate cannot be used with FIPS",[m]:A},{[u]:[K,X],error:"Cannot set dual-stack in combination with a custom endpoint.",[m]:A},{[u]:[X,W],error:"A custom endpoint cannot be combined with FIPS",[m]:A},{[u]:[X,qe],error:"A custom endpoint cannot be combined with S3 Accelerate",[m]:A},{[u]:[W,oy,lp],error:"Partition does not support FIPS",[m]:A},{[u]:[sy,{[y]:zn,[g]:[Tt,49,50,!0],[pe]:Vp},{[y]:zn,[g]:[Tt,8,12,!0],[pe]:Wp},{[y]:zn,[g]:[Tt,0,7,!0],[pe]:tp},{[y]:zn,[g]:[Tt,32,49,!0],[pe]:ec},{[y]:Ds,[g]:Va,[pe]:"regionPartition"},{[y]:Q,[g]:[{[I]:tp},"--op-s3"]}],[m]:E,rules:[{[u]:Fp,[m]:E,rules:[{[u]:[{[y]:Q,[g]:[mp,"e"]}],[m]:E,rules:[{[u]:Lp,[m]:E,rules:[fp,{[u]:Un,endpoint:{[_]:"https://{Bucket}.ec2.{url#authority}",[k]:vs,[R]:O},[m]:w}]},{endpoint:{[_]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[k]:vs,[R]:O},[m]:w}]},{[u]:[{[y]:Q,[g]:[mp,"o"]}],[m]:E,rules:[{[u]:Lp,[m]:E,rules:[fp,{[u]:Un,endpoint:{[_]:"https://{Bucket}.op-{outpostId}.{url#authority}",[k]:vs,[R]:O},[m]:w}]},{endpoint:{[_]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[k]:vs,[R]:O},[m]:w}]},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[m]:A}]},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[m]:A}]},{[u]:zp,[m]:E,rules:[{[u]:[X,{[y]:Ke,[g]:[{[y]:ft,[g]:[{[y]:Yp,[g]:r0}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[m]:A},{[u]:[Oa,{[y]:rp,[g]:[Tt,!1]}],[m]:E,rules:[{[u]:gr,[m]:E,rules:[{[u]:$p,[m]:E,rules:[{[u]:[qe,lp],error:"S3 Accelerate cannot be used in this region",[m]:A},{[u]:[K,W,re,T,oe],endpoint:{[_]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:ie,[R]:O},[m]:w},{[u]:[K,W,re,T,M,ae],[m]:E,rules:[{endpoint:up,[m]:w}]},{[u]:[K,W,re,T,M,ce],endpoint:up,[m]:w},{[u]:[D,W,re,T,oe],endpoint:{[_]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[k]:ie,[R]:O},[m]:w},{[u]:[D,W,re,T,M,ae],[m]:E,rules:[{endpoint:hp,[m]:w}]},{[u]:[D,W,re,T,M,ce],endpoint:hp,[m]:w},{[u]:[K,P,qe,T,oe],endpoint:{[_]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:ie,[R]:O},[m]:w},{[u]:[K,P,qe,T,M,ae],[m]:E,rules:[{endpoint:pp,[m]:w}]},{[u]:[K,P,qe,T,M,ce],endpoint:pp,[m]:w},{[u]:[K,P,re,T,oe],endpoint:{[_]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:ie,[R]:O},[m]:w},{[u]:[K,P,re,T,M,ae],[m]:E,rules:[{endpoint:yp,[m]:w}]},{[u]:[K,P,re,T,M,ce],endpoint:yp,[m]:w},{[u]:[D,P,re,X,we,Da,oe],endpoint:{[_]:Qp,[k]:ie,[R]:O},[m]:w},{[u]:[D,P,re,X,we,Ba,oe],endpoint:{[_]:Xp,[k]:ie,[R]:O},[m]:w},{[u]:[D,P,re,X,we,Da,M,ae],[m]:E,rules:[{[u]:Cr,endpoint:Ma,[m]:w},{endpoint:Ma,[m]:w}]},{[u]:[D,P,re,X,we,Ba,M,ae],[m]:E,rules:[{[u]:Cr,endpoint:rc,[m]:w},gp]},{[u]:[D,P,re,X,we,Da,M,ce],endpoint:Ma,[m]:w},{[u]:[D,P,re,X,we,Ba,M,ce],endpoint:rc,[m]:w},{[u]:[D,P,qe,T,oe],endpoint:{[_]:Jp,[k]:ie,[R]:O},[m]:w},{[u]:[D,P,qe,T,M,ae],[m]:E,rules:[{[u]:Cr,endpoint:Fa,[m]:w},{endpoint:Fa,[m]:w}]},{[u]:[D,P,qe,T,M,ce],endpoint:Fa,[m]:w},{[u]:[D,P,re,T,oe],endpoint:{[_]:np,[k]:ie,[R]:O},[m]:w},{[u]:[D,P,re,T,M,ae],[m]:E,rules:[{[u]:Cr,endpoint:{[_]:np,[k]:ne,[R]:O},[m]:w},{endpoint:Cp,[m]:w}]},{[u]:[D,P,re,T,M,ce],endpoint:Cp,[m]:w}]},Ps]}]},{[u]:[X,we,{[y]:Q,[g]:[{[y]:J,[g]:[iy,"scheme"]},"http"]},{[y]:rp,[g]:[Tt,!0]},Oa,P,D,re],[m]:E,rules:[{[u]:gr,[m]:E,rules:[{[u]:$p,[m]:E,rules:[gp]},Ps]}]},{[u]:[Oa,{[y]:Zp,[g]:Mp,[pe]:ey}],[m]:E,rules:[{[u]:[{[y]:J,[g]:[Ne,"resourceId[0]"],[pe]:ty},{[y]:Ke,[g]:[{[y]:Q,[g]:[ay,Bs]}]}],[m]:E,rules:[{[u]:[{[y]:Q,[g]:[La,sc]}],[m]:E,rules:[{[u]:Wa,[m]:E,rules:[{[u]:Up,[m]:E,rules:[xp,Ep,{[u]:Qa,[m]:E,rules:[wp,{[u]:qp,[m]:E,rules:[za,{[u]:Xa,[m]:E,rules:[{[u]:gr,[m]:E,rules:[{[u]:Kp,[m]:E,rules:[{[u]:Ja,[m]:E,rules:[{[u]:[{[y]:Q,[g]:[dy,Bs]}],error:"Invalid ARN: Missing account id",[m]:A},{[u]:Za,[m]:E,rules:[{[u]:Gp,[m]:E,rules:[{[u]:Un,endpoint:{[_]:op,[k]:$a,[R]:O},[m]:w},{[u]:Os,endpoint:{[_]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:$a,[R]:O},[m]:w},{endpoint:{[_]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:$a,[R]:O},[m]:w}]},bp]},Ua]},ja]},qa]}]}]},Sp]},{error:"Invalid ARN: bucket ARN is missing a region",[m]:A}]},Ap]},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[m]:A}]},{[u]:Wa,[m]:E,rules:[{[u]:Up,[m]:E,rules:[{[u]:Qa,[m]:E,rules:[{[u]:Wa,[m]:E,rules:[{[u]:Qa,[m]:E,rules:[wp,{[u]:qp,[m]:E,rules:[za,{[u]:Xa,[m]:E,rules:[{[u]:gr,[m]:E,rules:[{[u]:[{[y]:Q,[g]:[cy,"{partitionResult#name}"]}],[m]:E,rules:[{[u]:Ja,[m]:E,rules:[{[u]:[{[y]:Q,[g]:[La,Zr]}],[m]:E,rules:[{[u]:Za,[m]:E,rules:[{[u]:Gp,[m]:E,rules:[{[u]:Ya,error:"Access Points do not support S3 Accelerate",[m]:A},{[u]:[W,K],endpoint:{[_]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:$n,[R]:O},[m]:w},{[u]:[W,D],endpoint:{[_]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:$n,[R]:O},[m]:w},{[u]:[P,K],endpoint:{[_]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:$n,[R]:O},[m]:w},{[u]:[P,D,X,we],endpoint:{[_]:op,[k]:$n,[R]:O},[m]:w},{[u]:[P,D],endpoint:{[_]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:$n,[R]:O},[m]:w}]},bp]},Ua]},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[m]:A}]},ja]},qa]}]}]},Sp]}]}]},{[u]:[{[y]:Tr,[g]:[ac,!0]}],[m]:E,rules:[{[u]:jp,error:"S3 MRAP does not support dual-stack",[m]:A},{[u]:Os,error:"S3 MRAP does not support FIPS",[m]:A},{[u]:Ya,error:"S3 MRAP does not support S3 Accelerate",[m]:A},{[u]:[{[y]:xe,[g]:[{[I]:"DisableMultiRegionAccessPoints"},!0]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[m]:A},{[u]:[{[y]:Ds,[g]:Va,[pe]:sp}],[m]:E,rules:[{[u]:[{[y]:Q,[g]:[{[y]:J,[g]:[{[I]:sp},$e]},{[y]:J,[g]:[Ne,"partition"]}]}],[m]:E,rules:[{endpoint:{[_]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[k]:{[It]:[{[vt]:!0,name:"sigv4a",[Pt]:Zr,signingRegionSet:["*"]}]},[R]:O},[m]:w}]},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[m]:A}]}]},{error:"Invalid Access Point Name",[m]:A}]},Ap]},{[u]:[{[y]:Q,[g]:[La,oc]}],[m]:E,rules:[{[u]:jp,error:"S3 Outposts does not support Dual-stack",[m]:A},{[u]:Os,error:"S3 Outposts does not support FIPS",[m]:A},{[u]:Ya,error:"S3 Outposts does not support S3 Accelerate",[m]:A},{[u]:[{[y]:ft,[g]:[{[y]:J,[g]:[Ne,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[m]:A},{[u]:[{[y]:J,[g]:n0,[pe]:ec}],[m]:E,rules:[{[u]:Fp,[m]:E,rules:[za,{[u]:Xa,[m]:E,rules:[{[u]:gr,[m]:E,rules:[{[u]:Kp,[m]:E,rules:[{[u]:Ja,[m]:E,rules:[{[u]:Za,[m]:E,rules:[{[u]:[{[y]:J,[g]:o0,[pe]:ip}],[m]:E,rules:[{[u]:[{[y]:J,[g]:[Ne,"resourceId[3]"],[pe]:ic}],[m]:E,rules:[{[u]:[{[y]:Q,[g]:[{[I]:ip},ry]}],[m]:E,rules:[{[u]:Un,endpoint:{[_]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[k]:_p,[R]:O},[m]:w},{endpoint:{[_]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:_p,[R]:O},[m]:w}]},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[m]:A}]},{error:"Invalid ARN: expected an access point name",[m]:A}]},{error:"Invalid ARN: Expected a 4-component resource",[m]:A}]},Ua]},ja]},qa]}]}]},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[m]:A}]},{error:"Invalid ARN: The Outpost Id was not set",[m]:A}]},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[m]:A}]},{error:"Invalid ARN: No ARN type specified",[m]:A}]},{[u]:[{[y]:zn,[g]:[Tt,0,4,!1],[pe]:ap},{[y]:Q,[g]:[{[I]:ap},"arn:"]},{[y]:Ke,[g]:[{[y]:ft,[g]:[kp]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[m]:A},{[u]:[{[y]:xe,[g]:[t0,!0]},kp],error:"Path-style addressing cannot be used with ARN buckets",[m]:A},{[u]:[{[y]:"uriEncode",[g]:Mp,[pe]:"uri_encoded_bucket"}],[m]:E,rules:[{[u]:gr,[m]:E,rules:[{[u]:[re],[m]:E,rules:[{[u]:[K,T,W,oe],endpoint:{[_]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:ie,[R]:O},[m]:w},{[u]:[K,T,W,M,ae],[m]:E,rules:[{endpoint:Rp,[m]:w}]},{[u]:[K,T,W,M,ce],endpoint:Rp,[m]:w},{[u]:[D,T,W,oe],endpoint:{[_]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:ie,[R]:O},[m]:w},{[u]:[D,T,W,M,ae],[m]:E,rules:[{endpoint:Np,[m]:w}]},{[u]:[D,T,W,M,ce],endpoint:Np,[m]:w},{[u]:[K,T,P,oe],endpoint:{[_]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:ie,[R]:O},[m]:w},{[u]:[K,T,P,M,ae],[m]:E,rules:[{endpoint:Tp,[m]:w}]},{[u]:[K,T,P,M,ce],endpoint:Tp,[m]:w},{[u]:[D,X,we,P,oe],endpoint:{[_]:ny,[k]:ie,[R]:O},[m]:w},{[u]:[D,X,we,P,M,ae],[m]:E,rules:[{[u]:Cr,endpoint:Ka,[m]:w},{endpoint:Ka,[m]:w}]},{[u]:[D,X,we,P,M,ce],endpoint:Ka,[m]:w},{[u]:[D,T,P,oe],endpoint:{[_]:cp,[k]:ie,[R]:O},[m]:w},{[u]:[D,T,P,M,ae],[m]:E,rules:[{[u]:Cr,endpoint:{[_]:cp,[k]:ne,[R]:O},[m]:w},{endpoint:Ip,[m]:w}]},{[u]:[D,T,P,M,ce],endpoint:Ip,[m]:w}]},{error:"Path-style addressing cannot be used with S3 Accelerate",[m]:A}]}]}]},{[u]:[{[y]:ft,[g]:[vp]},{[y]:xe,[g]:[vp,!0]}],[m]:E,rules:[{[u]:gr,[m]:E,rules:[{[u]:Hp,[m]:E,rules:[xp,Ep,{[u]:Un,endpoint:{[_]:tc,[k]:Ga,[R]:O},[m]:w},{[u]:Os,endpoint:{[_]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[k]:Ga,[R]:O},[m]:w},{endpoint:{[_]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[k]:Ga,[R]:O},[m]:w}]},Ps]}]},{[u]:[{[y]:Ke,[g]:zp}],[m]:E,rules:[{[u]:gr,[m]:E,rules:[{[u]:Hp,[m]:E,rules:[{[u]:[W,K,T,oe],endpoint:{[_]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:ie,[R]:O},[m]:w},{[u]:[W,K,T,M,ae],[m]:E,rules:[{endpoint:Pp,[m]:w}]},{[u]:[W,K,T,M,ce],endpoint:Pp,[m]:w},{[u]:[W,D,T,oe],endpoint:{[_]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[k]:ie,[R]:O},[m]:w},{[u]:[W,D,T,M,ae],[m]:E,rules:[{endpoint:Op,[m]:w}]},{[u]:[W,D,T,M,ce],endpoint:Op,[m]:w},{[u]:[P,K,T,oe],endpoint:{[_]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:ie,[R]:O},[m]:w},{[u]:[P,K,T,M,ae],[m]:E,rules:[{endpoint:Dp,[m]:w}]},{[u]:[P,K,T,M,ce],endpoint:Dp,[m]:w},{[u]:[P,D,X,we,oe],endpoint:{[_]:tc,[k]:ie,[R]:O},[m]:w},{[u]:[P,D,X,we,M,ae],[m]:E,rules:[{[u]:Cr,endpoint:Ha,[m]:w},{endpoint:Ha,[m]:w}]},{[u]:[P,D,X,we,M,ce],endpoint:Ha,[m]:w},{[u]:[P,D,T,oe],endpoint:{[_]:dp,[k]:ie,[R]:O},[m]:w},{[u]:[P,D,T,M,ae],[m]:E,rules:[{[u]:Cr,endpoint:{[_]:dp,[k]:ne,[R]:O},[m]:w},{endpoint:Bp,[m]:w}]},{[u]:[P,D,T,M,ce],endpoint:Bp,[m]:w}]},Ps]}]}]},{error:"A region must be set when sending requests to S3.",[m]:A}]},ly=s0;var my=(e,t={})=>Vt(ly,{endpointParams:e,logger:t.logger});var fy=e=>{var t,r,n,o,s,i,a,c,d,l,f,h,p,C,x;return{apiVersion:"2006-03-01",base64Decoder:(t=e==null?void 0:e.base64Decoder)!=null?t:nt,base64Encoder:(r=e==null?void 0:e.base64Encoder)!=null?r:ot,disableHostPrefix:(n=e==null?void 0:e.disableHostPrefix)!=null?n:!1,endpointProvider:(o=e==null?void 0:e.endpointProvider)!=null?o:my,extensions:(s=e==null?void 0:e.extensions)!=null?s:[],getAwsChunkedEncodingStream:(i=e==null?void 0:e.getAwsChunkedEncodingStream)!=null?i:Dl,logger:(a=e==null?void 0:e.logger)!=null?a:new tt,sdkStreamMixin:(c=e==null?void 0:e.sdkStreamMixin)!=null?c:Kl,serviceId:(d=e==null?void 0:e.serviceId)!=null?d:"S3",signerConstructor:(l=e==null?void 0:e.signerConstructor)!=null?l:Is,signingEscapePath:(f=e==null?void 0:e.signingEscapePath)!=null?f:!1,urlParser:(h=e==null?void 0:e.urlParser)!=null?h:Ae,useArnRegion:(p=e==null?void 0:e.useArnRegion)!=null?p:!1,utf8Decoder:(C=e==null?void 0:e.utf8Decoder)!=null?C:be,utf8Encoder:(x=e==null?void 0:e.utf8Encoder)!=null?x:De}};var uy=e=>{var o,s,i,a,c,d,l,f,h,p,C,x,b,ee,$,Ge;cr(process.version);let t=hr(e),r=()=>t().then(ar),n=fy(e);return{...n,...e,runtime:"node",defaultsMode:t,bodyLengthChecker:(o=e==null?void 0:e.bodyLengthChecker)!=null?o:ur,credentialDefaultProvider:(s=e==null?void 0:e.credentialDefaultProvider)!=null?s:Hh(Ns),defaultUserAgentProvider:(i=e==null?void 0:e.defaultUserAgentProvider)!=null?i:fr({serviceId:n.serviceId,clientVersion:mm.version}),eventStreamSerdeProvider:(a=e==null?void 0:e.eventStreamSerdeProvider)!=null?a:Jh,maxAttempts:(c=e==null?void 0:e.maxAttempts)!=null?c:F(rr),md5:(d=e==null?void 0:e.md5)!=null?d:ze.bind(null,"md5"),region:(l=e==null?void 0:e.region)!=null?l:F(Ze,Xt),requestHandler:(f=e==null?void 0:e.requestHandler)!=null?f:new st(r),retryMode:(h=e==null?void 0:e.retryMode)!=null?h:F({...or,default:async()=>(await r()).retryMode||et}),sha1:(p=e==null?void 0:e.sha1)!=null?p:ze.bind(null,"sha1"),sha256:(C=e==null?void 0:e.sha256)!=null?C:ze.bind(null,"sha256"),streamCollector:(x=e==null?void 0:e.streamCollector)!=null?x:it,streamHasher:(b=e==null?void 0:e.streamHasher)!=null?b:ep,useArnRegion:(ee=e==null?void 0:e.useArnRegion)!=null?ee:F(Vh),useDualstackEndpoint:($=e==null?void 0:e.useDualstackEndpoint)!=null?$:F(Yt),useFipsEndpoint:(Ge=e==null?void 0:e.useFipsEndpoint)!=null?Ge:F(Qt)}};var i0=e=>e,hy=(e,t)=>{let r={...i0(jr(e))};return t.forEach(n=>n.configure(r)),{...e,...qr(r)}};var Ms=class extends rt{constructor(...[t]){let r=uy(t||{}),n=lm(r),o=Jt(n),s=tr(o),i=nr(s),a=i,c=xo(a),d=Hc(c),l=Gt(d),f=nl(l),h=hy(f,(t==null?void 0:t.extensions)||[]);super(h),this.config=h,this.middlewareStack.use(sr(this.config)),this.middlewareStack.use(er(this.config)),this.middlewareStack.use(zt(this.config)),this.middlewareStack.use($t(this.config)),this.middlewareStack.use(Ut(this.config)),this.middlewareStack.use(wo(this.config)),this.middlewareStack.use(Vc(this.config)),this.middlewareStack.use(qc(this.config)),this.middlewareStack.use(Wt(this.config))}destroy(){super.destroy()}};var wy=Ot(oa());var Fs=class e extends at{constructor(t){super(t),Object.setPrototypeOf(this,e.prototype)}};var py;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(py||(py={}));var yy;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.ObjectSizeGreaterThan!==void 0?r.ObjectSizeGreaterThan(t.ObjectSizeGreaterThan):t.ObjectSizeLessThan!==void 0?r.ObjectSizeLessThan(t.ObjectSizeLessThan):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(yy||(yy={}));var gy;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.AccessPointArn!==void 0?r.AccessPointArn(t.AccessPointArn):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(gy||(gy={}));var Cy;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(Cy||(Cy={}));var xy=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:Te},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Te}}),Ey=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:Te},...e.SSEKMSKeyId&&{SSEKMSKeyId:Te},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:Te}});var by=async(e,t)=>{let{hostname:r,protocol:n="https",port:o,path:s}=await t.endpoint(),i=q({},jn,{"content-type":e.ContentType||"application/octet-stream","x-amz-acl":e.ACL,"cache-control":e.CacheControl,"content-disposition":e.ContentDisposition,"content-encoding":e.ContentEncoding,"content-language":e.ContentLanguage,"content-length":[()=>jn(e.ContentLength),()=>e.ContentLength.toString()],"content-md5":e.ContentMD5,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-checksum-crc32":e.ChecksumCRC32,"x-amz-checksum-crc32c":e.ChecksumCRC32C,"x-amz-checksum-sha1":e.ChecksumSHA1,"x-amz-checksum-sha256":e.ChecksumSHA256,expires:[()=>jn(e.Expires),()=>rm(e.Expires).toString()],"x-amz-grant-full-control":e.GrantFullControl,"x-amz-grant-read":e.GrantRead,"x-amz-grant-read-acp":e.GrantReadACP,"x-amz-grant-write-acp":e.GrantWriteACP,"x-amz-server-side-encryption":e.ServerSideEncryption,"x-amz-storage-class":e.StorageClass,"x-amz-website-redirect-location":e.WebsiteRedirectLocation,"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":e.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5,"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId,"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext,"x-amz-server-side-encryption-bucket-key-enabled":[()=>jn(e.BucketKeyEnabled),()=>e.BucketKeyEnabled.toString()],"x-amz-request-payer":e.RequestPayer,"x-amz-tagging":e.Tagging,"x-amz-object-lock-mode":e.ObjectLockMode,"x-amz-object-lock-retain-until-date":[()=>jn(e.ObjectLockRetainUntilDate),()=>(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()],"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner,...e.Metadata!==void 0&&Object.keys(e.Metadata).reduce((f,h)=>(f[`x-amz-meta-${h.toLowerCase()}`]=e.Metadata[h],f),{})}),a=`${s!=null&&s.endsWith("/")?s.slice(0,-1):s||""}/{Key+}`;a=Wi(a,e,"Bucket",()=>e.Bucket,"{Bucket}",!1),a=Wi(a,e,"Key",()=>e.Key,"{Key+}",!0);let c=q({"x-id":[,"PutObject"]}),d;e.Body!==void 0&&(d=e.Body);let l;return e.Body!==void 0&&(l=e.Body,d=l),new U({protocol:n,hostname:r,port:o,method:"PUT",headers:i,path:a,query:c,body:d})};var Sy=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return c0(e,t);let r=q({$metadata:l0(e),Expiration:[,e.headers["x-amz-expiration"]],ETag:[,e.headers.etag],ChecksumCRC32:[,e.headers["x-amz-checksum-crc32"]],ChecksumCRC32C:[,e.headers["x-amz-checksum-crc32c"]],ChecksumSHA1:[,e.headers["x-amz-checksum-sha1"]],ChecksumSHA256:[,e.headers["x-amz-checksum-sha256"]],ServerSideEncryption:[,e.headers["x-amz-server-side-encryption"]],VersionId:[,e.headers["x-amz-version-id"]],SSECustomerAlgorithm:[,e.headers["x-amz-server-side-encryption-customer-algorithm"]],SSECustomerKeyMD5:[,e.headers["x-amz-server-side-encryption-customer-key-md5"]],SSEKMSKeyId:[,e.headers["x-amz-server-side-encryption-aws-kms-key-id"]],SSEKMSEncryptionContext:[,e.headers["x-amz-server-side-encryption-context"]],BucketKeyEnabled:[()=>e.headers["x-amz-server-side-encryption-bucket-key-enabled"]!==void 0,()=>Yl(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])],RequestCharged:[,e.headers["x-amz-request-charged"]]});return await xt(e.body,t),r},c0=async(e,t)=>{let r={...e,body:await u0(e.body,t)},n=h0(e,r.body),o=r.body;return d0({output:e,parsedBody:o,errorCode:n})};var d0=ir(Fs);var l0=e=>{var t,r;return{httpStatusCode:e.statusCode,requestId:(r=(t=e.headers["x-amzn-requestid"])!=null?t:e.headers["x-amzn-request-id"])!=null?r:e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}},m0=(e,t)=>xt(e,t).then(r=>t.utf8Encoder(r)),jn=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),f0=(e,t)=>m0(e,t).then(r=>{if(r.length){let n=new wy.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,d)=>d.trim()===""&&d.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);let o=n.parse(r),s="#text",i=Object.keys(o)[0],a=o[i];return a[s]&&(a[i]=a[s],delete a[s]),xn(a)}return{}}),u0=async(e,t)=>{var n;let r=await f0(e,t);return r.Error&&(r.Error.message=(n=r.Error.message)!=null?n:r.Error.Message),r},h0=(e,t)=>{if((t==null?void 0:t.Code)!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"};function p0(e){return t=>async r=>{let n={...r.input},o=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(let s of o){let i=n[s.target];if(i){let a=ArrayBuffer.isView(i)?new Uint8Array(i.buffer,i.byteOffset,i.byteLength):typeof i=="string"?e.utf8Decoder(i):new Uint8Array(i),c=e.base64Encoder(a),d=new e.md5;d.update(a),n={...n,[s.target]:c,[s.hash]:e.base64Encoder(await d.digest())}}}return t({...r,input:n})}}var y0={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},Ay=e=>({applyToStack:t=>{t.add(p0(e),y0)}});var Z;(function(e){e.MD5="MD5",e.CRC32="CRC32",e.CRC32C="CRC32C",e.SHA1="SHA1",e.SHA256="SHA256"})(Z||(Z={}));var _y;(function(e){e.HEADER="header",e.TRAILER="trailer"})(_y||(_y={}));var qn=[Z.CRC32,Z.CRC32C,Z.SHA1,Z.SHA256],ky=[Z.CRC32,Z.CRC32C,Z.SHA1,Z.SHA256];var Ry=(e,{requestChecksumRequired:t,requestAlgorithmMember:r})=>{if(!r||!e[r])return t?Z.MD5:void 0;let n=e[r];if(!qn.includes(n))throw new Error(`The checksum algorithm "${n}" is not supported by the client. Select one of ${qn}.`);return n};var Ls=e=>e===Z.MD5?"content-md5":`x-amz-checksum-${e.toLowerCase()}`;var Ny=(e,t)=>{let r=e.toLowerCase();for(let n of Object.keys(t))if(r===n.toLowerCase())return!0;return!1};var en=e=>e!==void 0&&typeof e!="string"&&!ArrayBuffer.isView(e)&&!Br(e);var Oy=Ot(hn()),Dy=Ot(dc());var $s=(e,t)=>({[Z.MD5]:t.md5,[Z.CRC32]:Oy.AwsCrc32,[Z.CRC32C]:Dy.AwsCrc32c,[Z.SHA1]:t.sha1,[Z.SHA256]:t.sha256})[e];var Us=(e,t)=>{let r=new e;return r.update(Se(t||"")),r.digest()};var By=(e,t)=>r=>async n=>{if(!U.isInstance(n.request))return r(n);let{request:o}=n,{body:s,headers:i}=o,{base64Encoder:a,streamHasher:c}=e,{input:d,requestChecksumRequired:l,requestAlgorithmMember:f}=t,h=Ry(d,{requestChecksumRequired:l,requestAlgorithmMember:f}),p=s,C=i;if(h){let b=Ls(h),ee=$s(h,e);if(en(s)){let{getAwsChunkedEncodingStream:$,bodyLengthChecker:Ge}=e;p=$(s,{base64Encoder:a,bodyLengthChecker:Ge,checksumLocationName:b,checksumAlgorithmFn:ee,streamHasher:c}),C={...i,"content-encoding":i["content-encoding"]?`${i["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":i["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":b},delete C["content-length"]}else if(!Ny(b,i)){let $=await Us(ee,s);C={...i,[b]:a($)}}}return await r({...n,request:{...o,headers:C,body:p}})};var My=require("stream");function lc(e){let t=new My.Transform;return t.push(e),t.push(null),t}var Fy=async(e,{streamHasher:t,checksumAlgorithmFn:r,base64Encoder:n})=>{let o=en(e)?t(r,e):Us(r,e);return n(await o)};var Ly=(e=[])=>{let t=[];for(let r of ky)!e.includes(r)||!qn.includes(r)||t.push(r);return t};var zy=async(e,{config:t,responseAlgorithms:r})=>{let n=Ly(r),{body:o,headers:s}=e;for(let i of n){let a=Ls(i),c=s[a];if(c){let d=$s(i,t),{streamHasher:l,base64Encoder:f}=t,h=await Fy(o,{streamHasher:l,checksumAlgorithmFn:d,base64Encoder:f});if(h===c)break;throw new Error(`Checksum mismatch: expected "${h}" but received "${c}" in response header "${a}".`)}}};var $y={name:"flexibleChecksumsResponseMiddleware",toMiddleware:"deserializerMiddleware",relation:"after",tags:["BODY_CHECKSUM"],override:!0},Uy=(e,t)=>r=>async n=>{if(!U.isInstance(n.request))return r(n);let o=n.input,s=await r(n),i=s.response,a,{requestValidationModeMember:c,responseAlgorithms:d}=t;if(c&&o[c]==="ENABLED"){let l=en(i.body);l&&(a=await e.streamCollector(i.body),i.body=lc(a)),await zy(s.response,{config:e,responseAlgorithms:d}),l&&a&&(i.body=lc(a))}return s};var A0={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},jy=(e,t)=>({applyToStack:r=>{r.add(By(e,t),A0),r.addRelativeTo(Uy(e,t),$y)}});var js=class e extends ge{static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(_e(r,this.serialize,this.deserialize)),this.middlewareStack.use(ke(r,e.getEndpointParameterInstructions())),this.middlewareStack.use(Gc(r)),this.middlewareStack.use(Ay(r)),this.middlewareStack.use(jy(r,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!1}));let o=t.concat(this.middlewareStack),{logger:s}=r,c={logger:s,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:Ey,outputFilterSensitiveLog:xy},{requestHandler:d}=r;return o.resolve(l=>d.handle(l.request,n||{}),c)}serialize(t,r){return by(t,r)}deserialize(t,r){return Sy(t,r)}};var _0=new Ms({region:"auto",endpoint:`https://${process.env.CLOUDFLARE_ACCOUNT_ID}.r2.cloudflarestorage.com`,credentials:{accessKeyId:process.env.R2_ACCESS_KEY_ID,secretAccessKey:process.env.R2_SECRET_ACCESS_KEY}}),qy=async(e,t,r)=>{let n=new js({Bucket:process.env.R2_BUCKET,Key:e,Body:t,ContentType:r});return await _0.send(n)};var Ky=require("fs"),k0=async()=>{let{filename:e,location:t,result:r}=await jc(),n=await qy(`images/${e}`,r,"image/jpeg");console.log(n),(0,Ky.unlinkSync)(t)};k0();
/*! Bundled license information:

tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
//# sourceMappingURL=main.js.map